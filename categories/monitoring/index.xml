<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Monitoring on jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</title>
    <link>http://localhost:1313/categories/monitoring/</link>
    <description>Recent content in Monitoring on jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</description>
    <image>
      <title>jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</title>
      <url>http://localhost:1313/jedipunkz.jpg</url>
      <link>http://localhost:1313/jedipunkz.jpg</link>
    </image>
    <generator>Hugo -- 0.152.2</generator>
    <language>en</language>
    <lastBuildDate>Sat, 08 Nov 2025 00:00:00 +0000</lastBuildDate>
    <atom:link href="http://localhost:1313/categories/monitoring/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Discord ã‚µãƒ¼ãƒã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ Prometheus ã§å¯è¦–åŒ–ã™ã‚‹</title>
      <link>http://localhost:1313/post/2025/11/08/discord-exporter/</link>
      <pubDate>Sat, 08 Nov 2025 00:00:00 +0000</pubDate>
      <guid>http://localhost:1313/post/2025/11/08/discord-exporter/</guid>
      <description>&lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€‚ä»Šå›ã¯ Discord ã‚µãƒ¼ãƒã®é‹ç”¨ç›£è¦–ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ãŸã‚ã«ã€Prometheus Exporter ã‚’é–‹ç™ºã—ãŸã®ã§ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚&lt;/p&gt;
&lt;p&gt;Discord ã§ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã‚„ãƒãƒ¼ãƒ ã‚’é‹å–¶ã—ã¦ã„ã‚‹ã¨ã€ã‚µãƒ¼ãƒã®å¥å…¨æ€§ã‚„æ´»ç™ºåº¦ã‚’å®šé‡çš„ã«æŠŠæ¡ã—ãŸããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãã“ã§ã€Discord ã‚µãƒ¼ãƒã®ãƒ¡ãƒ³ãƒãƒ¼æ•°æ¨ç§»ã¨ãƒãƒ£ãƒãƒ«ã”ã¨ã®ã‚³ãƒ¡ãƒ³ãƒˆæ•°æ¨ç§»ã‚’ Prometheus ã§åé›†ã—ã€Grafana ã§å¯è¦–åŒ–ã§ãã‚‹ Exporter ã‚’é–‹ç™ºã—ã¾ã—ãŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;discord-exporter-ã®æ¦‚è¦&#34;&gt;Discord Exporter ã®æ¦‚è¦&lt;/h2&gt;
&lt;p&gt;Discord Exporter ã¯ã€Discord ã‚µãƒ¼ãƒã®çµ±è¨ˆæƒ…å ±ã‚’ Prometheus ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¨ã—ã¦ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/jedipunkz/discord-exporter&#34;&gt;https://github.com/jedipunkz/discord-exporter&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;ä¸»ãªæ©Ÿèƒ½&#34;&gt;ä¸»ãªæ©Ÿèƒ½&lt;/h3&gt;
&lt;p&gt;ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ä»¥ä¸‹ã®2ã¤ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ã¾ã™ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;discord_members_count: Discord ã‚µãƒ¼ãƒå†…ã®ãƒ¡ãƒ³ãƒãƒ¼ç·æ•°&lt;/li&gt;
&lt;li&gt;discord_message_count: å„ãƒãƒ£ãƒãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ•°ï¼ˆãƒãƒ£ãƒãƒ«åã‚’ãƒ©ãƒ™ãƒ«ã¨ã—ã¦ä¿æŒï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯&#34;&gt;æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;é–‹ç™ºè¨€èª: Go&lt;/li&gt;
&lt;li&gt;ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹å¼: Docker Compose ã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒŠåŒ–&lt;/li&gt;
&lt;li&gt;ãƒ¡ãƒˆãƒªã‚¯ã‚¹å…¬é–‹: HTTP çµŒç”±ã§ localhost:2112/metrics ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æä¾›&lt;/li&gt;
&lt;li&gt;è¨­å®š: YAML ãƒ•ã‚¡ã‚¤ãƒ«ã§ Discord ãƒˆãƒ¼ã‚¯ãƒ³ã€ã‚µãƒ¼ãƒ IDã€é™¤å¤–ãƒãƒ£ãƒãƒ«ã‚’æŒ‡å®š&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ã‚³ãƒ¼ãƒ‰ã®æ¦‚è¦èª¬æ˜&#34;&gt;ã‚³ãƒ¼ãƒ‰ã®æ¦‚è¦èª¬æ˜&lt;/h2&gt;
&lt;p&gt;Discord Exporter ã®ä¸»è¦ãªå‡¦ç†ã‚’è§£èª¬ã—ã¦ã„ãã¾ã™ã€‚&lt;/p&gt;
&lt;h3 id=&#34;discord-api-å‘¼ã³å‡ºã—å‡¦ç†&#34;&gt;Discord API å‘¼ã³å‡ºã—å‡¦ç†&lt;/h3&gt;
&lt;h4 id=&#34;ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã®å–å¾—&#34;&gt;ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã®å–å¾—&lt;/h4&gt;
&lt;p&gt;updateMemberCount é–¢æ•°ã§ã¯ã€Discord ã® GuildMembers API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å‘¼ã³å‡ºã—ã¦ãƒ¡ãƒ³ãƒãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚API ã®åˆ¶é™ã«ã‚ˆã‚Šæœ€å¤§1000ä»¶å˜ä½ã§ãƒ¡ãƒ³ãƒãƒ¼ã‚’å–å¾—ã—ã€å–å¾—ã—ãŸãƒ¡ãƒ³ãƒãƒ¼æ•°ã‚’ Prometheus ã®ã‚²ãƒ¼ã‚¸ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«è¨­å®šã—ã¾ã™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;updateMemberCount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;discordgo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;Session&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;guildID&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;members&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;GuildMembers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;guildID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Error fetching members: %v&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;return&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;memberCountGauge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;float64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;members&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Printf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Updated member count: %d&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;members&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ã‚¦ãƒ³ãƒˆå‡¦ç†&#34;&gt;ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚«ã‚¦ãƒ³ãƒˆå‡¦ç†&lt;/h4&gt;
&lt;p&gt;countChannelMessages é–¢æ•°ã§ã¯ã€ãƒãƒ£ãƒãƒ«ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ®µéšçš„ã«å–å¾—ã—ã¾ã™ã€‚ChannelMessages API ã§100ä»¶ãšã¤ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã—ã€æœ€çµ‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã® ID ã‚’æ¬¡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¢ãƒ³ã‚«ãƒ¼ã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å…¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ•°ãˆä¸Šã’ã‚‹ã¾ã§ãƒ«ãƒ¼ãƒ—å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
