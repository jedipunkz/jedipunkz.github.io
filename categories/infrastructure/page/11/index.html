<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>infrastructure | jedipunkz 🚀 のブログ</title>
<meta name="keywords" content="" />
<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="https://jedipunkz.github.io/categories/infrastructure/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.44044074f4b4d7b018bfd3febcc1fa76eb874db64213f920feacf263e3028a73.css" integrity="sha256-RARAdPS017AYv9P&#43;vMH6duuHTbZCE/kg/qzyY&#43;MCinM=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jedipunkz.github.io/pix/jedipunkz.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://jedipunkz.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jedipunkz.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jedipunkz.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://jedipunkz.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.113.0">
<link rel="alternate" type="application/rss+xml" href="https://jedipunkz.github.io/categories/infrastructure/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-30563095-1', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="infrastructure" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://jedipunkz.github.io/categories/infrastructure/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="infrastructure"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jedipunkz.github.io" accesskey="h" title="jedipunkz 🚀 のブログ (Alt + H)">jedipunkz 🚀 のブログ</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jedipunkz.github.io/about" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>infrastructure</h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>openstack-chef-repo で OpenStack 複数台構成をデプロイ
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
前回、github.com/rcbops の Cookbooks を利用した OpenStack デプロイ方法を紹介し ました。これは RackSpace 社の Private Cloud Service で使われている Cookbooks で Apache ライセンスの元、誰でも利用できるようになっているものです。HA 構成を 組めたり Swift の操作 (Rings 情報管理など) も Chef で出来る優れた Cookbooks な わけですが、運用するにあたり幾つか考えなくてはならないこともありそうです。
chef-client の実行順番と実行回数が密接に関わっていること HA 構成の手動切替等、運用上必要な操作について考慮する必要性 ※ 後者については OpenStack ユーザ会の方々に意見もらいました。
特に前項は Chef を利用する一番の意義である “冪等性” をある程度 (全くという意味 ではありませんが) 犠牲にしていると言えます。また chef-client の実行回数、タイ ミング等 Cookbooks を完全に理解していないと運用は難しいでしょう。自ら管理して いる Cookbooks なら問題ないですが、rcbops が管理しているので常に更新状況を追っ ていく必要もありそうです。
一方、Opscode, RackSpace, AT&amp;T 等のエンジニアが管理している Cookbooks がありま す。これは以前、日本の OpenStack 勉強会で私が話した ‘openstack-chef-repo’ を利 用したモノです。github.com/stackforge の元に管理されています。 openstack-chef-repo は Berksfile, Roles, Environments のみの構成で各 Cookbooks は Berksfile を元に取得する形になります。取得先は同じく github....</p>
  </section>
  <footer class="entry-footer"><span title='2013-08-06 00:00:00 +0000 UTC'>August 6, 2013</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to openstack-chef-repo で OpenStack 複数台構成をデプロイ" href="https://jedipunkz.github.io/post/2013/08/06/opscode-cookbooks-openstack-deploy/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Cobbler で OS 自動インストール
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
最近、自動化は正義だと最近思うのですが、その手助けをしてくれるツール Cobbler を試してみました。Cobbler と複数 OS, ディストリビューションを CLI, GUI で管理出 来るツールです。PXE, TFTP, DHCPを組分せれば OS の自動構築が出来るのは古くから ありますが、TFTP サーバに配置するカーネルイメージやマックアドレスの管理を一元 して管理してくれるのがこの Cobbler です。
今回は Cobbler の構築方法をお伝えします。本当は Chef Cookbooks で構築したかっ たのですが Opscode Community にある Cookbooks はイマイチだったので、今回は手動 で。
前提環境 OS は CentOSを。Ubuntu を利用すると DHCP のコンフィギュレーションを自動で出 来ません 利用するネットワークの DHCP はオフにします 構築手順 SELINUX を無効にします。石◯さん、ごめんなさい。
# ${EDITOR} /etc/sysconfig/selinux SELINUX=disabled # setenforce 0 EPEL のレポジトリを追加します。
# rpm -Uvh http://ftp.iij.ad.jp/pub/linux/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm cobbler をインストールします。またその他必要なパッケージもここでインストールし ます。
# yum install cobbler debmirror pykickstart 自分の設定したいパスワードを生成して /etc/cobbler/settings 内の default_password_crypted: に設定します。パスワードの生成は下記のように openssl コマンドを利用します。...</p>
  </section>
  <footer class="entry-footer"><span title='2013-07-28 00:00:00 +0000 UTC'>July 28, 2013</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Cobbler で OS 自動インストール" href="https://jedipunkz.github.io/post/2013/07/28/cobbler-os-automation-install/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Swift HA 構成を Chef でデプロイ
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
最近 Chef で OpenStack をデプロイすることばかりに興味持っちゃって、他のことも やらんとなぁと思っているのですが、せっかくなので Swift HA 構成を Chef でデプロ イする方法を書きます。
Swift って分散ストレージなのに HA ってなんよ！と思われるかもしれませんが、ご存 知の様に Swift はストレージノード (accout, object, container) とプロキシノード に別れます。今回紹介する方法だとプロキシノードを Keepalived と Haproxy で HA、 また MySQL も KeepAlived で HA の構成に出来ました。いつものように RackSpace 管 理の Cookbooks を使っています。
参考資料 http://www.rackspace.com/knowledge_center/article/openstack-object-storage-configuration
構成 構成は簡単に記すと下記のようになります。特徴としては…
swift-proxy01, swift-proxy02 で HA。VRRP &#43; LB な構成。 swift-proxy01 で git サーバ稼働。Rings 情報を管理。 swift-storageNN がストレージノード OS は Ubuntu server 12.04 です。
|--------- VRRP &#43; Load Balancer ------| &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; | swift-proxy01 | | swift-proxy02 | | swift-storage01 | | swift-storage02 | | swift-storage03 | &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; | | | | | &#43;-------------------&#43;-------------------&#43;-------------------&#43;-------------------&#43;------------------ | | &#43;-----------------&#43; &#43;-----------------&#43; | chef workstation| | chef server | &#43;-----------------&#43; &#43;-----------------&#43; 絵は書く意味なかったか…。...</p>
  </section>
  <footer class="entry-footer"><span title='2013-07-26 00:00:00 +0000 UTC'>July 26, 2013</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Swift HA 構成を Chef でデプロイ" href="https://jedipunkz.github.io/post/2013/07/26/swift-ha-chef-deploy/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>OpenStack HA 構成を Chef でデプロイ
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
OpenStack を運用する中でコントローラは重要です。コントローラノードが落ちると、 仮想マシンの操作等が利用出来ません。コントローラの冗長構成を取るポイントは公式 wiki サイトに記述あるのですが PaceMaker を使った構成でしんどいです。何より運用 する人が混乱する仕組みは避けたいです。
RackSpace 社の管理している Chef Cookbooks の Roles に ‘ha-controller1’, ‘ha-controller2’ というモノがあります。今回はこれを使った HA 構成の構築方法に ついて書いていこうかと思います。
構成 最小構成を作りたいと思います。HA のためのコントローラノード2台, コンピュートノー ド1台, Chef ワークショテーション1台, Chef サーバノード1台。
&#43;----------------&#43;----------------&#43;----------------&#43;----------------&#43;--------------- public network | | | eth0 | | 10.0.0.0/24 &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | controller01 | | controller01 | | compute01 | | chef server | | workstation | &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | eth1 &#43;------------------------------------------------- fixed range network 172....</p>
  </section>
  <footer class="entry-footer"><span title='2013-07-17 00:00:00 +0000 UTC'>July 17, 2013</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to OpenStack HA 構成を Chef でデプロイ" href="https://jedipunkz.github.io/post/2013/07/17/openstach-ha-chef-deploy/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Chef で OpenStack デプロイ
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
前回の記事で OpenCenter を使った OpenStack デプロイを行いましたが、デプロイの 仕組みの実体は Opscode Chef です。慣れている人であれば Chef を単独で使った方が よさそうです。僕もこの方法を今後取ろうと思っています。
幾つかの構成を試している最中ですが、今回 nova-network を使ったオールインワン構 成を作ってみたいと思います。NIC の数は1つです。ノート PC や VPS サービス上にも 構築できると思いますので試してみてください。
今回は Chef サーバの構築や Knife の環境構築に関しては割愛します。
また全ての操作は workstation ノードで行います。皆さんお手持ちの Macbook 等です。 デプロイする先は OpenStack をデプロイするサーバです。
手順 Chef Cookbook を取得 RackSpace 社のエンジニアがメンテナンスしている Chef Cookbook を使います。各 Cookbook が git submodule 化されているので –recursive オプションを付けます。
% git clone https://github.com/rcbops/chef-cookbooks.git ~/openstack-chef-repo % cd openstack-chef-repo ‘v4.0.0’ ブランチをチェックアウト master ブランチは今現在 (2013/07/08) folsom ベースの構成になっているので ‘grizzly’ のためのブランチ ‘v4....</p>
  </section>
  <footer class="entry-footer"><span title='2013-07-08 00:00:00 +0000 UTC'>July 8, 2013</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Chef で OpenStack デプロイ" href="https://jedipunkz.github.io/post/2013/07/08/chef-openstack-deploy/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>内部で Chef を使っている OpenCenter で OpenStack 構築
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
第13回 OpenStack 勉強会に参加してきました。内容の濃い収穫のある勉強会でした。 参加してよかった。特にえぐちさんの OpenCenter に関するプレゼン (下記のスライド 参照のこと) には驚きました。ちょうど当日 RackSpace のエンジニアが管理している github 上の Chef Cookbooks を使って OpenStack 構築できたぁ！と感動していたのに、 その晩のうちに Chef を使って GUI で！ OpenStack が自動構築出来るだなんて…。
えぐちさんのスライド資料はこちら。
http://www.slideshare.net/guchi_hiro/open-centeropenstack
早速、私も手元で OpenCenter 使ってみました。えぐちさん、情報ありがとうございましたー。
実は私 としては Chef 単体で OpenStack を構築したいのですが、OpenCenter がどう Cookbook や Roles, Environment を割り当てているのか知りたかったので、 OpenCenter を使って構築してみました。今回はその準備。今日は OpenCenter で皆さ んも OpenStack を構築できるようキャプチャ付きで方法を紹介しますが、次の機会に Chef 単体での OpenStack の構築方法を紹介出来ればいいなぁと思っています。
構成 &#43;---------------&#43;---------------&#43;---------------&#43;---------------&#43;-------------- public network |eth0 |eth0 |eth1 |eth1 | eth1 |10.200.10.11 |10.200.10.12 |10.200.10.13 |10.200.10.14 |10.200.10.15 &#43;-------------&#43; &#43;-------------&#43; &#43;-------------&#43; &#43;-------------&#43; &#43;-------------&#43; | opencenter | | oc-chef | |oc-controller| | oc-compute01| | oc-compute02| &#43;-------------&#43; &#43;-------------&#43; &#43;-------------&#43; &#43;-------------&#43; &#43;-------------&#43; |10....</p>
  </section>
  <footer class="entry-footer"><span title='2013-07-02 00:00:00 +0000 UTC'>July 2, 2013</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to 内部で Chef を使っている OpenCenter で OpenStack 構築" href="https://jedipunkz.github.io/post/2013/07/02/chef-opencenter-openstack/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Sensu 監視システムを Chef で制御
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
自動化の基盤を導入するために色々調べているのですが、監視も自動化しなくちゃ！と いうことで Sensu を調べてたのですが Chef との相性バッチリな感じで、自分的にイ ケてるなと思いました。
公式サイト http://www.sonian.com/cloud-monitoring-sensu/ ドキュメント http://docs.sensuapp.org/0.9/index.html 開発元が予め Chef の Cookbook (正確にはラッパー Cookbook 開発のための Cookbook で Include して使う) を用意してくれていたり、インストールを容易にする ための Omnibus 形式のパッケージの提供だったり。Omnibus なのでインストールと共 に Sensu が推奨する Ruby 一式も一緒にインストールされます。Chef と同じですね。
今回紹介したいのは、Chef で Sensu を構築・制御する方法です。
&#43;--------------&#43; &#43;--------------&#43; | chef-server | | workstation | &#43;--------------&#43; &#43;--------------&#43; | | &#43;----------------&#43; | &#43;--------------&#43; | sensu-server | &#43;--------------&#43; | &#43;----------------&#43;----------------&#43;----------------&#43; | | | | &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | sensu-client | | sensu-client | | sensu-client | | sensu-client | ....</p>
  </section>
  <footer class="entry-footer"><span title='2013-06-20 00:00:00 +0000 UTC'>June 20, 2013</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Sensu 監視システムを Chef で制御" href="https://jedipunkz.github.io/post/2013/06/20/sensu-chef-controll/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Chef を Ruby コード内で利用する
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
require ‘chef’ して Ruby コードの中で chef を利用したいと思って色々調べていた のですが、そもそもリファレンスが無くサンプルコードもごくわずかしかネット上に見 つけられない状態でした。結局ソースコードを読んで理解していく世界なわけですが、 サンプルコードが幾つかあると他の人に役立つかなぁと思い、ブログに載せていこうか なぁと。
まず Chef サーバへアクセスするためには下記の情報が必要です。
ユーザ名 ユーザ用のクライアント鍵 Chef サーバの URL これらは Chef::Config で記していきます。
では早速サンプルコードです。まずは data bags 内データの一覧を取得するコードで す。data bags 内のデータを全で取得し配列で表示します。
#!/usr/bin/env ruby require &#39;rubygems&#39; require &#39;chef/rest&#39; require &#39;chef/search/query&#39; Chef::Config[:node_name]=&#39;user01&#39; Chef::Config[:client_key]=&#39;/home/user01/user01.pem&#39; Chef::Config[:chef_server_url]=&#34;https://10.200.9.22&#34; Chef::DataBag::list.each do |bag_name, url| Chef::DataBag::load(bag_name).each do |item_name, url| item = Chef::DataBagItem.load(bag_name, item_name).to_hash puts item end end 次は data bags にデータを入力するコードです。json_data という JSON 形式のデー タを test_data という data bag に放り込んでいます。...</p>
  </section>
  <footer class="entry-footer"><span title='2013-06-12 00:00:00 +0000 UTC'>June 12, 2013</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Chef を Ruby コード内で利用する" href="https://jedipunkz.github.io/post/2013/06/12/chef-ruby-code/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://jedipunkz.github.io/categories/infrastructure/page/10/">« Prev Page</a>
    <a class="next" href="https://jedipunkz.github.io/categories/infrastructure/page/12/">Next Page »</a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://jedipunkz.github.io">jedipunkz 🚀 のブログ</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
