<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</title>
<meta name="keywords" content="">
<meta name="description" content="Posts - jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°">
<meta name="author" content="jedipunkz">
<link rel="canonical" href="https://jedipunkz.github.io/post/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5bfeb6b8384b3cb93a8602e43ebcbc5c793973d8d8488fcbc3a8d81cfead3a83.css" integrity="sha256-W/62uDhLPLk6hgLkPry8XHk5c9jYSI/Lw6jYHP6tOoM=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jedipunkz.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jedipunkz.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jedipunkz.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jedipunkz.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://jedipunkz.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://jedipunkz.github.io/post/index.xml">
<link rel="alternate" hreflang="en" href="https://jedipunkz.github.io/post/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="stylesheet" href="/css/custom.css">
<style>
 
.post-content code,
.post-content pre code,
.post-content .highlight code,
.post-content .highlighttable code {
    font-size: 1em !important;
}

 
.post-content p code,
.post-content li code,
.post-content td code {
    font-size: 1em !important;
}
</style>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-2H91XCYVZ8"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-2H91XCYVZ8');
        }
      </script><meta property="og:url" content="https://jedipunkz.github.io/post/">
  <meta property="og:site_name" content="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°">
  <meta property="og:title" content="Posts">
  <meta property="og:description" content="SREãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»Kubernetesãƒ»DevOpsã«ã¤ã„ã¦å­¦ã¶æŠ€è¡“ãƒ–ãƒ­ã‚°">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="website">
      <meta property="og:image" content="https://jedipunkz.github.io/jedipunkz.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://jedipunkz.github.io/jedipunkz.jpg">
<meta name="twitter:title" content="Posts">
<meta name="twitter:description" content="SREãƒ»ã‚¤ãƒ³ãƒ•ãƒ©ãƒ»Kubernetesãƒ»DevOpsã«ã¤ã„ã¦å­¦ã¶æŠ€è¡“ãƒ–ãƒ­ã‚°">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://jedipunkz.github.io/post/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jedipunkz.github.io/" accesskey="h" title="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚° (Alt + H)">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jedipunkz.github.io/about" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://jedipunkz.github.io/">Home</a></div>
  <h1>Posts</h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Sensu ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã‚’ Chef ã§åˆ¶å¾¡
    </h2>
  </header>
  <section class="entry-content">
    <p>ã“ã‚“ã«ã¡ã¯ã€‚@jedipunkz ã§ã™ã€‚
è‡ªå‹•åŒ–ã®åŸºç›¤ã‚’å°å…¥ã™ã‚‹ãŸã‚ã«è‰²ã€…èª¿ã¹ã¦ã„ã‚‹ã®ã§ã™ãŒã€ç›£è¦–ã‚‚è‡ªå‹•åŒ–ã—ãªãã¡ã‚ƒï¼ã¨ ã„ã†ã“ã¨ã§ Sensu ã‚’èª¿ã¹ã¦ãŸã®ã§ã™ãŒ Chef ã¨ã®ç›¸æ€§ãƒãƒƒãƒãƒªãªæ„Ÿã˜ã§ã€è‡ªåˆ†çš„ã«ã‚¤ ã‚±ã¦ã‚‹ãªã¨æ€ã„ã¾ã—ãŸã€‚
å…¬å¼ã‚µã‚¤ãƒˆ http://www.sonian.com/cloud-monitoring-sensu/ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ http://docs.sensuapp.org/0.9/index.html é–‹ç™ºå…ƒãŒäºˆã‚ Chef ã® Cookbook (æ­£ç¢ºã«ã¯ãƒ©ãƒƒãƒ‘ãƒ¼ Cookbook é–‹ç™ºã®ãŸã‚ã® Cookbook ã§ Include ã—ã¦ä½¿ã†) ã‚’ç”¨æ„ã—ã¦ãã‚Œã¦ã„ãŸã‚Šã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’å®¹æ˜“ã«ã™ã‚‹ ãŸã‚ã® Omnibus å½¢å¼ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®æä¾›ã ã£ãŸã‚Šã€‚Omnibus ãªã®ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨å…± ã« Sensu ãŒæ¨å¥¨ã™ã‚‹ Ruby ä¸€å¼ã‚‚ä¸€ç·’ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚Chef ã¨åŒã˜ã§ã™ã­ã€‚
ä»Šå›ç´¹ä»‹ã—ãŸã„ã®ã¯ã€Chef ã§ Sensu ã‚’æ§‹ç¯‰ãƒ»åˆ¶å¾¡ã™ã‚‹æ–¹æ³•ã§ã™ã€‚
&#43;--------------&#43; &#43;--------------&#43; | chef-server | | workstation | &#43;--------------&#43; &#43;--------------&#43; | | &#43;----------------&#43; | &#43;--------------&#43; | sensu-server | &#43;--------------&#43; | &#43;----------------&#43;----------------&#43;----------------&#43; | | | | &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | sensu-client | | sensu-client | | sensu-client | | sensu-client | ..&gt; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | service node | | service node | | service node | | service node | &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; ã“ã®æ§‹æˆã®å‡¦ç†ã®æµã‚Œã¨ã—ã¦ã¯â€¦
...</p>
  </section>
  
  <a class="entry-link" aria-label="post link to Sensu ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã‚’ Chef ã§åˆ¶å¾¡" href="https://jedipunkz.github.io/post/2013/06/20/sensu-chef-controll/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Chef ã‚’ Ruby ã‚³ãƒ¼ãƒ‰å†…ã§åˆ©ç”¨ã™ã‚‹
    </h2>
  </header>
  <section class="entry-content">
    <p>ã“ã‚“ã«ã¡ã¯ã€‚@jedipunkz ã§ã™ã€‚
require â€˜chefâ€™ ã—ã¦ Ruby ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ chef ã‚’åˆ©ç”¨ã—ãŸã„ã¨æ€ã£ã¦è‰²ã€…èª¿ã¹ã¦ã„ãŸ ã®ã§ã™ãŒã€ãã‚‚ãã‚‚ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ãŒç„¡ãã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚‚ã”ãã‚ãšã‹ã—ã‹ãƒãƒƒãƒˆä¸Šã«è¦‹ ã¤ã‘ã‚‰ã‚Œãªã„çŠ¶æ…‹ã§ã—ãŸã€‚çµå±€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚“ã§ç†è§£ã—ã¦ã„ãä¸–ç•Œãªã‚ã‘ã§ã™ãŒã€ ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ãŒå¹¾ã¤ã‹ã‚ã‚‹ã¨ä»–ã®äººã«å½¹ç«‹ã¤ã‹ãªãã¨æ€ã„ã€ãƒ–ãƒ­ã‚°ã«è¼‰ã›ã¦ã„ã“ã†ã‹ ãªãã¨ã€‚
ã¾ãš Chef ã‚µãƒ¼ãƒã¸ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã«ã¯ä¸‹è¨˜ã®æƒ…å ±ãŒå¿…è¦ã§ã™ã€‚
ãƒ¦ãƒ¼ã‚¶å ãƒ¦ãƒ¼ã‚¶ç”¨ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆéµ Chef ã‚µãƒ¼ãƒã® URL ã“ã‚Œã‚‰ã¯ Chef::Config ã§è¨˜ã—ã¦ã„ãã¾ã™ã€‚
ã§ã¯æ—©é€Ÿã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚ã¾ãšã¯ data bags å†…ãƒ‡ãƒ¼ã‚¿ã®ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§ ã™ã€‚data bags å†…ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã§å–å¾—ã—é…åˆ—ã§è¡¨ç¤ºã—ã¾ã™ã€‚
#!/usr/bin/env ruby require &#39;rubygems&#39; require &#39;chef/rest&#39; require &#39;chef/search/query&#39; Chef::Config[:node_name]=&#39;user01&#39; Chef::Config[:client_key]=&#39;/home/user01/user01.pem&#39; Chef::Config[:chef_server_url]=&#34;https://10.200.9.22&#34; Chef::DataBag::list.each do |bag_name, url| Chef::DataBag::load(bag_name).each do |item_name, url| item = Chef::DataBagItem.load(bag_name, item_name).to_hash puts item end end æ¬¡ã¯ data bags ã«ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚json_data ã¨ã„ã† JSON å½¢å¼ã®ãƒ‡ãƒ¼ ã‚¿ã‚’ test_data ã¨ã„ã† data bag ã«æ”¾ã‚Šè¾¼ã‚“ã§ã„ã¾ã™ã€‚
#!/usr/bin/env ruby require &#39;rubygems&#39; require &#39;chef/rest&#39; require &#39;chef/search/query&#39; Chef::Config[:node_name]=&#39;user01&#39; Chef::Config[:client_key]=&#39;/home/user01/user01.pem&#39; Chef::Config[:chef_server_url]=&#34;https://10.0.0.10&#34; json_data = { &#34;id&#34; =&gt; &#34;test&#34;, &#34;command&#34; =&gt; &#34;echo test&#34; } databag_item = Chef::DataBagItem.new databag_item.data_bag(&#39;test_data&#39;) databag_item.raw_data = proc_nginx databag_item.save æ¬¡ã¯ nodes ä¸€è¦§ã®å–å¾—ã§ã™ã€‚
...</p>
  </section>
  
  <a class="entry-link" aria-label="post link to Chef ã‚’ Ruby ã‚³ãƒ¼ãƒ‰å†…ã§åˆ©ç”¨ã™ã‚‹" href="https://jedipunkz.github.io/post/2013/06/12/chef-ruby-code/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Ceph ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ
    </h2>
  </header>
  <section class="entry-content">
    <p>ã“ã‚“ã«ã¡ã¯ã€‚@jedipunkz ã§ã™ã€‚
Ceph ã‚’é‹ç”¨ã™ã‚‹ä¸Šã§è€ƒæ…®ã—ãªã‘ã‚Œã°ã„ã‘ãªã„ã®ãŒãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®è² è·ã§ã™ã€‚ç‰¹ã« OSD åŒå£«ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆã«ã¯ç›¸å½“ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã®è² è·ãŒæ›ã‹ã‚‹ã“ã¨ãŒæƒ³ åƒå‡ºæ¥ã¾ã™ã€‚
ã“ã®ãŸã‚ MDS, MON ã®é€šä¿¡ã«å½±éŸ¿ã‚’ä¸ãˆãªã„ã‚ˆã†ã€OSD ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒãƒ¼ãƒˆãƒ“ãƒ¼ ãƒˆã®ãŸã‚ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’åˆ¥ã«è¨­ã‘ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ãªæ§‹æˆã®æ§˜ã§ã™ã€‚ã“ã®ãƒãƒƒ ãƒˆãƒ¯ãƒ¼ã‚¯ã®ã“ã¨ã‚’ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¨ Ceph çš„ã«è¨€ã†ãã†ã§ã™ã€‚
ã“ã‚“ãªæ¥ç¶šã«ãªã‚Šã¾ã™ã€‚
&#43;------&#43; |Client| &#43;------&#43; | &#43;-------&#43;-------&#43;-------&#43;-------&#43;------ public network | | | | | &#43;-----&#43; &#43;-----&#43; &#43;-----&#43; &#43;-----&#43; &#43;-----&#43; | MON | | MDS | | OSD | | OSD | | OSD | &#43;-----&#43; &#43;-----&#43; &#43;-----&#43; &#43;-----&#43; &#43;-----&#43; | | | ----------------&#43;-------&#43;-------&#43;------ cluster network ä¸Šå›³ã®æ§˜ã« MON, MDS ã¯ public ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä»‹ã— OSD ã®ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒãƒ¼ ãƒˆãƒ“ãƒ¼ãƒˆã®ã¿ cluster ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä»‹ã—ã¾ã™ã€‚Client ã¨ MDS ã¨ã®é€šä¿¡ã«å½±éŸ¿ã‚’ä¸ ãˆãªã„æ§‹æˆã«ãªã‚Šã¾ã™ã€‚
...</p>
  </section>
  
  <a class="entry-link" aria-label="post link to Ceph ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ" href="https://jedipunkz.github.io/post/2013/05/25/ceph-cluster-network/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>OpenStack &#43; Ceph é€£æº
    </h2>
  </header>
  <section class="entry-content">
    <p>ã“ã‚“ã«ã¡ã¯ã€‚æœ€è¿‘ OpenStack ã®å°å…¥ã«å‘ã‘ã¦ä¿å®ˆæ€§ã‚„å¯ç”¨æ€§ã«ã¤ã„ã¦èª¿æŸ»ã—ã¦ã„ã‚‹ @jedipunkz ã§ã™ã€‚
OpenStack ã¯ MySQL ã®ãƒ€ãƒ³ãƒ—ã‚„ OS ã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ»ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ã¨ã£ ã¦ãŠã‘ã°ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®å¾©æ—§ã‚‚å‡ºæ¥ã¾ã™ã—ã€Grizzly ç‰ˆã® Quantum ã§ã¯å†—é•·ã‚„åˆ†æ•£ãŒ å–ã‚Œã‚‹ã®ã§éšœå®³æ™‚ã«è€ãˆã‚‰ã‚Œã¾ã™ã€‚ã¾ãŸ Quantum ã®å¾©æ—§ã¯æ‰‹å‹•ã‚‚ã§å¯èƒ½ã§ã™ã€‚æœ€å¾Œã® æ‚©ã¿ã ã£ãŸ Cinder ã®æ¥ç¶šå…ˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ã™ãŒã€OpenStack ã®ã‚¹ã‚¿ãƒ³ã‚¹ã¨ã—ã¦ã¯é«˜ä¾¡ãª ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å–ã‚‹ã‹ã€Ceph, SheepDog ã®ã‚ˆã†ãªã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ ã‚¹ã‚’ä½¿ã†ã‹ã€ã§ã—ãŸã€‚ã§ã€ä»Šå›ã¯ Ceph ã‚’ OpenStack ã«é€£æºã•ã›ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸã€‚
ã“ã®ä½œæ¥­ã«ã‚ˆã‚Š Cinder ã®æ¥ç¶šå…ˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒ Ceph ã«ãªã‚‹ã®ã¨ Glance ã® OS ã‚¤ãƒ¡ãƒ¼ ã‚¸ãƒ»ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã®ä¿ç®¡å…ˆãŒ Ceph ã«ãªã‚Šã¾ã™ã€‚
ä¸‹è¨˜ã®å‚è€ƒè³‡æ–™ãŒå®Œæˆåº¦é«˜ãã€ã»ã¼å†…å®¹ã¯ãã®ã¾ã¾ã§ã™ã€‚è‹¥å¹²ä»˜ã‘è¶³ã—ã¦ã„ã¾ã™ãŒã€‚
å‚è€ƒè³‡æ–™ http://ceph.com/docs/master/rbd/rbd-openstack/
å‰æã®æ§‹æˆ &#43;-------------&#43;-------------&#43;--------------------------------------------- Public/API Network | | | &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; | | | | |vm|vm|.. | | | | | | | | controller| | network | &#43;-----------&#43; | ceph01 | | ceph01 | | ceph01 | | | | | | compute | | | | | | | | | | | | | | | | | | | &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; | | | | | | | | &#43;-------------&#43;-----)-------&#43;-----)-------&#43;-------------&#43;-------------&#43;-- Management/API Network | | &#43;-------------&#43;-----------------------------------&#43;-- Data Network Ceph ã¯ OpenStack ã® Management Network ä¸Šã«é…ç½® Ceph ã¯3å°æ§‹æˆ (ä½•å°ã§ã‚‚å¯) OpenStack ã‚‚3å°æ§‹æˆ (ä½•å°ã§ã‚‚å¯) é€£æºå‡¦ç†ã™ã‚‹ã®ã¯ controller, compute ãƒãƒ¼ãƒ‰ ã§ã¯æ—©é€Ÿæ‰‹é †ã§ã™ãŒã€OpenStack ã¨ Ceph ã®æ§‹ç¯‰æ‰‹é †ã¯å‰²æ„›ã—ã¾ã™ã€‚ç§ã®ä»–ã®è¨˜äº‹ã‚’å‚ è€ƒã«ã—ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚
...</p>
  </section>
  
  <a class="entry-link" aria-label="post link to OpenStack &#43; Ceph é€£æº" href="https://jedipunkz.github.io/post/2013/05/19/openstack-ceph/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Chef Cookbook ã§ãƒ¦ãƒ¼ã‚¶ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ 
    </h2>
  </header>
  <section class="entry-content">
    <p>ã“ã‚“ã«ã¡ã¯ã€‚@jedipunkz ã§ã™ã€‚ ä»Šå›ã¯ Opscode Chef ã§ãƒ¦ãƒ¼ã‚¶ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’ã¾ã¨ã‚ã¾ã™ã€‚
â€˜usersâ€™ Cookbook ã‚’ä½¿ã„ã¾ã™ã€‚
% cd ${YOUR_CHEF_REPO} % ${EDITOR} Berksfile cookbook &#39;users&#39; % berks install --path ./cookbooks data_bag ã‚’ä½¿ã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ã®ç®¡ç†ã‚’ã—ãŸã„ã®ã§ç®¡ç†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã¾ ã™ã€‚
% mkdir -p data_bags/users data_bags/users/jedipunkz.json ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚å¿…è¦ã«å¿œã˜ã¦å†…å®¹ã‚’æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚
{ &#34;id&#34;: &#34;jedipunkz&#34;, &#34;ssh_keys&#34;: &#34;ssh-rsa AAAABx92tstses jedipunkz@somewhere&#34;, &#34;groups&#34;: [ &#34;sysadmin&#34;, &#34;sudo&#34; ], &#34;uid&#34;: 2001, &#34;shell&#34;: &#34;\/usr\/bin\/zsh&#34;, &#34;comment&#34;: &#34;jedipunkz sysadmin&#34;, &#34;password&#34;: &#34;$1$s%H8BMHlB$7s3h30y9IB1SklftZXYhvssJ&#34; } json ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜ã§ã™ã€‚
id : ãƒ¦ãƒ¼ã‚¶å ssh_keys : SSH å…¬é–‹éµ groups : æ‰€å±ã•ã›ã‚‹ã‚°ãƒ«ãƒ¼ãƒ— uid : unix id sheell : ãƒ­ã‚°ã‚¤ãƒ³ã‚·ã‚§ãƒ« comment : ã‚³ãƒ¡ãƒ³ãƒˆ passwd : ãƒãƒƒã‚·ãƒ¥åŒ–ã—ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ ç‰¹ã«ãƒãƒƒã‚·ãƒ¥åŒ–ã—ãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ç”Ÿæˆå‡ºæ¥ã¾ã™ã€‚
...</p>
  </section>
  
  <a class="entry-link" aria-label="post link to Chef Cookbook ã§ãƒ¦ãƒ¼ã‚¶ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—è¿½åŠ " href="https://jedipunkz.github.io/post/2013/05/18/chef-cookbook-adding-users/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Ceph-Deploy ã§ Ceph åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ§‹ç¯‰
    </h2>
  </header>
  <section class="entry-content">
    <p>ä»Šå›ã¯ ceph-deploy ã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ Ceph ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç°¡å˜ã«æ§‹ç¯‰ã™ã‚‹ã“ã¨ãŒ å‡ºæ¥ã‚‹ã®ã§ç´¹ä»‹ã—ã¾ã™ã€‚Ceph ã¯åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦ã‚‚ãƒ– ãƒ­ãƒƒã‚¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦ã‚‚å‹•ä½œã—ã¾ã™ã€‚ä»Šå›ã®æ§‹ç¯‰ã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã—ã¦ã®ã¿ ã®å‹•ä½œã§ã™ã€‚
Ceph ãŒå…¬é–‹ã—ã¦ã„ã‚‹ã®ãŒ ceph-deploy ãªã‚ã‘ã§ã™ãŒã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«æ“ä½œã«ä»£ã‚ã‚‹æ§‹ç¯‰æ–¹ æ³•ã¨ã—ã¦å…¬é–‹ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚ãã®ä»–ã«ã‚‚ Chef Cookbook ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ ã™ã€‚
ãã‚Œã§ã¯æ—©é€Ÿã€‚
ä»Šå›ã®æ§‹æˆ &#43;--------&#43; &#43;--------&#43; &#43;--------&#43; | ceph01 | | ceph02 | | ceph03 | | osd | | osd | | osd | | mon | | mon | | mon | | mds | | mds | | mds | &#43;--------&#43; &#43;--------&#43; &#43;--------&#43; | 10.0.0.1 | 10.0.0.2 | 10.0.0.3 | | | &#43;----------&#43;----------&#43; | | 10.0.0.10 &#43;-------------&#43; | workstation | &#43;-------------&#43; ç‰¹å¾´ã¯
...</p>
  </section>
  
  <a class="entry-link" aria-label="post link to Ceph-Deploy ã§ Ceph åˆ†æ•£ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ§‹ç¯‰" href="https://jedipunkz.github.io/post/2013/05/11/ceph-deploy/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Quantum Network ãƒãƒ¼ãƒ‰ã®åˆ†æ•£ãƒ»å†—é•·
    </h2>
  </header>
  <section class="entry-content">
    <p>ã“ã‚“ã«ã¡ã¯ã€‚Grizzly ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã‹ã‚‰æš«ãçµŒã¡ã¾ã—ãŸã€‚ä»Šå›ã¯ Folsom ãƒªãƒªãƒ¼ã‚¹ ã¾ã§ã‚ã£ãŸ Quantum ãƒãƒ¼ãƒ‰ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¨å˜ä¸€éšœå®³ç‚¹ã‚’è§£æ±ºã™ã‚‹æ–°ã—ã„æ©Ÿèƒ½ã«ã¤ã„ ã¦è©•ä¾¡ã—ãŸçµæœã‚’ãŠä¼ãˆã—ã¾ã™ã€‚
Folsom ã¾ã§ã¯
Quantum L3-agent ãŒè½ã¡ã‚‹ã¨ã€ãã® OpenStack ä¸€å¼ã®ä¸Šã«ã‚ã‚‹ä»®æƒ³ãƒã‚·ãƒ³å…¨ã¦ã®é€š ä¿¡ãŒé€”çµ¶ãˆã‚‹ Quantum L3-agent ã«ä»®æƒ³ãƒã‚·ãƒ³ã®å…¨ã¦ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ãŒé›†ã¾ã‚Šãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã¨ãªã‚‹ã€‚ ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚Folsom ãƒªãƒªãƒ¼ã‚¹æ™‚ä»£ã«ã‚‚ã—åƒ•ãŒè·å ´ã§ OpenStack ã‚’å°å…¥ã™ ã‚‹ã®ã§ã‚ã‚Œã°ã“ã‚Œã‚‰ã‚’ç†ç”±ã« nova-network ã‚’é¸æŠã—ã¦ã„ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ nova-network ã¯ compute ãƒãƒ¼ãƒ‰ãŒè½ã¡ã‚Œã°ãã®ä¸Šã®ä»®æƒ³ãƒã‚·ãƒ³ã‚‚åŒæ™‚ã«è½ã¡ã‚‹ãŒã€ä»– ã® compute ãƒãƒ¼ãƒ‰ä¸Šã®ä»®æƒ³ãƒã‚·ãƒ³ã®é€šä¿¡ã«ã¯å½±éŸ¿ã‚’ä¸ãˆãªã„ã‹ã‚‰ã§ã™ã€‚ã‚‚ã¡ã‚ã‚“ä»®æƒ³ ãƒ«ãƒ¼ã‚¿ãƒ»ä»®æƒ³ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®ç”Ÿæˆç­‰ã‚’ API ã§ãƒ¦ãƒ¼ã‚¶ã«æä¾›ã—ãŸã„ãªã©ã®è¦æœ›ãŒã‚ã‚Œã° Quantum ã‚’é¸æŠã™ã‚‹ã—ã‹ã‚ã‚Šã¾ã›ã‚“ãŒã€‚ã“ã‚Œã«å¯¾ã—ã¦ Grizzly ãƒªãƒªãƒ¼ã‚¹ã® Quantum ã¯ æ”¹å–„ã«å‘ã‘ã¦å¤§ããªæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã¦ã„ã¾ã™ã€‚L3-agent, DHCP-agent ã®åˆ†æ•£ãƒ»å†— é•·æ©Ÿèƒ½ã§ã™ã€‚
ä¸‹è¨˜ã®æ§‹æˆãŒæƒ³å®šå‡ºæ¥ã¾ã™ã€‚ã“ã“ã§ã¯ Network ãƒãƒ¼ãƒ‰ã‚’2å°ç”¨æ„ã—ã¾ã—ãŸã€‚ãã‚Œä»¥ä¸Šã® å°æ•°ã«å¢—ã‚„ã™ã“ã¨ã‚‚å‡ºæ¥ã¾ã™ã€‚
&#43;-------------&#43;-------------&#43;-------------------------- Public/API Network | | | &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; | | | | | | |vm|vm|.. | | controller| | network | | network | &#43;-----------&#43; | | | | | | | compute | &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; &#43;-----------&#43; | | | | | | | &#43;-------------&#43;-----)-------&#43;-----)-------&#43;-----)------ Management/API Network | | | &#43;-------------&#43;-------------&#43;------ Data Network L3-agent ã®åˆ†æ•£ã¯ä»®æƒ³ãƒ«ãƒ¼ã‚¿å˜ä½ã§è¡Œã„ã¾ã™ã€‚ãã‚Œã«å¯¾ã— DHCP-agent ã¯ä»®æƒ³ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å˜ä½ã§è¡Œã„ã¾ã™ã€‚
...</p>
  </section>
  
  <a class="entry-link" aria-label="post link to Quantum Network ãƒãƒ¼ãƒ‰ã®åˆ†æ•£ãƒ»å†—é•·" href="https://jedipunkz.github.io/post/2013/04/26/quantum-network-distributing/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Chef for OpenStack
    </h2>
  </header>
  <section class="entry-content">
    <p>ä»¥å‰ã«ã‚‚è©±é¡Œã«ã—ãŸã“ã¨ãŒã‚ã‚‹ Chef For OpenStack ã§ã™ãŒä»Šé€±æ–°ã—ã„æƒ…å ±ãŒå…¥ã£ã¦æ¥ ã¾ã—ãŸã€‚#ChefConf 2013 ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã£ãŸã®ã§ã™ãŒã“ã“ã§ Opscode ã® Matt Ray ã•ã‚“ã‚‰ãŒé›†ã¾ã‚Š OpenStack ã‚’ Chef ã§æ§‹ç¯‰ã™ã‚‹ â€˜Chef for OpenStackâ€™ ã«ã¤ã„ã¦ èªã‚‰ã‚ŒãŸæ¨¡æ§˜ã§ã™ã€‚ãã®æ™‚ã®è³‡æ–™ãŒ SlideShare ã«ä¸ŠãŒã£ã¦ã„ãŸã®ã§è¦‹ã¦ã¿ã¾ã—ãŸã€‚
Chef for OpenStack: Grizzly Roadmap from Matt Ray æ°—ã«ã‚ã£ãŸç‚¹ã‚’å¹¾ã¤ã‹æŒ™ã’ã¦ã„ãã¾ã™ã€‚
https://github.com/osops ã§ç®¡ç†ã•ã‚Œã‚‹ å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® cookbook ã®åå‰ã«ã¯ â€˜-cookbookâ€™ ã‚’æœ€å¾Œã«ä»˜ã‘ã‚‹ quantum, cinder, ceilometer, heat ç­‰ã€æ¯”è¼ƒçš„æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚åŠ ã‚ã‚‹ gerrit ã§ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã•ã‚Œ CI ã‚‚æä¾›ã•ã‚Œã‚‹ Chef11 ãŒç”¨ã„ã‚‰ã‚Œã‚‹ Ruby 1.9.x ã«å¯¾å¿œã—ãŸ chef-client ãŒç”¨ã„ã‚‰ã‚Œã‚‹ Foodcritic ã§å¯èƒ½ãªé™ã‚Šãƒ†ã‚¹ãƒˆã•ã‚Œã‚‹ chef-solo ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œãªã„ 5æœˆã« â€˜2013.1.0â€™ ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ (openstack 2013.1 å¯¾å¿œã¨æ€ã‚ã‚Œã‚‹) chef-repo ã®å½¢ã§æä¾›ã•ã‚Œã‚‹ Ubuntu 12.04 ãŒå‰æ HyperVisor ã¯ KVM, LXC ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ ä»¥ä¸Šã§ã™ã€‚æã‚‰ã chef-repo ã§æä¾›ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã¯ spiceweasel ã‚’ä½¿ã£ãŸæ§‹æˆæ§‹ ç¯‰ãŒå‡ºæ¥ã‚‹ã‚ˆã†ãªå½¢ã«ãªã‚‹ã§ã—ã‚‡ã†ã€‚æ¥½ã—ã¿ã§ã™ã€‚ã¾ãŸã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã™ã‚‹æ–¹æ³•ã‚‚æ² è¼‰ã•ã‚Œã¦ã„ã‚‹ã®ã§èˆˆå‘³ãŒæœ‰ã‚‹æ–¹ã¯å”åŠ›ã—ã¦ã¿ã‚‹ã®ã‚‚æ¥½ã—ã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
</p>
  </section>
  
  <a class="entry-link" aria-label="post link to Chef for OpenStack" href="https://jedipunkz.github.io/post/2013/04/21/chef-for-openstack-grizzly-roadmap/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://jedipunkz.github.io/post/page/12/">Â« Prev</a>
    <a class="next" href="https://jedipunkz.github.io/post/page/14/">Next Â»</a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://jedipunkz.github.io/">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
