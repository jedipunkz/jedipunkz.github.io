<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&amp;ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ | jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</title>
<meta name="keywords" content="">
<meta name="description" content="@jedipunkz ã§ã™ã€‚ä»Šã¾ã§è‡ªå®…ã§ã¯ PPPoE æ¥ç¶šã‚’ã—ã¦ Global IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã¦è‡ªå®…ã«ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨å…¬é–‹ã—ãã®æ¥ç¶šã‚’ä½¿ã£ã¦å„ç«¯æœ«ã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ã€IPoE æ¥ç¶šã™ã‚‹ã¨æ··é›‘æ™‚é–“ã‚’å›é¿å‡ºæ¥ã‚‹ã¨èã„ã¦ã„ãŸã®ã§ (ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¡“ã—ã¾ã™)ã€æ™®æ®µã®ã‚²ãƒ¼ãƒ ã‚„å„ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯ IPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã¯ PPPoE ã§å…¬é–‹ã€ã¨å‡ºæ¥ãªã„ã‹ã¨è€ƒãˆã¾ã—ãŸã€‚IPoE ã¯ IPv4 over IPv6 ã®ãƒˆãƒ³ãƒãƒªãƒ³ã‚°æ¥ç¶šã™ã‚‹ãŸãŸã‚ IPoE ã ã‘ã§ã¯ IPv4 Global IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ã¯ä¸å¯èƒ½ã ã‹ã‚‰ã§ã™ã€‚
ã“ã“ã§ã¯ VyOS ã‚’ä½¿ã£ã¦ãã®ä¸¡è€…ã‚’æº€ãŸã™æ¥ç¶šã®è¨­å®šæ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚
è¦ä»¶

PPPoE ã—ã¦ Global IPv4 ã‚’å–å¾—ã—ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨ã«æä¾›
(ãã®éš›ã« Dynamic DNS ã‚’åˆ©ç”¨ (è‡ªå®…ã¯ Cloudflare))
ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã®ç«¯æœ«ã®ãƒˆãƒ©ãƒ’ãƒƒã‚¯ã¯ IPoE æ¥ç¶šã—ãŸçµŒè·¯ã«æµã™
å›ç·šã¯NTT ãƒ•ãƒ¬ãƒƒãƒ„æƒ³å®š (è‡ªåˆ†ã®å ´åˆã¯ Asahi-net, IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š, ãã®ä»–ã§ã‚‚å¯)

ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
VyOS ã¯ Stable ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ‰å„Ÿãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãªã„ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡ºæ¥ã¾ã›ã‚“ãŒãƒ“ãƒ«ãƒ‰ã™ã‚Œã° ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä½œã‚Œã¾ã™ã€‚ãã®æ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚

2023/12 æ™‚ç‚¹ã§æœ€æ–°ã® Stable ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3.4 ã‚’æŒ‡å®š
é©å½“ãª Linux ç«¯æœ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¾ã—ãŸãŒ Docker ã‚’åˆ©ç”¨ã§ãã‚Œã°ã©ã“ã§ã‚‚è‰¯ã•ãã†

git clone -b equuleus https://github.com/vyos/vyos-build
cd vyos-build/
docker run --rm -it --privileged -v $(pwd):/vyos -w /vyos vyos/vyos-build:equuleus bash
./configure --architecture amd64 --build-type release --version 1.3.4
sudo make iso
ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ build/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã« iso ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="http://localhost:1313/post/vyos-ipoe-pppoe/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5bfeb6b8384b3cb93a8602e43ebcbc5c793973d8d8488fcbc3a8d81cfead3a83.css" integrity="sha256-W/62uDhLPLk6hgLkPry8XHk5c9jYSI/Lw6jYHP6tOoM=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/post/vyos-ipoe-pppoe/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="stylesheet" href="/css/custom.css">
<style>
 
.post-content code,
.post-content pre code,
.post-content .highlight code,
.post-content .highlighttable code {
    font-size: 1em !important;
}

 
.post-content p code,
.post-content li code,
.post-content td code {
    font-size: 1em !important;
}
</style>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-2H91XCYVZ8"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-2H91XCYVZ8');
        }
      </script><meta property="og:url" content="http://localhost:1313/post/vyos-ipoe-pppoe/">
  <meta property="og:site_name" content="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°">
  <meta property="og:title" content="VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹">
  <meta property="og:description" content="@jedipunkz ã§ã™ã€‚ä»Šã¾ã§è‡ªå®…ã§ã¯ PPPoE æ¥ç¶šã‚’ã—ã¦ Global IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã¦è‡ªå®…ã«ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨å…¬é–‹ã—ãã®æ¥ç¶šã‚’ä½¿ã£ã¦å„ç«¯æœ«ã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ã€IPoE æ¥ç¶šã™ã‚‹ã¨æ··é›‘æ™‚é–“ã‚’å›é¿å‡ºæ¥ã‚‹ã¨èã„ã¦ã„ãŸã®ã§ (ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¡“ã—ã¾ã™)ã€æ™®æ®µã®ã‚²ãƒ¼ãƒ ã‚„å„ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯ IPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã¯ PPPoE ã§å…¬é–‹ã€ã¨å‡ºæ¥ãªã„ã‹ã¨è€ƒãˆã¾ã—ãŸã€‚IPoE ã¯ IPv4 over IPv6 ã®ãƒˆãƒ³ãƒãƒªãƒ³ã‚°æ¥ç¶šã™ã‚‹ãŸãŸã‚ IPoE ã ã‘ã§ã¯ IPv4 Global IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ã¯ä¸å¯èƒ½ã ã‹ã‚‰ã§ã™ã€‚
ã“ã“ã§ã¯ VyOS ã‚’ä½¿ã£ã¦ãã®ä¸¡è€…ã‚’æº€ãŸã™æ¥ç¶šã®è¨­å®šæ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚
è¦ä»¶ PPPoE ã—ã¦ Global IPv4 ã‚’å–å¾—ã—ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨ã«æä¾› (ãã®éš›ã« Dynamic DNS ã‚’åˆ©ç”¨ (è‡ªå®…ã¯ Cloudflare)) ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã®ç«¯æœ«ã®ãƒˆãƒ©ãƒ’ãƒƒã‚¯ã¯ IPoE æ¥ç¶šã—ãŸçµŒè·¯ã«æµã™ å›ç·šã¯NTT ãƒ•ãƒ¬ãƒƒãƒ„æƒ³å®š (è‡ªåˆ†ã®å ´åˆã¯ Asahi-net, IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š, ãã®ä»–ã§ã‚‚å¯) ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ VyOS ã¯ Stable ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ‰å„Ÿãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãªã„ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡ºæ¥ã¾ã›ã‚“ãŒãƒ“ãƒ«ãƒ‰ã™ã‚Œã° ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä½œã‚Œã¾ã™ã€‚ãã®æ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚
2023/12 æ™‚ç‚¹ã§æœ€æ–°ã® Stable ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3.4 ã‚’æŒ‡å®š é©å½“ãª Linux ç«¯æœ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¾ã—ãŸãŒ Docker ã‚’åˆ©ç”¨ã§ãã‚Œã°ã©ã“ã§ã‚‚è‰¯ã•ãã† git clone -b equuleus https://github.com/vyos/vyos-build cd vyos-build/ docker run --rm -it --privileged -v $(pwd):/vyos -w /vyos vyos/vyos-build:equuleus bash ./configure --architecture amd64 --build-type release --version 1.3.4 sudo make iso ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ build/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã« iso ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2023-12-10T01:14:57+09:00">
    <meta property="article:modified_time" content="2023-12-10T01:14:57+09:00">
      <meta property="og:image" content="http://localhost:1313/jedipunkz.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/jedipunkz.jpg">
<meta name="twitter:title" content="VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&amp;ã‚µãƒ¼ãƒãƒ¼å…¬é–‹">
<meta name="twitter:description" content="@jedipunkz ã§ã™ã€‚ä»Šã¾ã§è‡ªå®…ã§ã¯ PPPoE æ¥ç¶šã‚’ã—ã¦ Global IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã¦è‡ªå®…ã«ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨å…¬é–‹ã—ãã®æ¥ç¶šã‚’ä½¿ã£ã¦å„ç«¯æœ«ã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ã€IPoE æ¥ç¶šã™ã‚‹ã¨æ··é›‘æ™‚é–“ã‚’å›é¿å‡ºæ¥ã‚‹ã¨èã„ã¦ã„ãŸã®ã§ (ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¡“ã—ã¾ã™)ã€æ™®æ®µã®ã‚²ãƒ¼ãƒ ã‚„å„ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯ IPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã¯ PPPoE ã§å…¬é–‹ã€ã¨å‡ºæ¥ãªã„ã‹ã¨è€ƒãˆã¾ã—ãŸã€‚IPoE ã¯ IPv4 over IPv6 ã®ãƒˆãƒ³ãƒãƒªãƒ³ã‚°æ¥ç¶šã™ã‚‹ãŸãŸã‚ IPoE ã ã‘ã§ã¯ IPv4 Global IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ã¯ä¸å¯èƒ½ã ã‹ã‚‰ã§ã™ã€‚
ã“ã“ã§ã¯ VyOS ã‚’ä½¿ã£ã¦ãã®ä¸¡è€…ã‚’æº€ãŸã™æ¥ç¶šã®è¨­å®šæ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚
è¦ä»¶

PPPoE ã—ã¦ Global IPv4 ã‚’å–å¾—ã—ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨ã«æä¾›
(ãã®éš›ã« Dynamic DNS ã‚’åˆ©ç”¨ (è‡ªå®…ã¯ Cloudflare))
ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã®ç«¯æœ«ã®ãƒˆãƒ©ãƒ’ãƒƒã‚¯ã¯ IPoE æ¥ç¶šã—ãŸçµŒè·¯ã«æµã™
å›ç·šã¯NTT ãƒ•ãƒ¬ãƒƒãƒ„æƒ³å®š (è‡ªåˆ†ã®å ´åˆã¯ Asahi-net, IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š, ãã®ä»–ã§ã‚‚å¯)

ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰
VyOS ã¯ Stable ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ‰å„Ÿãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãªã„ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡ºæ¥ã¾ã›ã‚“ãŒãƒ“ãƒ«ãƒ‰ã™ã‚Œã° ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä½œã‚Œã¾ã™ã€‚ãã®æ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚

2023/12 æ™‚ç‚¹ã§æœ€æ–°ã® Stable ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3.4 ã‚’æŒ‡å®š
é©å½“ãª Linux ç«¯æœ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¾ã—ãŸãŒ Docker ã‚’åˆ©ç”¨ã§ãã‚Œã°ã©ã“ã§ã‚‚è‰¯ã•ãã†

git clone -b equuleus https://github.com/vyos/vyos-build
cd vyos-build/
docker run --rm -it --privileged -v $(pwd):/vyos -w /vyos vyos/vyos-build:equuleus bash
./configure --architecture amd64 --build-type release --version 1.3.4
sudo make iso
ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ build/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã« iso ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://localhost:1313/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š\u0026ã‚µãƒ¼ãƒãƒ¼å…¬é–‹",
      "item": "http://localhost:1313/post/vyos-ipoe-pppoe/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š\u0026ã‚µãƒ¼ãƒãƒ¼å…¬é–‹",
  "name": "VyOS ã§ IPoE\/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š\u0026ã‚µãƒ¼ãƒãƒ¼å…¬é–‹",
  "description": "@jedipunkz ã§ã™ã€‚ä»Šã¾ã§è‡ªå®…ã§ã¯ PPPoE æ¥ç¶šã‚’ã—ã¦ Global IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã¦è‡ªå®…ã«ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨å…¬é–‹ã—ãã®æ¥ç¶šã‚’ä½¿ã£ã¦å„ç«¯æœ«ã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ã€IPoE æ¥ç¶šã™ã‚‹ã¨æ··é›‘æ™‚é–“ã‚’å›é¿å‡ºæ¥ã‚‹ã¨èã„ã¦ã„ãŸã®ã§ (ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¡“ã—ã¾ã™)ã€æ™®æ®µã®ã‚²ãƒ¼ãƒ ã‚„å„ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯ IPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã¯ PPPoE ã§å…¬é–‹ã€ã¨å‡ºæ¥ãªã„ã‹ã¨è€ƒãˆã¾ã—ãŸã€‚IPoE ã¯ IPv4 over IPv6 ã®ãƒˆãƒ³ãƒãƒªãƒ³ã‚°æ¥ç¶šã™ã‚‹ãŸãŸã‚ IPoE ã ã‘ã§ã¯ IPv4 Global IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ã¯ä¸å¯èƒ½ã ã‹ã‚‰ã§ã™ã€‚\nã“ã“ã§ã¯ VyOS ã‚’ä½¿ã£ã¦ãã®ä¸¡è€…ã‚’æº€ãŸã™æ¥ç¶šã®è¨­å®šæ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚\nè¦ä»¶ PPPoE ã—ã¦ Global IPv4 ã‚’å–å¾—ã—ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨ã«æä¾› (ãã®éš›ã« Dynamic DNS ã‚’åˆ©ç”¨ (è‡ªå®…ã¯ Cloudflare)) ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã®ç«¯æœ«ã®ãƒˆãƒ©ãƒ’ãƒƒã‚¯ã¯ IPoE æ¥ç¶šã—ãŸçµŒè·¯ã«æµã™ å›ç·šã¯NTT ãƒ•ãƒ¬ãƒƒãƒ„æƒ³å®š (è‡ªåˆ†ã®å ´åˆã¯ Asahi-net, IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š, ãã®ä»–ã§ã‚‚å¯) ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ VyOS ã¯ Stable ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ‰å„Ÿãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãªã„ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡ºæ¥ã¾ã›ã‚“ãŒãƒ“ãƒ«ãƒ‰ã™ã‚Œã° ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä½œã‚Œã¾ã™ã€‚ãã®æ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚\n2023/12 æ™‚ç‚¹ã§æœ€æ–°ã® Stable ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3.4 ã‚’æŒ‡å®š é©å½“ãª Linux ç«¯æœ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¾ã—ãŸãŒ Docker ã‚’åˆ©ç”¨ã§ãã‚Œã°ã©ã“ã§ã‚‚è‰¯ã•ãã† git clone -b equuleus https://github.com/vyos/vyos-build cd vyos-build/ docker run --rm -it --privileged -v $(pwd):/vyos -w /vyos vyos/vyos-build:equuleus bash ./configure --architecture amd64 --build-type release --version 1.3.4 sudo make iso ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ build/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã« iso ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚\n",
  "keywords": [
    
  ],
  "articleBody": "@jedipunkz ã§ã™ã€‚ä»Šã¾ã§è‡ªå®…ã§ã¯ PPPoE æ¥ç¶šã‚’ã—ã¦ Global IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã¦è‡ªå®…ã«ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨å…¬é–‹ã—ãã®æ¥ç¶šã‚’ä½¿ã£ã¦å„ç«¯æœ«ã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ã€IPoE æ¥ç¶šã™ã‚‹ã¨æ··é›‘æ™‚é–“ã‚’å›é¿å‡ºæ¥ã‚‹ã¨èã„ã¦ã„ãŸã®ã§ (ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¡“ã—ã¾ã™)ã€æ™®æ®µã®ã‚²ãƒ¼ãƒ ã‚„å„ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯ IPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã¯ PPPoE ã§å…¬é–‹ã€ã¨å‡ºæ¥ãªã„ã‹ã¨è€ƒãˆã¾ã—ãŸã€‚IPoE ã¯ IPv4 over IPv6 ã®ãƒˆãƒ³ãƒãƒªãƒ³ã‚°æ¥ç¶šã™ã‚‹ãŸãŸã‚ IPoE ã ã‘ã§ã¯ IPv4 Global IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ã¯ä¸å¯èƒ½ã ã‹ã‚‰ã§ã™ã€‚\nã“ã“ã§ã¯ VyOS ã‚’ä½¿ã£ã¦ãã®ä¸¡è€…ã‚’æº€ãŸã™æ¥ç¶šã®è¨­å®šæ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚\nè¦ä»¶ PPPoE ã—ã¦ Global IPv4 ã‚’å–å¾—ã—ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨ã«æä¾› (ãã®éš›ã« Dynamic DNS ã‚’åˆ©ç”¨ (è‡ªå®…ã¯ Cloudflare)) ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã®ç«¯æœ«ã®ãƒˆãƒ©ãƒ’ãƒƒã‚¯ã¯ IPoE æ¥ç¶šã—ãŸçµŒè·¯ã«æµã™ å›ç·šã¯NTT ãƒ•ãƒ¬ãƒƒãƒ„æƒ³å®š (è‡ªåˆ†ã®å ´åˆã¯ Asahi-net, IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š, ãã®ä»–ã§ã‚‚å¯) ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ VyOS ã¯ Stable ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ‰å„Ÿãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãªã„ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡ºæ¥ã¾ã›ã‚“ãŒãƒ“ãƒ«ãƒ‰ã™ã‚Œã° ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä½œã‚Œã¾ã™ã€‚ãã®æ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚\n2023/12 æ™‚ç‚¹ã§æœ€æ–°ã® Stable ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3.4 ã‚’æŒ‡å®š é©å½“ãª Linux ç«¯æœ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¾ã—ãŸãŒ Docker ã‚’åˆ©ç”¨ã§ãã‚Œã°ã©ã“ã§ã‚‚è‰¯ã•ãã† git clone -b equuleus https://github.com/vyos/vyos-build cd vyos-build/ docker run --rm -it --privileged -v $(pwd):/vyos -w /vyos vyos/vyos-build:equuleus bash ./configure --architecture amd64 --build-type release --version 1.3.4 sudo make iso ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ build/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã« iso ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚\næ§‹æˆ ä¸‹è¨˜ã®ã‚ˆã†ã« VyOS ãƒã‚·ãƒ³ã«ã¯ NIC ãŒ2ã¤ä»¥ä¸Šã‚ã‚Œã°è¦ä»¶æº€ãŸã›ã¾ã™ã€‚ 10.0.1.254/32 10.0.1.100/32 +--------------+ IPoE +-----------------------+------+ +---------------+ | the internet | -+---- | eth0(IPv6) \u003c- Tunnel -| | --- | IPv4 server | +--------------+ | +-----------------------| eth1 + +---------------+ +---- | eth0(IPv4) \u003c- NAT - | | -+ PPPoE +-----------------------+------+ | +---------------+ | VyOS Router | +- | Other Clients | +------------------------------+ +---------------+ 10.0.1.0/24 æ‰‹é † eth1 ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š set interface ethernet eth1 address 10.0.1.254 IPoE æ¥ç¶š eth0 å´ã§ IPv6 ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚\nset interface ethernet eth0 address dhcpv6 set interface ethernet eth0 dhcpv6-options parameters-only set interface ethernet eth0 ipv6 address autoconf set interface ethernet eth0 ipv6 disable-forwarding commit ã“ã®æ™‚ç‚¹ã§æ•°åˆ†å¾…ã¤ã¨ IPv6 ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå–å¾—ã§ãã¾ã™ã€‚\nrun show int Codes: S - State, L - Link, u - Up, D - Down, A - Admin Down Interface IP Address S/L Description --------- ---------- --- ----------- eth0 2405:xx:xx:xx:xx:xx:xx:xxx/64 è‡ªå®…ã®å ´åˆã¯ Asahi-net ã¨ã„ã†ãƒ—ãƒ­ãƒã‚¤ãƒ€ã§ã™ã€‚v6 connect ã¨ã„ã† IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã®ã§ã™ãŒã€çµ‚ç«¯ã®æƒ…å ±ã¯å…¬é–‹ã—ã¦ã„ãªã„ã¨ã‚µãƒãƒ¼ãƒˆã‹ã‚‰èãã¾ã—ãŸã€‚ã‚ˆã£ã¦ã“ã“ã«ã‚‚ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨˜ã™ã®ã¯å•é¡Œã ã¨æ€ã†ã®ã§è¨˜ã—ã¾ã›ã‚“ã€‚ãŸã å‚è€ƒè³‡æ–™ã ã‘æ²è¼‰ã—ã¦ãŠãã¾ã™ã€‚\nhttps://scrapbox.io/for2ando/Asahi%E3%83%8D%E3%83%83%E3%83%88DS-Lite%E3%81%AEAFTR%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8bash https://gist.github.com/stkchp/4daea9158439c32d7a70a255d51e568b ã¾ãŸ DS-Lite ã§ transix ã®å ´åˆã¯ dig @2404:1a8:7f01:b::3 gw.transix.jp aaaa +short ã§å¼•ã‘ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒãã‚Œã«ãªã‚‹ãã†ã§ã™ã€‚\nset interfaces tunnel tun0 encapsulation ipip6 set interfaces tunnel tun0 multicast disable set interfaces tunnel tun0 remote 2001:xxx:x:xxx:xx #æ¥ç¶šå…ˆçµ‚ç«¯ set interfaces tunnel tun0 source-address 2405:xx:xx:xx:xx:xx:xx:xxx/64 #ä¸Šè¨˜æ‰‹é †ã§å–å¾— set protocols static interface-route 0.0.0.0/0 next-hop-interface tun0 commit ã“ã®æ™‚ç‚¹ã§ IPv6 ã§ã‚‚ IPv4 (IPv4 over IPv6) ã§ã‚‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã§ãã‚‹ã¯ãšã§ã™ã€‚\nIPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãŸå®…å†…ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š eth1 å´ã«æ¥ç¶šã—ãŸå„ç«¯æœ«ãŒ IPv4 ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã§ãã‚‹ã‚ˆã† NAT ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚\nset nat source rule 100 description 'LAN Source NAT' set nat source rule 100 outbound-interface tun0 set nat source rule 100 source address 10.0.1.0/24 set nat source rule 100 translation address masquerade commit å®…å†…ã®å„ç«¯æœ«ã« IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ DHCP ã§é…å¸ƒ show service dhcp-server shared-network-name HOME-DHCP name-server 8.8.8.8 show service dhcp-server shared-network-name HOME-DHCP name-server 8.8.4.4 show service dhcp-server shared-network-name HOME-DHCP subnet 10.0.1.0/24 default-router 10.0.1.254 show service dhcp-server shared-network-name HOME-DHCP subnet 10.0.1.0/24 range dhcp1-subnet start 10.0.1.100 show service dhcp-server shared-network-name HOME-DHCP subnet 10.0.1.0/24 range dhcp1-subnet end 10.0.1.190 ã“ã®æ™‚ç‚¹ã§å®…å†…ã®å„ç«¯æœ«ãŒ IPv4 ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šå‡ºæ¥ã¾ã™ã€‚\nãƒ«ãƒ¼ã‚¿å†èµ·å‹•æ™‚ã®å¯¾å¿œ DHCPv6 ã§å–å¾—ã—ãŸ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å›ºå®šã§ã¯ãªã„ã®ã§ã€ãƒ«ãƒ¼ã‚¿ã®å†èµ·å‹•æ™‚ã«ä¸æ•´åˆãŒç½®ãã¾ã™ã€‚ãã®éš›ã®å¯¾å‡¦æ–¹æ³•ã«ã¤ã„ã¦ã¯ä¸‹è¨˜ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã®ã§è¨˜ã—ã¦ãŠãã¾ã™ã€‚(æƒ…å ±æä¾›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™)\nå‚è€ƒ: https://zenn.dev/chattytak/articles/54f99d218300b8\nPPPoE æ¥ç¶šã—ã¦ IPv4 Server å…¬é–‹ PPPoE æ¥ç¶šã‚’è¡Œã„ã¾ã™ã€‚ãã—ã¦ IPv4 Server ã‚’å¤–éƒ¨ã«å…¬é–‹ã™ã‚‹æ‰‹é †ã§ã™ã€‚\nã¾ãš PPPoE æ¥ç¶šã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ã‚‹ PPPoE ç”¨ã®ãƒ¦ãƒ¼ã‚¶åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”¨ã„ã¾ã™ã€‚MTU èª¿æ•´ã‚‚ã—ã¦ãŠãã¾ã™ã€‚\nset interface pppoe pppoe0 authentication user xxxxx set interface pppoe pppoe0 authentication password xxxxxxx set inetrface pppoe pppoe0 source-interface eth0 set inetrface pppoe pppoe0 mtu 1454 å¤–éƒ¨å…¬é–‹ã™ã‚‹ IPv4 Server ã¯ PPPoE æ¥ç¶šçµŒè·¯ã‹ã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã§ãã‚‹ã‚ˆã† Source NAT ã‚’è¨­å®šã—ã¾ã™ã€‚\nset nat source rule 110 description 'Server Source NAT' set nat source rule 110 outbound-interface pppoe0 set nat source rule 110 source address 10.0.1.100/32 set nat source rule 110 translation address masquerade Destination NAT ã§ IPv4 Server ã‚’å¤–éƒ¨å…¬é–‹ã—ã¾ã™ã€‚\nset nat destination rule 19132 description 'Minecraft' set nat destination rule 19132 destination port 19132 #å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹æ¬¡ç¬¬ set nat destination rule 19132 inbound-interface pppoe0 set nat destination rule 19132 protocol udp #å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹æ¬¡ç¬¬ set nat destination rule 19132 translation address 10.0.1.100 set nat destination rule 19132 translation port 19132 #å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹æ¬¡ç¬¬ åŒæ§˜ã®ç›®çš„ã§ Policy Based Routing ã‚’æ›¸ãã¾ã™ã€‚ã¤ã„ã§ã«ãƒ•ãƒ¬ãƒƒãƒ„æ¥ç¶šç”¨ã®ãƒãƒªã‚·ã‚‚è¿½åŠ ã—ã¾ã™ã€‚\nset policy route PBR rule 10 description 'ipv4 server traffic via pppoe' set policy route PBR rule 10 set table 100 set policy route PBR rule 10 source address 10.0.1.100/32 set policy route PBR rule 20 description 'FLETS' set policy route PBR rule 20 destination address 0.0.0.0/0 set policy route PBR rule 20 protocol tcp set policy route PBR rule 20 set tcp-mss 1414 set policy route PBR rule 20 tcp flags SYN,!ACK,!FIN,!RST ä½œæˆã—ãŸ Policy Based Route ã‚’ interface ã«ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚\nset interface ethernet eth1 policy PBR Dynamic DNS ã—ã¦ IPv4 Server ã® DNS åä»˜ä¸ ã“ã“ã¯ãŠã¾ã‘ã§ã™ãŒã€è‡ªåˆ†ã®å ´åˆ Cloudflare ã§ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’å–å¾—ã—ãŸã®ã§ãã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ã¦ IPv4 Server ã« FQDN ã‚’ä»˜ä¸ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“å›ºå®š IPv4 ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¥‘ç´„ã—ã¦ã„ã‚Œã°ã“ã®æ‰‹é †ã¯ä¸è¦ã§ã€å˜ã«ãƒ›ã‚¹ãƒˆåã‚’ DNS è§£æ±ºã™ã‚Œã° OK ã§ã™ã€‚\nã“ã“ã§ã¯ä¸‹è¨˜ã‚’å‰æã¨ã—ã¦æ‰‹é †ã‚’è¨˜ã—ã¾ã™ã€‚\nå–å¾—ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³åã¯ foo.com IPv4 Server ã®ãƒ›ã‚¹ãƒˆåã¯ bar set service dns dyamic interface pppoe0 service cloudflare host-name bar.foo.com set service dns dyamic interface pppoe0 service cloudflare login set service dns dyamic interface pppoe0 service cloudflare password set service dns dyamic interface pppoe0 service cloudflare protocol cloudflare set service dns dyamic interface pppoe0 service cloudflare zone foo.com commit ã“ã®çŠ¶æ…‹ã§ä¸‹è¨˜ã®æ“ä½œã§çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚\nrun show dns dynamic status ip address : 14.x.x.x host-name : bar.foo.com last update : 2023-12-DD 07:16:59 update-status: good åå‰è§£æ±ºã‚’ç¢ºèªã—ã¾ã™ã€‚\ndig bar.foo.com. a +short x.x.x.x Firewall è¨­å®š set firewall name LAN_OUT description 'LAN to the Internet' set firewall name LAN_OUT default-action accept set firewall name WAN_IN description 'WAN to Internal' set firewall name WAN_IN default-action drop set firewall name WAN_IN rule 10 action accept set firewall name WAN_IN rule 10 state established enable set firewall name WAN_IN rule 10 state related enable set firewall name WAN_IN rule 20 action drop set firewall name WAN_IN rule 20 state invalid enable set firewall name WAN_IN rule 19132 description 'Minecraft' set firewall name WAN_IN rule 19132 action accept set firewall name WAN_IN rule 19132 destination address 10.0.1.100 set firewall name WAN_LOCAL default-action drop set firewall name WAN_LOCAL rule 10 action accept set firewall name WAN_LOCAL rule 10 state established enable set firewall name WAN_LOCAL rule 10 state related enable set firewall name WAN_LOCAL rule 20 action drop set firewall name WAN_LOCAL rule 20 state invalid enable ä½œæˆã—ãŸ firewall ã‚’ interface ã«ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚\nset interface pppoe pppoe0 firewall in name WAN_IN set interface pppoe pppoe0 firewall local name WAN_LOCAL set interface pppoe pppoe0 firewall out name LAN_OUT commit save ã¾ã¨ã‚ å‰è¿°ã—ãŸè¦ä»¶ã™ã¹ã¦ãŒæº€ãŸã›ã¾ã—ãŸã€‚ãŸã ä¸‹è¨˜ã®èª²é¡Œã‚‚ã‚ã‚Šã¾ã™ã€‚\nIPv6 ã® Firewall è¨­å®šãŒã¾ã  (å¾Œã«è¿½è¨˜ã—ã‚ˆã†ã¨æ€ã„ã¾ã™) IPoE ãŒçµæ§‹é…ã„ å‰è€…ã¯ãŸã è¨­å®šã™ã‚Œã°ã„ã„ã ã‘ãªã®ã§è§£æ±ºå‡ºæ¥ã‚‹ã®ã§ã™ãŒã€å¾Œè€…ã®èª²é¡Œã¯æƒ³å®šã¨ã¯ç•°ãªã£ã¦ã„ã¾ã—ãŸã€‚æ™‚é–“å¸¯ã«ã‚ˆã‚Šã¾ã™ãŒå¸¯åŸŸãŒ PPPoE ã®æ•°åˆ†ã®1ç¨‹åº¦ã«ä¸‹ãŒã‚‹ã“ã¨ã‚‚ã‚ã‚Šãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚‚è‹¥å¹²åŠ£ã‚Šã¾ã™ã€‚ãã‚‚ãã‚‚è‡ªåˆ†ã®å ´åˆã¯ Asani-net ã® v6connect ã‚’ä½¿ã£ã¦ã„ã¦ã€æœ¬æ¥çµ‚ç«¯ã®æƒ…å ±ç­‰ã‚’è‡ªå‹•è¨­å®šã§ãã‚‹å¯¾å¿œãƒ«ãƒ¼ã‚¿ã®ã¿ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãã†ãªã®ã§ã™ãŒã€ã‚µãƒãƒ¼ãƒˆå¤–ã®æ–¹æ³•ã§æ¥ç¶šã—ã¦ã„ã‚‹æ™‚ç‚¹ã§ä¸å®‰ã¯ã‚ã‚Šã¾ã™â€¦ã€‚\nã‚ˆã£ã¦ PPPoE æ¥ç¶šã‚ªãƒ³ãƒªãƒ¼ã®ãƒ›ãƒƒãƒˆã‚¹ã‚¿ãƒ³ãƒã‚¤æ©Ÿã‚’ä»Šå›è¨­å®šã—ãŸãƒ«ãƒ¼ã‚¿ã®æ¨ªã«éš£æ¥ã—ã¦ä¸¦ã¹ã¦ã„ã¾ã™ã€‚ã“ã®ç‚¹ã¯ã‚²ãƒ¼ãƒŸãƒ³ã‚°ãƒã‚·ãƒ³ç­‰æ¥ç¶šã‚’å®‰å®šã•ã›ãŸã„ãƒã‚·ãƒ³ã«å¯¾ã—ã¦ã® Policy Based Routing ã‚’æ›¸ã‘ã‚‹æº–å‚™ã‚’ã™ã‚Œã°ã„ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\nã¾ãŸã€NIC ã‚’3æšä»¥ä¸Šç©ã‚“ã ãƒ«ãƒ¼ã‚¿ãƒ¼ã§ã‚ã‚Œã° Source NAT, Policy Based Routing ã®è¨˜è¿°ã‚’å¤‰ãˆã¦ã€ä¸‡ãŒä¸€æ¥ç¶šæ€§ãŒå®‰å®šã—ãªã„å ´åˆã«ç›´ã¡ã«ç«¯æœ«ã®æ¥ç¶šã™ã‚‹ã‚µãƒ–ãƒãƒƒãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãªã‚“ã¦é‹ç”¨ã‚‚å‡ºæ¥ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\nã¨ã‚¿ã‚¤ãƒˆãƒ«ã¨çµæœãŒä¹–é›¢ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€ã¨ã¯è¨€ãˆ VyOS ã§ IPoE æ¥ç¶šã— NAT ã—å„ç«¯æœ«ã‹ã‚‰ IPv4 æ¥ç¶šã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã—ã€å¤–éƒ¨ã¸ã‚µãƒ¼ãƒãƒ¼ã‚‚å…¬é–‹ã™ã‚‹ã¨ã„ã†è¦ä»¶ã®æƒ…å ±æºãŒã»ã¼ç„¡ã‹ã£ãŸã®ã§è¨˜äº‹ã«ã—ã¾ã—ãŸã€‚\n",
  "wordCount" : "956",
  "inLanguage": "en",
  "image": "http://localhost:1313/jedipunkz.jpg","datePublished": "2023-12-10T01:14:57+09:00",
  "dateModified": "2023-12-10T01:14:57+09:00",
  "author":{
    "@type": "Person",
    "name": "Theme PaperMod"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/post/vyos-ipoe-pppoe/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚° (Alt + H)">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/about" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&amp;ã‚µãƒ¼ãƒãƒ¼å…¬é–‹
    </h1>
    
  </header> 
  <div class="post-content"><p><a href="https://twitter.com/jedipunkz">@jedipunkz</a> ã§ã™ã€‚ä»Šã¾ã§è‡ªå®…ã§ã¯ PPPoE æ¥ç¶šã‚’ã—ã¦ Global IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å–å¾—ã—ã¦è‡ªå®…ã«ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨å…¬é–‹ã—ãã®æ¥ç¶šã‚’ä½¿ã£ã¦å„ç«¯æœ«ã§ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã‚„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã‚’ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ã€IPoE æ¥ç¶šã™ã‚‹ã¨æ··é›‘æ™‚é–“ã‚’å›é¿å‡ºæ¥ã‚‹ã¨èã„ã¦ã„ãŸã®ã§ (ã“ã‚Œã«ã¤ã„ã¦ã¯å¾Œè¡“ã—ã¾ã™)ã€æ™®æ®µã®ã‚²ãƒ¼ãƒ ã‚„å„ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šã¯ IPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãƒã‚¤ã‚¯ãƒ©ã‚µãƒ¼ãƒãƒ¼ã¯ PPPoE ã§å…¬é–‹ã€ã¨å‡ºæ¥ãªã„ã‹ã¨è€ƒãˆã¾ã—ãŸã€‚IPoE ã¯ IPv4 over IPv6 ã®ãƒˆãƒ³ãƒãƒªãƒ³ã‚°æ¥ç¶šã™ã‚‹ãŸãŸã‚ IPoE ã ã‘ã§ã¯ IPv4 Global IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã«ã‚ˆã‚‹ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ã¯ä¸å¯èƒ½ã ã‹ã‚‰ã§ã™ã€‚</p>
<p>ã“ã“ã§ã¯ VyOS ã‚’ä½¿ã£ã¦ãã®ä¸¡è€…ã‚’æº€ãŸã™æ¥ç¶šã®è¨­å®šæ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚</p>
<h2 id="è¦ä»¶">è¦ä»¶<a hidden class="anchor" aria-hidden="true" href="#è¦ä»¶">#</a></h2>
<ul>
<li>PPPoE ã—ã¦ Global IPv4 ã‚’å–å¾—ã—ã‚µãƒ¼ãƒãƒ¼ã‚’å¤–éƒ¨ã«æä¾›</li>
<li>(ãã®éš›ã« Dynamic DNS ã‚’åˆ©ç”¨ (è‡ªå®…ã¯ Cloudflare))</li>
<li>ã‚µãƒ¼ãƒãƒ¼ä»¥å¤–ã®ç«¯æœ«ã®ãƒˆãƒ©ãƒ’ãƒƒã‚¯ã¯ IPoE æ¥ç¶šã—ãŸçµŒè·¯ã«æµã™</li>
<li>å›ç·šã¯NTT ãƒ•ãƒ¬ãƒƒãƒ„æƒ³å®š (è‡ªåˆ†ã®å ´åˆã¯ Asahi-net, IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚ã‚Š, ãã®ä»–ã§ã‚‚å¯)</li>
</ul>
<h2 id="iso-ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰">ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰<a hidden class="anchor" aria-hidden="true" href="#iso-ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰">#</a></h2>
<p>VyOS ã¯ Stable ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æœ‰å„Ÿãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãªã„ã¨ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰å‡ºæ¥ã¾ã›ã‚“ãŒãƒ“ãƒ«ãƒ‰ã™ã‚Œã° ISO ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒä½œã‚Œã¾ã™ã€‚ãã®æ–¹æ³•ã‚’è¨˜ã—ã¾ã™ã€‚</p>
<ul>
<li>2023/12 æ™‚ç‚¹ã§æœ€æ–°ã® Stable ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 1.3.4 ã‚’æŒ‡å®š</li>
<li>é©å½“ãª Linux ç«¯æœ«ã§ãƒ“ãƒ«ãƒ‰ã—ã¾ã—ãŸãŒ Docker ã‚’åˆ©ç”¨ã§ãã‚Œã°ã©ã“ã§ã‚‚è‰¯ã•ãã†</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">git clone -b equuleus https://github.com/vyos/vyos-build
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> vyos-build/
</span></span><span class="line"><span class="cl">docker run --rm -it --privileged -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/vyos -w /vyos vyos/vyos-build:equuleus bash
</span></span><span class="line"><span class="cl">./configure --architecture amd64 --build-type release --version 1.3.4
</span></span><span class="line"><span class="cl">sudo make iso
</span></span></code></pre></div><p>ãƒ“ãƒ«ãƒ‰ãŒå®Œäº†ã™ã‚‹ã¨ <code>build/</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã« iso ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒå‡ºæ¥ä¸ŠãŒã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚</p>
<h2 id="æ§‹æˆ">æ§‹æˆ<a hidden class="anchor" aria-hidden="true" href="#æ§‹æˆ">#</a></h2>
<ul>
<li>ä¸‹è¨˜ã®ã‚ˆã†ã« VyOS ãƒã‚·ãƒ³ã«ã¯ NIC ãŒ2ã¤ä»¥ä¸Šã‚ã‚Œã°è¦ä»¶æº€ãŸã›ã¾ã™ã€‚</li>
</ul>
<pre tabindex="0"><code>                                          10.0.1.254/32         10.0.1.100/32
+--------------+  IPoE  +-----------------------+------+     +---------------+
| the internet | -+---- | eth0(IPv6) &lt;- Tunnel -|      | --- |  IPv4 server  |
+--------------+  |     +-----------------------| eth1 +     +---------------+
                  +---- | eth0(IPv4) &lt;-  NAT -  |      | -+
                  PPPoE +-----------------------+------+  |  +---------------+
                        |         VyOS Router          |  +- | Other Clients |
                        +------------------------------+     +---------------+
                                                                  10.0.1.0/24
</code></pre><h2 id="æ‰‹é †">æ‰‹é †<a hidden class="anchor" aria-hidden="true" href="#æ‰‹é †">#</a></h2>
<h3 id="eth1-ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š">eth1 ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š<a hidden class="anchor" aria-hidden="true" href="#eth1-ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®š">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> interface ethernet eth1 address 10.0.1.254
</span></span></code></pre></div><h3 id="ipoe-æ¥ç¶š">IPoE æ¥ç¶š<a hidden class="anchor" aria-hidden="true" href="#ipoe-æ¥ç¶š">#</a></h3>
<p>eth0 å´ã§ IPv6 ã® IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å—ã‘å–ã‚Šã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> interface ethernet eth0 address dhcpv6
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interface ethernet eth0 dhcpv6-options parameters-only
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interface ethernet eth0 ipv6 address autoconf
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interface ethernet eth0 ipv6 disable-forwarding
</span></span><span class="line"><span class="cl">commit
</span></span></code></pre></div><p>ã“ã®æ™‚ç‚¹ã§æ•°åˆ†å¾…ã¤ã¨ IPv6 ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒå–å¾—ã§ãã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">run show int
</span></span><span class="line"><span class="cl">Codes: S - State, L - Link, u - Up, D - Down, A - Admin Down
</span></span><span class="line"><span class="cl">Interface        IP Address                        S/L  Description
</span></span><span class="line"><span class="cl">---------        ----------                        ---  -----------
</span></span><span class="line"><span class="cl">eth0             2405:xx:xx:xx:xx:xx:xx:xxx/64
</span></span></code></pre></div><p>è‡ªå®…ã®å ´åˆã¯ Asahi-net ã¨ã„ã†ãƒ—ãƒ­ãƒã‚¤ãƒ€ã§ã™ã€‚v6 connect ã¨ã„ã† IPv6 æ¥ç¶šã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã®ã§ã™ãŒã€çµ‚ç«¯ã®æƒ…å ±ã¯å…¬é–‹ã—ã¦ã„ãªã„ã¨ã‚µãƒãƒ¼ãƒˆã‹ã‚‰èãã¾ã—ãŸã€‚ã‚ˆã£ã¦ã“ã“ã«ã‚‚ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¨˜ã™ã®ã¯å•é¡Œã ã¨æ€ã†ã®ã§è¨˜ã—ã¾ã›ã‚“ã€‚ãŸã å‚è€ƒè³‡æ–™ã ã‘æ²è¼‰ã—ã¦ãŠãã¾ã™ã€‚</p>
<ul>
<li><a href="https://scrapbox.io/for2ando/Asahi%E3%83%8D%E3%83%83%E3%83%88DS-Lite%E3%81%AEAFTR%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8bash">https://scrapbox.io/for2ando/Asahi%E3%83%8D%E3%83%83%E3%83%88DS-Lite%E3%81%AEAFTR%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%82%92%E8%AA%BF%E3%81%B9%E3%82%8bash</a></li>
<li><a href="https://gist.github.com/stkchp/4daea9158439c32d7a70a255d51e568b">https://gist.github.com/stkchp/4daea9158439c32d7a70a255d51e568b</a></li>
</ul>
<p>ã¾ãŸ DS-Lite ã§ transix ã®å ´åˆã¯ <code>dig @2404:1a8:7f01:b::3 gw.transix.jp aaaa +short</code> ã§å¼•ã‘ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒãã‚Œã«ãªã‚‹ãã†ã§ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> interfaces tunnel tun0 encapsulation ipip6
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interfaces tunnel tun0 multicast disable
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interfaces tunnel tun0 remote 2001:xxx:x:xxx:xx <span class="c1">#æ¥ç¶šå…ˆçµ‚ç«¯</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interfaces tunnel tun0 source-address 2405:xx:xx:xx:xx:xx:xx:xxx/64 <span class="c1">#ä¸Šè¨˜æ‰‹é †ã§å–å¾—</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> protocols static interface-route 0.0.0.0/0 next-hop-interface tun0
</span></span><span class="line"><span class="cl">commit
</span></span></code></pre></div><p>ã“ã®æ™‚ç‚¹ã§ IPv6 ã§ã‚‚ IPv4 (IPv4 over IPv6) ã§ã‚‚ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã§ãã‚‹ã¯ãšã§ã™ã€‚</p>
<h3 id="ipoe-æ¥ç¶šã‚’åˆ©ç”¨ã—ãŸå®…å†…ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š">IPoE æ¥ç¶šã‚’åˆ©ç”¨ã—ãŸå®…å†…ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š<a hidden class="anchor" aria-hidden="true" href="#ipoe-æ¥ç¶šã‚’åˆ©ç”¨ã—ãŸå®…å†…ç«¯æœ«ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š">#</a></h3>
<p>eth1 å´ã«æ¥ç¶šã—ãŸå„ç«¯æœ«ãŒ IPv4 ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã§ãã‚‹ã‚ˆã† NAT ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">100</span> description <span class="s1">&#39;LAN Source NAT&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">100</span> outbound-interface tun0
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">100</span> <span class="nb">source</span> address 10.0.1.0/24
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">100</span> translation address masquerade
</span></span><span class="line"><span class="cl">commit
</span></span></code></pre></div><h3 id="å®…å†…ã®å„ç«¯æœ«ã«-ipv4-ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’-dhcp-ã§é…å¸ƒ">å®…å†…ã®å„ç«¯æœ«ã« IPv4 ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ DHCP ã§é…å¸ƒ<a hidden class="anchor" aria-hidden="true" href="#å®…å†…ã®å„ç«¯æœ«ã«-ipv4-ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’-dhcp-ã§é…å¸ƒ">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">show service dhcp-server shared-network-name HOME-DHCP name-server 8.8.8.8
</span></span><span class="line"><span class="cl">show service dhcp-server shared-network-name HOME-DHCP name-server 8.8.4.4
</span></span><span class="line"><span class="cl">show service dhcp-server shared-network-name HOME-DHCP subnet 10.0.1.0/24 default-router 10.0.1.254
</span></span><span class="line"><span class="cl">show service dhcp-server shared-network-name HOME-DHCP subnet 10.0.1.0/24 range dhcp1-subnet start 10.0.1.100
</span></span><span class="line"><span class="cl">show service dhcp-server shared-network-name HOME-DHCP subnet 10.0.1.0/24 range dhcp1-subnet end 10.0.1.190
</span></span></code></pre></div><p>ã“ã®æ™‚ç‚¹ã§å®…å†…ã®å„ç«¯æœ«ãŒ IPv4 ã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šå‡ºæ¥ã¾ã™ã€‚</p>
<h3 id="ãƒ«ãƒ¼ã‚¿å†èµ·å‹•æ™‚ã®å¯¾å¿œ">ãƒ«ãƒ¼ã‚¿å†èµ·å‹•æ™‚ã®å¯¾å¿œ<a hidden class="anchor" aria-hidden="true" href="#ãƒ«ãƒ¼ã‚¿å†èµ·å‹•æ™‚ã®å¯¾å¿œ">#</a></h3>
<p>DHCPv6 ã§å–å¾—ã—ãŸ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å›ºå®šã§ã¯ãªã„ã®ã§ã€ãƒ«ãƒ¼ã‚¿ã®å†èµ·å‹•æ™‚ã«ä¸æ•´åˆãŒç½®ãã¾ã™ã€‚ãã®éš›ã®å¯¾å‡¦æ–¹æ³•ã«ã¤ã„ã¦ã¯ä¸‹è¨˜ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã‚Šã¾ã™ã®ã§è¨˜ã—ã¦ãŠãã¾ã™ã€‚(æƒ…å ±æä¾›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™)</p>
<p>å‚è€ƒ: <a href="https://zenn.dev/chattytak/articles/54f99d218300b8">https://zenn.dev/chattytak/articles/54f99d218300b8</a></p>
<h3 id="pppoe-æ¥ç¶šã—ã¦-ipv4-server-å…¬é–‹">PPPoE æ¥ç¶šã—ã¦ IPv4 Server å…¬é–‹<a hidden class="anchor" aria-hidden="true" href="#pppoe-æ¥ç¶šã—ã¦-ipv4-server-å…¬é–‹">#</a></h3>
<p>PPPoE æ¥ç¶šã‚’è¡Œã„ã¾ã™ã€‚ãã—ã¦ IPv4 Server ã‚’å¤–éƒ¨ã«å…¬é–‹ã™ã‚‹æ‰‹é †ã§ã™ã€‚</p>
<p>ã¾ãš PPPoE æ¥ç¶šã—ã¾ã™ã€‚ãƒ—ãƒ­ãƒã‚¤ãƒ€ã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ã‚‹ PPPoE ç”¨ã®ãƒ¦ãƒ¼ã‚¶åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç”¨ã„ã¾ã™ã€‚MTU èª¿æ•´ã‚‚ã—ã¦ãŠãã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> interface pppoe pppoe0 authentication user xxxxx
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interface pppoe pppoe0 authentication password xxxxxxx
</span></span><span class="line"><span class="cl"><span class="nb">set</span> inetrface pppoe pppoe0 source-interface eth0
</span></span><span class="line"><span class="cl"><span class="nb">set</span> inetrface pppoe pppoe0 mtu <span class="m">1454</span>
</span></span></code></pre></div><p>å¤–éƒ¨å…¬é–‹ã™ã‚‹ IPv4 Server ã¯ PPPoE æ¥ç¶šçµŒè·¯ã‹ã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã§ãã‚‹ã‚ˆã† Source NAT ã‚’è¨­å®šã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">110</span> description <span class="s1">&#39;Server Source NAT&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">110</span> outbound-interface pppoe0
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">110</span> <span class="nb">source</span> address 10.0.1.100/32
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat <span class="nb">source</span> rule <span class="m">110</span> translation address masquerade
</span></span></code></pre></div><p>Destination NAT ã§ IPv4 Server ã‚’å¤–éƒ¨å…¬é–‹ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> nat destination rule <span class="m">19132</span> description <span class="s1">&#39;Minecraft&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat destination rule <span class="m">19132</span> destination port <span class="m">19132</span> <span class="c1">#å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹æ¬¡ç¬¬</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat destination rule <span class="m">19132</span> inbound-interface pppoe0
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat destination rule <span class="m">19132</span> protocol udp <span class="c1">#å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹æ¬¡ç¬¬</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat destination rule <span class="m">19132</span> translation address 10.0.1.100
</span></span><span class="line"><span class="cl"><span class="nb">set</span> nat destination rule <span class="m">19132</span> translation port <span class="m">19132</span> <span class="c1">#å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹æ¬¡ç¬¬</span>
</span></span></code></pre></div><p>åŒæ§˜ã®ç›®çš„ã§ Policy Based Routing ã‚’æ›¸ãã¾ã™ã€‚ã¤ã„ã§ã«ãƒ•ãƒ¬ãƒƒãƒ„æ¥ç¶šç”¨ã®ãƒãƒªã‚·ã‚‚è¿½åŠ ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">10</span> description <span class="s1">&#39;ipv4 server traffic via pppoe&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">10</span> <span class="nb">set</span> table <span class="m">100</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">10</span> <span class="nb">source</span> address 10.0.1.100/32
</span></span><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">20</span> description <span class="s1">&#39;FLETS&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">20</span> destination address 0.0.0.0/0
</span></span><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">20</span> protocol tcp
</span></span><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">20</span> <span class="nb">set</span> tcp-mss <span class="m">1414</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> policy route PBR rule <span class="m">20</span> tcp flags SYN,!ACK,!FIN,!RST
</span></span></code></pre></div><p>ä½œæˆã—ãŸ Policy Based Route ã‚’ interface ã«ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> interface ethernet eth1 policy PBR
</span></span></code></pre></div><h3 id="dynamic-dns-ã—ã¦-ipv4-server-ã®-dns-åä»˜ä¸">Dynamic DNS ã—ã¦ IPv4 Server ã® DNS åä»˜ä¸<a hidden class="anchor" aria-hidden="true" href="#dynamic-dns-ã—ã¦-ipv4-server-ã®-dns-åä»˜ä¸">#</a></h3>
<p>ã“ã“ã¯ãŠã¾ã‘ã§ã™ãŒã€è‡ªåˆ†ã®å ´åˆ Cloudflare ã§ãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’å–å¾—ã—ãŸã®ã§ãã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’åˆ©ç”¨ã—ã¦ IPv4 Server ã« FQDN ã‚’ä»˜ä¸ã—ã¦ã„ã¾ã™ã€‚ã‚‚ã¡ã‚ã‚“å›ºå®š IPv4 ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¥‘ç´„ã—ã¦ã„ã‚Œã°ã“ã®æ‰‹é †ã¯ä¸è¦ã§ã€å˜ã«ãƒ›ã‚¹ãƒˆåã‚’ DNS è§£æ±ºã™ã‚Œã° OK ã§ã™ã€‚</p>
<p>ã“ã“ã§ã¯ä¸‹è¨˜ã‚’å‰æã¨ã—ã¦æ‰‹é †ã‚’è¨˜ã—ã¾ã™ã€‚</p>
<ul>
<li>å–å¾—ã—ãŸãƒ‰ãƒ¡ã‚¤ãƒ³åã¯ foo.com</li>
<li>IPv4 Server ã®ãƒ›ã‚¹ãƒˆåã¯ bar</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> service dns dyamic interface pppoe0 service cloudflare host-name bar.foo.com
</span></span><span class="line"><span class="cl"><span class="nb">set</span> service dns dyamic interface pppoe0 service cloudflare login &lt;email address&gt;
</span></span><span class="line"><span class="cl"><span class="nb">set</span> service dns dyamic interface pppoe0 service cloudflare password &lt;global api key&gt;
</span></span><span class="line"><span class="cl"><span class="nb">set</span> service dns dyamic interface pppoe0 service cloudflare protocol cloudflare
</span></span><span class="line"><span class="cl"><span class="nb">set</span> service dns dyamic interface pppoe0 service cloudflare zone foo.com
</span></span><span class="line"><span class="cl">commit
</span></span></code></pre></div><p>ã“ã®çŠ¶æ…‹ã§ä¸‹è¨˜ã®æ“ä½œã§çŠ¶æ…‹ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">run show dns dynamic status
</span></span><span class="line"><span class="cl">ip address   : 14.x.x.x
</span></span><span class="line"><span class="cl">host-name    : bar.foo.com
</span></span><span class="line"><span class="cl">last update  : 2023-12-DD 07:16:59
</span></span><span class="line"><span class="cl">update-status: good
</span></span></code></pre></div><p>åå‰è§£æ±ºã‚’ç¢ºèªã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">dig bar.foo.com. a +short
</span></span><span class="line"><span class="cl">x.x.x.x
</span></span></code></pre></div><h3 id="firewall-è¨­å®š">Firewall è¨­å®š<a hidden class="anchor" aria-hidden="true" href="#firewall-è¨­å®š">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> firewall name LAN_OUT description <span class="s1">&#39;LAN to the Internet&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name LAN_OUT default-action accept
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN description <span class="s1">&#39;WAN to Internal&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN default-action drop
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">10</span> action accept
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">10</span> state established <span class="nb">enable</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">10</span> state related <span class="nb">enable</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">20</span> action drop
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">20</span> state invalid <span class="nb">enable</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">19132</span> description <span class="s1">&#39;Minecraft&#39;</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">19132</span> action accept
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_IN rule <span class="m">19132</span> destination address 10.0.1.100
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_LOCAL default-action drop
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">10</span> action accept
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">10</span> state established <span class="nb">enable</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">10</span> state related <span class="nb">enable</span>
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">20</span> action drop
</span></span><span class="line"><span class="cl"><span class="nb">set</span> firewall name WAN_LOCAL rule <span class="m">20</span> state invalid <span class="nb">enable</span>
</span></span></code></pre></div><p>ä½œæˆã—ãŸ firewall ã‚’ interface ã«ã‚¢ã‚¿ãƒƒãƒã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="nb">set</span> interface pppoe pppoe0 firewall in name WAN_IN
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interface pppoe pppoe0 firewall <span class="nb">local</span> name WAN_LOCAL
</span></span><span class="line"><span class="cl"><span class="nb">set</span> interface pppoe pppoe0 firewall out name LAN_OUT
</span></span><span class="line"><span class="cl">commit
</span></span><span class="line"><span class="cl">save
</span></span></code></pre></div><h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚<a hidden class="anchor" aria-hidden="true" href="#ã¾ã¨ã‚">#</a></h2>
<p>å‰è¿°ã—ãŸè¦ä»¶ã™ã¹ã¦ãŒæº€ãŸã›ã¾ã—ãŸã€‚ãŸã ä¸‹è¨˜ã®èª²é¡Œã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
<ul>
<li>IPv6 ã® Firewall è¨­å®šãŒã¾ã  (å¾Œã«è¿½è¨˜ã—ã‚ˆã†ã¨æ€ã„ã¾ã™)</li>
<li>IPoE ãŒçµæ§‹é…ã„</li>
</ul>
<p>å‰è€…ã¯ãŸã è¨­å®šã™ã‚Œã°ã„ã„ã ã‘ãªã®ã§è§£æ±ºå‡ºæ¥ã‚‹ã®ã§ã™ãŒã€å¾Œè€…ã®èª²é¡Œã¯æƒ³å®šã¨ã¯ç•°ãªã£ã¦ã„ã¾ã—ãŸã€‚æ™‚é–“å¸¯ã«ã‚ˆã‚Šã¾ã™ãŒå¸¯åŸŸãŒ PPPoE ã®æ•°åˆ†ã®1ç¨‹åº¦ã«ä¸‹ãŒã‚‹ã“ã¨ã‚‚ã‚ã‚Šãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã‚‚è‹¥å¹²åŠ£ã‚Šã¾ã™ã€‚ãã‚‚ãã‚‚è‡ªåˆ†ã®å ´åˆã¯ Asani-net ã® v6connect ã‚’ä½¿ã£ã¦ã„ã¦ã€æœ¬æ¥çµ‚ç«¯ã®æƒ…å ±ç­‰ã‚’è‡ªå‹•è¨­å®šã§ãã‚‹å¯¾å¿œãƒ«ãƒ¼ã‚¿ã®ã¿ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ãã†ãªã®ã§ã™ãŒã€ã‚µãƒãƒ¼ãƒˆå¤–ã®æ–¹æ³•ã§æ¥ç¶šã—ã¦ã„ã‚‹æ™‚ç‚¹ã§ä¸å®‰ã¯ã‚ã‚Šã¾ã™&hellip;ã€‚</p>
<p>ã‚ˆã£ã¦ PPPoE æ¥ç¶šã‚ªãƒ³ãƒªãƒ¼ã®ãƒ›ãƒƒãƒˆã‚¹ã‚¿ãƒ³ãƒã‚¤æ©Ÿã‚’ä»Šå›è¨­å®šã—ãŸãƒ«ãƒ¼ã‚¿ã®æ¨ªã«éš£æ¥ã—ã¦ä¸¦ã¹ã¦ã„ã¾ã™ã€‚ã“ã®ç‚¹ã¯ã‚²ãƒ¼ãƒŸãƒ³ã‚°ãƒã‚·ãƒ³ç­‰æ¥ç¶šã‚’å®‰å®šã•ã›ãŸã„ãƒã‚·ãƒ³ã«å¯¾ã—ã¦ã® Policy Based Routing ã‚’æ›¸ã‘ã‚‹æº–å‚™ã‚’ã™ã‚Œã°ã„ã„ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<p>ã¾ãŸã€NIC ã‚’3æšä»¥ä¸Šç©ã‚“ã ãƒ«ãƒ¼ã‚¿ãƒ¼ã§ã‚ã‚Œã° Source NAT, Policy Based Routing ã®è¨˜è¿°ã‚’å¤‰ãˆã¦ã€ä¸‡ãŒä¸€æ¥ç¶šæ€§ãŒå®‰å®šã—ãªã„å ´åˆã«ç›´ã¡ã«ç«¯æœ«ã®æ¥ç¶šã™ã‚‹ã‚µãƒ–ãƒãƒƒãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ãªã‚“ã¦é‹ç”¨ã‚‚å‡ºæ¥ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚</p>
<p>ã¨ã‚¿ã‚¤ãƒˆãƒ«ã¨çµæœãŒä¹–é›¢ã—ã¦ã„ã‚‹ã‚ˆã†ã§ã™ãŒã€ã¨ã¯è¨€ãˆ VyOS ã§ IPoE æ¥ç¶šã— NAT ã—å„ç«¯æœ«ã‹ã‚‰ IPv4 æ¥ç¶šã§ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«æ¥ç¶šã—ã€å¤–éƒ¨ã¸ã‚µãƒ¼ãƒãƒ¼ã‚‚å…¬é–‹ã™ã‚‹ã¨ã„ã†è¦ä»¶ã®æƒ…å ±æºãŒã»ã¼ç„¡ã‹ã£ãŸã®ã§è¨˜äº‹ã«ã—ã¾ã—ãŸã€‚</p>


  </div>

  <footer class="post-footer">

<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ on x"
            href="https://x.com/intent/tweet/?text=VyOS%20%e3%81%a7%20IPoE%2fPPPoE%20%e3%82%92%e4%bd%b5%e7%94%a8%e3%81%97%e3%81%a6%e5%ae%89%e5%ae%9a%e3%81%97%e3%81%9f%e6%8e%a5%e7%b6%9a%26%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc%e5%85%ac%e9%96%8b&amp;url=http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f&amp;hashtags=">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f&amp;title=VyOS%20%e3%81%a7%20IPoE%2fPPPoE%20%e3%82%92%e4%bd%b5%e7%94%a8%e3%81%97%e3%81%a6%e5%ae%89%e5%ae%9a%e3%81%97%e3%81%9f%e6%8e%a5%e7%b6%9a%26%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc%e5%85%ac%e9%96%8b&amp;summary=VyOS%20%e3%81%a7%20IPoE%2fPPPoE%20%e3%82%92%e4%bd%b5%e7%94%a8%e3%81%97%e3%81%a6%e5%ae%89%e5%ae%9a%e3%81%97%e3%81%9f%e6%8e%a5%e7%b6%9a%26%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc%e5%85%ac%e9%96%8b&amp;source=http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f&title=VyOS%20%e3%81%a7%20IPoE%2fPPPoE%20%e3%82%92%e4%bd%b5%e7%94%a8%e3%81%97%e3%81%a6%e5%ae%89%e5%ae%9a%e3%81%97%e3%81%9f%e6%8e%a5%e7%b6%9a%26%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc%e5%85%ac%e9%96%8b">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ on whatsapp"
            href="https://api.whatsapp.com/send?text=VyOS%20%e3%81%a7%20IPoE%2fPPPoE%20%e3%82%92%e4%bd%b5%e7%94%a8%e3%81%97%e3%81%a6%e5%ae%89%e5%ae%9a%e3%81%97%e3%81%9f%e6%8e%a5%e7%b6%9a%26%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc%e5%85%ac%e9%96%8b%20-%20http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ on telegram"
            href="https://telegram.me/share/url?text=VyOS%20%e3%81%a7%20IPoE%2fPPPoE%20%e3%82%92%e4%bd%b5%e7%94%a8%e3%81%97%e3%81%a6%e5%ae%89%e5%ae%9a%e3%81%97%e3%81%9f%e6%8e%a5%e7%b6%9a%26%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc%e5%85%ac%e9%96%8b&amp;url=http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share VyOS ã§ IPoE/PPPoE ã‚’ä½µç”¨ã—ã¦å®‰å®šã—ãŸæ¥ç¶š&ã‚µãƒ¼ãƒãƒ¼å…¬é–‹ on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=VyOS%20%e3%81%a7%20IPoE%2fPPPoE%20%e3%82%92%e4%bd%b5%e7%94%a8%e3%81%97%e3%81%a6%e5%ae%89%e5%ae%9a%e3%81%97%e3%81%9f%e6%8e%a5%e7%b6%9a%26%e3%82%b5%e3%83%bc%e3%83%90%e3%83%bc%e5%85%ac%e9%96%8b&u=http%3a%2f%2flocalhost%3a1313%2fpost%2fvyos-ipoe-pppoe%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
