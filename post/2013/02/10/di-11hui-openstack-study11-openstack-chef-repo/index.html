<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ | jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</title>
<meta name="keywords" content="">
<meta name="description" content="openstack-chef-repo ã‚’ä½¿ã£ãŸ Chef ã«ã‚ˆã‚‹ OpenStack Essex æ§‹ç¯‰ã®å‹‰å¼·ä¼šç™ºè¡¨ãƒ¬ãƒãƒ¼ãƒˆ">
<meta name="author" content="jedipunkz">
<link rel="canonical" href="https://jedipunkz.github.io/post/2013/02/10/di-11hui-openstack-study11-openstack-chef-repo/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.97234df0e1271d016477114a055b3d32629722d95690ff83ab2a63dfe4ada46b.css" integrity="sha256-lyNN8OEnHQFkdxFKBVs9MmKXItlWkP&#43;Dqypj3&#43;StpGs=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jedipunkz.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jedipunkz.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jedipunkz.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jedipunkz.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://jedipunkz.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://jedipunkz.github.io/post/2013/02/10/di-11hui-openstack-study11-openstack-chef-repo/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="stylesheet" href="/css/custom.css">
<style>
 
.post-content code,
.post-content pre code,
.post-content .highlight code,
.post-content .highlighttable code {
    font-size: 1em !important;
}

 
.post-content p code,
.post-content li code,
.post-content td code {
    font-size: 1em !important;
}
</style><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ\"",
  "description": "\"openstack-chef-repo ã‚’ä½¿ã£ãŸ Chef ã«ã‚ˆã‚‹ OpenStack Essex æ§‹ç¯‰ã®å‹‰å¼·ä¼šç™ºè¡¨ãƒ¬ãƒãƒ¼ãƒˆ\"",
  "datePublished": "2013-02-10T00:00:00Z",
  "dateModified": "2013-02-10T00:00:00Z",
  "author": {
    "@type": "Person",
    "name": "\"jedipunkz\""
  },
  "publisher": {
    "@type": "Person",
    "name": "\"jedipunkz\"",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/jedipunkz.github.io\/jedipunkz.jpg"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/jedipunkz.github.io\/post\/2013\/02\/10\/di-11hui-openstack-study11-openstack-chef-repo\/"
  }
}
</script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-2H91XCYVZ8"></script>
      <script>
        var doNotTrack = false;
        if ( true ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-2H91XCYVZ8');
        }
      </script><meta property="og:url" content="https://jedipunkz.github.io/post/2013/02/10/di-11hui-openstack-study11-openstack-chef-repo/">
  <meta property="og:site_name" content="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°">
  <meta property="og:title" content="ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ">
  <meta property="og:description" content="openstack-chef-repo ã‚’ä½¿ã£ãŸ Chef ã«ã‚ˆã‚‹ OpenStack Essex æ§‹ç¯‰ã®å‹‰å¼·ä¼šç™ºè¡¨ãƒ¬ãƒãƒ¼ãƒˆ">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2013-02-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2013-02-10T00:00:00+00:00">
      <meta property="og:image" content="https://jedipunkz.github.io/jedipunkz.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://jedipunkz.github.io/jedipunkz.jpg">
<meta name="twitter:title" content="ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ">
<meta name="twitter:description" content="openstack-chef-repo ã‚’ä½¿ã£ãŸ Chef ã«ã‚ˆã‚‹ OpenStack Essex æ§‹ç¯‰ã®å‹‰å¼·ä¼šç™ºè¡¨ãƒ¬ãƒãƒ¼ãƒˆ">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://jedipunkz.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ",
      "item": "https://jedipunkz.github.io/post/2013/02/10/di-11hui-openstack-study11-openstack-chef-repo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ",
  "name": "ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ",
  "description": "openstack-chef-repo ã‚’ä½¿ã£ãŸ Chef ã«ã‚ˆã‚‹ OpenStack Essex æ§‹ç¯‰ã®å‹‰å¼·ä¼šç™ºè¡¨ãƒ¬ãƒãƒ¼ãƒˆ",
  "keywords": [
    
  ],
  "articleBody": "2013å¹´2æœˆ9æ—¥ã«è¡Œã‚ã‚ŒãŸ OpenStack å‹‰å¼·ä¼šç¬¬11å›ã§è©±ã—ã¦ãã¾ã—ãŸã€‚\nopenstack-chef-repo ã¨è¨€ã†ã€Opscode Chef ã§ OpenStack ã‚’æ§‹ç¯‰ã™ã‚‹å†…å®¹ã‚’è©±ã—ã¦ ãã¾ã—ãŸã€‚ãã®æ™‚ã«èª¬æ˜å‡ºæ¥ãªã‹ã£ãŸè©³ç´°ã«ã¤ã„ã¦ãƒ–ãƒ­ã‚°ã«æ›¸ã„ã¦ãŠãã¾ã™ã€‚\nOpenstack chef-repo from Tomokazu Hirai èª¬æ˜ã§ä½¿ã£ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã§ã™ã€‚\nã¾ãˆãŒã Essex ãƒ™ãƒ¼ã‚¹ã§æ§‹ç¯‰ã™ã‚‹ã“ã¨ã—ã‹ä»Šã¯å‡ºæ¥ã¾ã›ã‚“ã€‚Folsom ã«é–¢ã—ã¦ã¯ â€˜ç›´ã¡ã«é–‹ç™ºãŒ ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹â€™ ã¨è¨˜ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ä»Šå›ã¯ Opscode ã¨ RackSpace ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå…± åŒã§é–‹ç™ºã‚’é€²ã‚ã¦ã„ã‚‹ã®ã§æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚ä»Šã¾ã§å€‹äººã§ OpenStack ã®å„ã‚³ãƒ³ãƒãƒ¼ãƒ ãƒ³ãƒˆã® cookbook ã‚’é–‹ç™ºã•ã‚Œã¦ã„ãŸæ–¹ãŒã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã ã‘ã©æ±ç”¨æ€§ã‚’æŒãŸã›ã‚‹ã¨ã„ã† æ„å‘³ã§éå¸¸ã«é›£ã—ãã€ã¾ãŸã©ã®æ–¹ã®é–‹ç™ºã«è¿½å¾“ã—ã¦ã„ã‘ã°ã‚ˆã„ã‹åˆ¤æ–­å›°ã£ã¦ã„ã¾ã—ãŸã€‚ ã‚ˆã£ã¦ä»Šå›ã“ãæœŸå¾…ã€‚\nå‰æã®æ§‹æˆ +-------------+ | chef-server | +-------------+ 10.0.0.10 | +---------------+ 10.0.0.0/24 | | +-------------+ +-------------+ | workstation | | node | +-------------+ +-------------+ 10.0.0.11 10.0.0.12 chef-server : chef API ã‚’æŒã¤ chef-server ã€‚cookbook, role..ãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤ workstation : openstack-chef-repo ã‚’ä½¿ã†ãƒãƒ¼ãƒ‰ã€‚knife ãŒä½¿ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ node : OpenStack ã‚’æ§‹ç¯‰ã™ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ ç›®æ¬¡ chef-server ã®æ§‹ç¯‰ (BootStrap ä½¿ã†) openstack-chef-repo ã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™ openstack-chef-repo å®Ÿè¡Œ chef-server ã®æ§‹ç¯‰ Opscode ã® wiki ã«è¨˜ã•ã‚Œã¦ã„ã‚‹é€šã‚Šãªã®ã§ã™ãŒã€ç°¡å˜ã«æ›¸ã„ã¦ãŠãã¾ã™ã€‚ä»Šå›ã¯ bootstrap æ–¹å¼ã§ç”¨æ„ã—ã¾ã™ã€‚\nchef-server ãƒãƒ¼ãƒ‰ã« chef ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚chef-solo ã‚’ç”¨ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚\nchef-server# gem install chef chef-solo ã‚’ä½¿ã†ãŸã‚ã®è¨­å®šæƒ…å ±ã‚’ /etc/chef/solo.rb ã«è¨˜ã—ã¾ã™ã€‚\nchef-server# mkdir /etc/chef chef-server# ${EDITOR} /etc/chef/solo.rb file_cache_path \"/tmp/chef-solo\" cookbook_path \"/tmp/chef-solo/cookbooks\" chef-solo ã‚’å®Ÿè¡Œã™ã‚‹éš›ã«ä½¿ã† json ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¾ã™ã€‚attribute ã‚’ä¸Šæ›¸ãã™ã‚‹ ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ä»Šå›ã¯ webui ã‚’æœ‰åŠ¹ã«ã—ãŸçŠ¶æ…‹ã«ã—ã¾ã™ã€‚\nchef-server# ${EDITOR} ~/chef.json { \"chef_server\": { \"server_url\": \"http://localhost:4000\", \"init_style\": \"runit\" }, \"run_list\": [ \"recipe[chef-server::rubygems-install]\" ] } bootstrap ã—ã¦ chef-server ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚\nchef-server# chef-solo -c /etc/chef/solo.rb -j ~/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz chef-server ãŒå®Œæˆã—ãŸã¯ãšã§ã™ã€‚workstation ã§ knife ã‚’ä½¿ã†ãŸã‚ã« â€˜clientâ€™ ã‚’ ä½œã‚Šã¾ã™ã€‚chef 10.x ã§ã¯ user ã§ã¯ãªã client ãŒ knife ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚\nchef-server% mkdir ~/.chef chef-server% sudo cp /etc/chef/validation.pem ~/.chef/ chef-server% sudo cp /etc/chef/webui.pem ~/.chef/ chef-server% sudo chown : ~/.chef knife ã‚’ä½¿ã†ãŸã‚ã«ä¸‹è¨˜ã®æ“ä½œã‚’è¡Œã„ã¾ã™ã€‚\nchef-server% cd ~ chef-server% knife configure -i Where should I put the config file? [~/.chef/knife.rb] Please enter the chef server URL: [http://10.0.0.1:4000] Please enter a clientname for the new client: [jedipunkz] Please enter the existing admin clientname: [chef-webui] Please enter the location of the existing admin client's private key:[/etc/chef/webui.pem] /home/jedipunkz/.chef/webui.pem Please enter the validation clientname: [chef-validator] Please enter the location of the validation key:[/etc/chef/validation.pem] /home/jedipunkz/.chef/validation.pem Please enter the path to a chef repository (or leave blank): Creating initial API user... Created client[jedipunkz] Configuration file written to /home/jedipunkz/.chef/knife.rb workstaion ãƒãƒ¼ãƒ‰ã§ knife ã‚’æ“ä½œã™ã‚‹ãŸã‚ã® â€˜workerâ€™ client ã‚’ä½œæˆã—ã¾ã™ã€‚\nchef-server% export EDITOR=vim chef-server% knife client create worker -a -f worker.pem chef-server% knife client list chef-validator chef-webui chefserver.example.com jedipunkz worker openstack-chef-repo ã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™ workstation ã§ openstack-chef-repo ã‚’ä½¿ã†ãŸã‚ã®æº–å‚™ã‚’ã—ã¾ã™ã€‚\nã¾ãšã¯ knife ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ä¸‹è¨˜ã®ã‚ˆã†ã« knife.rb ã‚„ pem ã®æ‰‹å…ƒã¸ã®è»¢é€ã‚’è¡Œã„ã¾ã™ã€‚\nworkstation% gem install chef librarian spiceweasel workstation% cd ~ workstation% git clone git://github.com/opscode/openstack-chef-repo.git workstation% cd openstack-chef-repo workstation% vim .chef/knife.rb log_level :info log_location STDOUT node_name 'worker' client_key '/home/jedipunkz/openstack-chef-repo/.chef/worker.pem' validation_client_name 'chef-validator' validation_key '/home/jedipunkz/openstack-chef-repo/.chef/validation.pem' chef_server_url 'http://10.0.0.10:4000' cache_type 'BasicFile' cache_options( :path =\u003e '/home/jedipunkz/openstack-chef-repo/.chef/checksums' ) cookbook_path '/home/jedipunkz/openstack-chef-repo/cookbooks' workstation% scp 10.0.0.10:~/worker.pem .chef/ workstation% scp 10.0.0.10:~/.chef/validation.pem .chef/ librarian ã‚’ä½¿ã£ã¦ OpenStack æ§‹ç¯‰ã«å¿…è¦ãª cookbooks ã‚’ãƒ€ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚Cheffile ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã«ä½•ã‚’ã©ã“ã‹ã‚‰å–å¾—ã™ã‚‹ã®ã‹è¨˜ã•ã‚Œã„ã¦ãã‚Œã«ã—ãŸãŒã£ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚\nworkstation% libratrian-chef update ç’°å¢ƒã«åˆã‚ã›ã¦ production.yml ã‚’ä¿®æ­£ã—ã¾ã™ã€‚ä»Šå›å¿…è¦æœ€ä½é™ã®ç®‡æ‰€ã®ã¿ä¿®æ­£ã—ã¾ã™ã€‚ â€œosops_networksâ€ ã¨ã„ã†ç®‡æ‰€ã« nova-network ã«æ¸¡ã™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ãŒã‚ã‚‹ã®ã§ä»Šå›ã® ç’°å¢ƒ 10.0.0.0/24 ã«ä¿®æ­£ã—ã¾ã™ã€‚å…¨ä½“ã¯ã“ã®ã‚ˆã†ãªå†…å®¹ã«ãªã‚Šã¾ã™ã€‚\nworkstation% ${EDITOR} production.yml name \"production\" description \"Defines the network and database settings you're going to use with OpenStack. The networks will be used in the libraries provided by the osops-utils cookbook. This example is for FlatDHCP with 2 physical networks.\" override_attributes( \"glance\" =\u003e { \"image_upload\" =\u003e true, \"images\" =\u003e [\"precise\",\"cirros\"], }, \"mysql\" =\u003e { \"allow_remote_root\" =\u003e true, \"root_network_acl\" =\u003e \"%\" }, \"osops_networks\" =\u003e { \"public\" =\u003e \"10.0.0.0/24\", \"management\" =\u003e \"10.0.0.0/24\", \"nova\" =\u003e \"10.0.0.0/24\" }, \"nova\" =\u003e { \"network\" =\u003e { \"fixed_range\" =\u003e \"192.168.100.0/24\", \"public_interface\" =\u003e \"eth0\" }, \"networks\" =\u003e [ { \"label\" =\u003e \"public\", \"ipv4_cidr\" =\u003e \"192.168.100.0/24\", \"num_networks\" =\u003e \"1\", \"network_size\" =\u003e \"255\", \"bridge\" =\u003e \"br100\", \"bridge_dev\" =\u003e \"eth0\", \"dns1\" =\u003e \"8.8.8.8\", \"dns2\" =\u003e \"8.8.4.4\" } ] } ) infrastructure.yml ã¨ã„ã† spiceweasel ãŒå‚ç…§ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£ã‚’è¡Œã„ã¾ã™ã€‚ cookbooks, roles, environments, data bags, node ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚Š node ã®ã¿è¨˜ã•ã‚Œã¦ã„ãªã„ã®ã§ä»Šå›ç”¨æ„ã—ãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã®æƒ…å ±ã‚’è¿½è¨˜ã—ã¾ã™ã€‚\nnode ã«ã¯äºˆã‚ SSH å…¬é–‹éµã‚’è¨­ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸä¸‹è¨˜ã¯ root ãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚° ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ãŒã€sudo ã—ã¦ã‚‚ã‚‰ã£ã¦ã‚‚æ§‹ã‚ãªã„ã§ã™ã€‚role ã§æŒ‡å®šã—ãŸ â€˜allinoneâ€™ ã¯ OpenStack ã®å…¨ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¸€å°ã®ãƒãƒ¼ãƒ‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®ã‚‚ã® ã§ã™ã€‚ã“ã‚Œã‚’ä»–ã® role ä¾‹ãˆã° â€˜keystoneâ€™ ç­‰ã‚’æŒ‡å®šã—ã¦è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã« OpenStack ã‚’å±•é–‹ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ãªã¯ãšã§ã™ã€‚è©¦ã—ã¦ã„ã¾ã›ã‚“ãŒã€‚\nworkstation% vim infrastructure.yml ... çœç•¥ nodes: - 10.0.0.12: run_list: role[allinone] options: -i ~/.ssh/id_rsa -x root -E production openstack-chef-repo å®Ÿè¡Œ æº–å‚™ãŒæ•´ã£ãŸã®ã§ spiceweasel ã‚’ä½¿ã£ã¦ knife ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ãƒã‚§ãƒƒã‚¯ã¨å®Ÿè¡Œã‚’ã—ã¦ ã¿ã¾ã™ã€‚å…ˆã»ã©è¿½è¨˜ã—ãŸ infrastructure.yml ã‚’ä½¿ã„ã¾ã™ã€‚\nworkstation% spiceweasel infrastructure.yml knife cookbook upload apache2 knife cookbook upload apt knife cookbook upload aws knife cookbook upload build-essential knife cookbook upload ntp knife cookbook upload openssh knife cookbook upload openssl knife cookbook upload postgresql knife cookbook upload selinux knife cookbook upload xfs knife cookbook upload yum knife cookbook upload erlang knife cookbook upload mysql knife cookbook upload rabbitmq knife cookbook upload database knife cookbook upload omnibus_updater knife cookbook upload lxc knife cookbook upload sysctl knife cookbook upload osops-utils knife cookbook upload mysql-openstack knife cookbook upload rabbitmq-openstack knife cookbook upload keystone knife cookbook upload glance knife cookbook upload nova knife cookbook upload horizon knife environment from file production.rb knife role from file base.rb knife role from file lxc.rb knife role from file mysql-master.rb knife role from file rabbitmq-server.rb knife role from file keystone.rb knife role from file glance-api.rb knife role from file glance-registry.rb knife role from file glance.rb knife role from file nova-setup.rb knife role from file nova-scheduler.rb knife role from file nova-api-ec2.rb knife role from file nova-api-os-compute.rb knife role from file nova-volume.rb knife role from file nova-vncproxy.rb knife role from file horizon-server.rb knife role from file single-controller.rb knife role from file single-compute.rb knife role from file allinone.rb knife bootstrap 10.0.0.12 -i ~/.ssh/id_rsa -x root -E production -r 'role[allinone]' ã“ã®æ“ä½œã§ spiceweasel ã¯ role ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã¨ yml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿ã€ä¾å­˜é–¢ä¿‚ã‚’ ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ã€‚\nã§ã¯ã„ã‚ˆã„ã‚ˆå®Ÿè¡Œã€‚\nworkstaion% spiceweasel -e infrastructure.yml æ•°åˆ†ã§ OpenStack ç’°å¢ƒãŒæ§‹ç¯‰å‡ºæ¥ã‚‹ã¨æ€ã„ã¾ã™ã€‚\næ‰€æ„Ÿ ç¾æ™‚ç‚¹ã§ã¯ã¾ã  essex ãƒ™ãƒ¼ã‚¹ã® OpenStack ã—ã‹æ§‹ç¯‰å‡ºæ¥ãªã„ã€‚folsom ä»¥é™ã«ã¤ã„ã¦ ã¯ç›´ã¡ã«è¡Œã‚ã‚Œã‚‹ã€‚ã¾ãŸå…ˆã«ã‚‚è¨˜ã—ãŸãŒ Opscode ã¨ RackSpace ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå…±åŒã§ ä½œæ¥­ã«å…¥ã£ãŸã®ã§ä»Šå¾Œã«æœŸå¾…ã€‚è¤‡æ•°ã® OpenStack cookboooks ã‚’è¦‹ã¦ããŸãŒå€‹äººã§é–‹ç™º ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚fedra, centos, ubuntu, debian â€¦ ã„ã‚ã‚“ãªãƒ—ãƒ©ãƒƒ ãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’å‰æã«é–‹ç™ºã™ã‚‹ã®ã¯å³ã—ã„â€¦ã€‚pull request ã™ã‚‹ä½™åŠ›ãŒã‚ã‚Œã°ã‚„ã£ã¦ã¿ ãŸã„ã€‚ã¾ãŸåˆã‚ã›ã¦å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® cookbooks ã«ã¤ã„ã¦ã‚‚åŒæ§˜ã«å‚åŠ ã—ã¦ã„ããŸ ã„ã€‚\nchef ã¯ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§ç¶™ç¶šçš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¯èƒ½ã§ã‚ã‚Šã€chef Resources ãŒæˆ‘ã€… ã®æ“ä½œã‚’æŠ½è±¡åŒ–ã—ã¦ãã‚Œã‚‹ã€‚å°šä¸”ã¤ API ã§é–‹ç™ºã‚‚å®¹æ˜“ã«ãªã‚‹ã€‚å­¦ç¿’ã‚³ã‚¹ãƒˆã¯è‹¥å¹²é«˜ã„ ã—ã€cookbooks ã®é–‹ç™ºã‚‚æ­£ç›´ã—ã‚“ã©ã„ã€‚ã ã‘ã©ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ chef ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹æ„ å‘³ã¯ã¨ã¦ã‚‚å¤§ãã„ã€‚ãã®ä»–ã®ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦å±äººçš„ãªæ“ä½œã«ä¾å­˜ã—ãŸã‚·ã‚¹ãƒ†ãƒ ã‚’ç„¡ãã™ ã¨ã„ã†äº‹ã‚‚ã‚ã‚‹ã€‚\nOpenStack ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã¨ã—ã¦ dodai-deploy ã¨ puppet ãŒæ²è¼‰ã• ã‚Œã¦ã„ã‚‹ã€‚chef ã¯è¼‰ã£ã¦ã„ãªã„ã€‚ã“ã‚Œã¯ cookbooks ã®é–‹ç™ºãŒé…ã‚Œã¦ã„ã‚‹çŠ¶æ³ãŒç†ç”±ã« ã‚ã‚‹ã¨æ€ã†ã€‚ä»Šå› Opscode ã®ä¸­ã® Matt Ray ã•ã‚“ã®ä¸‹è¨˜ã®è³‡æ–™\nhttp://www.slideshare.net/mattray/chef-11-previewchef-for-openstack\nã‚’è¦‹ã¦ã€ã“ã‚Œã‹ã‚‰ã«æœŸå¾…ã—ãŸã„ã¨æ„Ÿã˜ãŸã€‚\n",
  "wordCount" : "849",
  "inLanguage": "en",
  "image": "https://jedipunkz.github.io/jedipunkz.jpg","datePublished": "2013-02-10T00:00:00Z",
  "dateModified": "2013-02-10T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "jedipunkz"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jedipunkz.github.io/post/2013/02/10/di-11hui-openstack-study11-openstack-chef-repo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jedipunkz.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jedipunkz.github.io/" accesskey="h" title="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚° (Alt + H)">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jedipunkz.github.io/about" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://jedipunkz.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://jedipunkz.github.io/post/">Posts</a></div>
    <h1 class="post-title">
      ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ
    </h1>
    <div class="post-description">
      openstack-chef-repo ã‚’ä½¿ã£ãŸ Chef ã«ã‚ˆã‚‹ OpenStack Essex æ§‹ç¯‰ã®å‹‰å¼·ä¼šç™ºè¡¨ãƒ¬ãƒãƒ¼ãƒˆ
    </div>
    
  </header> 
  <div class="post-content"><p>2013å¹´2æœˆ9æ—¥ã«è¡Œã‚ã‚ŒãŸ OpenStack å‹‰å¼·ä¼šç¬¬11å›ã§è©±ã—ã¦ãã¾ã—ãŸã€‚</p>
<p>openstack-chef-repo ã¨è¨€ã†ã€Opscode Chef ã§ OpenStack ã‚’æ§‹ç¯‰ã™ã‚‹å†…å®¹ã‚’è©±ã—ã¦
ãã¾ã—ãŸã€‚ãã®æ™‚ã«èª¬æ˜å‡ºæ¥ãªã‹ã£ãŸè©³ç´°ã«ã¤ã„ã¦ãƒ–ãƒ­ã‚°ã«æ›¸ã„ã¦ãŠãã¾ã™ã€‚</p>
<iframe src="http://www.slideshare.net/slideshow/embed_code/16434817"
width="427" height="356" frameborder="0" marginwidth="0" marginheight="0"
scrolling="no" style="border:1px solid #CCC;border-width:1px 1px
0;margin-bottom:5px" allowfullscreen webkitallowfullscreen mozallowfullscreen>
</iframe> <div style="margin-bottom:5px"> <strong> <a
href="http://www.slideshare.net/tomokazubobhirai/openstack-chefrepo"
title="Openstack chef-repo" target="_blank">Openstack chef-repo</a> </strong>
from <strong><a href="http://www.slideshare.net/tomokazubobhirai"
target="_blank">Tomokazu Hirai</a></strong> </div>
<p>èª¬æ˜ã§ä½¿ã£ãŸã‚¹ãƒ©ã‚¤ãƒ‰ã§ã™ã€‚</p>
<h2 id="ã¾ãˆãŒã">ã¾ãˆãŒã<a hidden class="anchor" aria-hidden="true" href="#ã¾ãˆãŒã">#</a></h2>
<p>Essex ãƒ™ãƒ¼ã‚¹ã§æ§‹ç¯‰ã™ã‚‹ã“ã¨ã—ã‹ä»Šã¯å‡ºæ¥ã¾ã›ã‚“ã€‚Folsom ã«é–¢ã—ã¦ã¯ &lsquo;ç›´ã¡ã«é–‹ç™ºãŒ
ã‚¹ã‚¿ãƒ¼ãƒˆã™ã‚‹&rsquo; ã¨è¨˜ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚ä»Šå›ã¯ Opscode ã¨ RackSpace ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå…±
åŒã§é–‹ç™ºã‚’é€²ã‚ã¦ã„ã‚‹ã®ã§æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚ä»Šã¾ã§å€‹äººã§ OpenStack ã®å„ã‚³ãƒ³ãƒãƒ¼ãƒ
ãƒ³ãƒˆã® cookbook ã‚’é–‹ç™ºã•ã‚Œã¦ã„ãŸæ–¹ãŒã„ã‚‰ã£ã—ã‚ƒã‚‹ã®ã ã‘ã©æ±ç”¨æ€§ã‚’æŒãŸã›ã‚‹ã¨ã„ã†
æ„å‘³ã§éå¸¸ã«é›£ã—ãã€ã¾ãŸã©ã®æ–¹ã®é–‹ç™ºã«è¿½å¾“ã—ã¦ã„ã‘ã°ã‚ˆã„ã‹åˆ¤æ–­å›°ã£ã¦ã„ã¾ã—ãŸã€‚
ã‚ˆã£ã¦ä»Šå›ã“ãæœŸå¾…ã€‚</p>
<h2 id="å‰æã®æ§‹æˆ">å‰æã®æ§‹æˆ<a hidden class="anchor" aria-hidden="true" href="#å‰æã®æ§‹æˆ">#</a></h2>
<pre><code>+-------------+
| chef-server |
+-------------+ 10.0.0.10
|
+---------------+ 10.0.0.0/24
|               |
+-------------+ +-------------+
| workstation | |    node     |
+-------------+ +-------------+
10.0.0.11       10.0.0.12
</code></pre>
<ul>
<li>chef-server : chef API ã‚’æŒã¤ chef-server ã€‚cookbook, role..ãªã©ã®ãƒ‡ãƒ¼ã‚¿ã‚’æŒã¤</li>
<li>workstation : openstack-chef-repo ã‚’ä½¿ã†ãƒãƒ¼ãƒ‰ã€‚knife ãŒä½¿ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</li>
<li>node        : OpenStack ã‚’æ§‹ç¯‰ã™ã‚‹ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰</li>
</ul>
<h2 id="ç›®æ¬¡">ç›®æ¬¡<a hidden class="anchor" aria-hidden="true" href="#ç›®æ¬¡">#</a></h2>
<ul>
<li>chef-server ã®æ§‹ç¯‰ (BootStrap ä½¿ã†)</li>
<li>openstack-chef-repo ã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™</li>
<li>openstack-chef-repo å®Ÿè¡Œ</li>
</ul>
<h2 id="chef-server-ã®æ§‹ç¯‰">chef-server ã®æ§‹ç¯‰<a hidden class="anchor" aria-hidden="true" href="#chef-server-ã®æ§‹ç¯‰">#</a></h2>
<p>Opscode ã® wiki ã«è¨˜ã•ã‚Œã¦ã„ã‚‹é€šã‚Šãªã®ã§ã™ãŒã€ç°¡å˜ã«æ›¸ã„ã¦ãŠãã¾ã™ã€‚ä»Šå›ã¯
bootstrap æ–¹å¼ã§ç”¨æ„ã—ã¾ã™ã€‚</p>
<p>chef-server ãƒãƒ¼ãƒ‰ã« chef ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚chef-solo ã‚’ç”¨ã„ã‚‹ã‹ã‚‰ã§ã™ã€‚</p>
<pre><code>chef-server# gem install chef
</code></pre>
<p>chef-solo ã‚’ä½¿ã†ãŸã‚ã®è¨­å®šæƒ…å ±ã‚’ /etc/chef/solo.rb ã«è¨˜ã—ã¾ã™ã€‚</p>
<pre><code>chef-server# mkdir /etc/chef
chef-server# ${EDITOR} /etc/chef/solo.rb
file_cache_path &quot;/tmp/chef-solo&quot;
cookbook_path &quot;/tmp/chef-solo/cookbooks&quot;
</code></pre>
<p>chef-solo ã‚’å®Ÿè¡Œã™ã‚‹éš›ã«ä½¿ã† json ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¾ã™ã€‚attribute ã‚’ä¸Šæ›¸ãã™ã‚‹
ã“ã¨ãŒå‡ºæ¥ã¾ã™ã€‚ä»Šå›ã¯ webui ã‚’æœ‰åŠ¹ã«ã—ãŸçŠ¶æ…‹ã«ã—ã¾ã™ã€‚</p>
<pre><code>chef-server# ${EDITOR} ~/chef.json
{
  &quot;chef_server&quot;: {
    &quot;server_url&quot;: &quot;http://localhost:4000&quot;,
    &quot;init_style&quot;: &quot;runit&quot;
  },
  &quot;run_list&quot;: [ &quot;recipe[chef-server::rubygems-install]&quot; ]
}
</code></pre>
<p>bootstrap ã—ã¦ chef-server ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚</p>
<pre><code>chef-server# chef-solo -c /etc/chef/solo.rb -j ~/chef.json -r http://s3.amazonaws.com/chef-solo/bootstrap-latest.tar.gz
</code></pre>
<p>chef-server ãŒå®Œæˆã—ãŸã¯ãšã§ã™ã€‚workstation ã§ knife ã‚’ä½¿ã†ãŸã‚ã« &lsquo;client&rsquo; ã‚’
ä½œã‚Šã¾ã™ã€‚chef 10.x ã§ã¯ user ã§ã¯ãªã client ãŒ knife ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<pre><code>chef-server% mkdir ~/.chef
chef-server% sudo cp /etc/chef/validation.pem ~/.chef/
chef-server% sudo cp /etc/chef/webui.pem ~/.chef/
chef-server% sudo chown &lt;my-username&gt;:&lt;my-group&gt; ~/.chef
</code></pre>
<p>knife ã‚’ä½¿ã†ãŸã‚ã«ä¸‹è¨˜ã®æ“ä½œã‚’è¡Œã„ã¾ã™ã€‚</p>
<pre><code>chef-server% cd ~
chef-server% knife configure -i
Where should I put the config file? [~/.chef/knife.rb]
Please enter the chef server URL: [http://10.0.0.1:4000]
Please enter a clientname for the new client: [jedipunkz]
Please enter the existing admin clientname: [chef-webui]
Please enter the location of the existing admin client's private key:[/etc/chef/webui.pem] /home/jedipunkz/.chef/webui.pem
Please enter the validation clientname: [chef-validator]
Please enter the location of the validation key:[/etc/chef/validation.pem] /home/jedipunkz/.chef/validation.pem
Please enter the path to a chef repository (or leave blank):
Creating initial API user...
Created client[jedipunkz]
Configuration file written to /home/jedipunkz/.chef/knife.rb
</code></pre>
<p>workstaion ãƒãƒ¼ãƒ‰ã§ knife ã‚’æ“ä½œã™ã‚‹ãŸã‚ã® &lsquo;worker&rsquo; client ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<pre><code>chef-server% export EDITOR=vim
chef-server% knife client create worker -a -f worker.pem
chef-server% knife client list
  chef-validator
  chef-webui
  chefserver.example.com
  jedipunkz
  worker
</code></pre>
<h2 id="openstack-chef-repo-ã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™">openstack-chef-repo ã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™<a hidden class="anchor" aria-hidden="true" href="#openstack-chef-repo-ã‚’ä½¿ç”¨ã™ã‚‹æº–å‚™">#</a></h2>
<p>workstation ã§ openstack-chef-repo ã‚’ä½¿ã†ãŸã‚ã®æº–å‚™ã‚’ã—ã¾ã™ã€‚</p>
<p>ã¾ãšã¯ knife ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ä¸‹è¨˜ã®ã‚ˆã†ã« knife.rb ã‚„ pem ã®æ‰‹å…ƒã¸ã®è»¢é€ã‚’è¡Œã„ã¾ã™ã€‚</p>
<pre><code>workstation% gem install chef librarian spiceweasel
workstation% cd ~
workstation% git clone git://github.com/opscode/openstack-chef-repo.git
workstation% cd openstack-chef-repo
workstation% vim .chef/knife.rb
log_level                :info
log_location             STDOUT
node_name                'worker'
client_key               '/home/jedipunkz/openstack-chef-repo/.chef/worker.pem'
validation_client_name   'chef-validator'
validation_key           '/home/jedipunkz/openstack-chef-repo/.chef/validation.pem'
chef_server_url          'http://10.0.0.10:4000'
cache_type               'BasicFile'
cache_options( :path =&gt; '/home/jedipunkz/openstack-chef-repo/.chef/checksums' )
cookbook_path           '/home/jedipunkz/openstack-chef-repo/cookbooks'
workstation% scp 10.0.0.10:~/worker.pem .chef/
workstation% scp 10.0.0.10:~/.chef/validation.pem .chef/
</code></pre>
<p>librarian ã‚’ä½¿ã£ã¦ OpenStack æ§‹ç¯‰ã«å¿…è¦ãª cookbooks ã‚’ãƒ€ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚Cheffile
ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã«ä½•ã‚’ã©ã“ã‹ã‚‰å–å¾—ã™ã‚‹ã®ã‹è¨˜ã•ã‚Œã„ã¦ãã‚Œã«ã—ãŸãŒã£ã¦ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™ã€‚</p>
<pre><code>workstation% libratrian-chef update
</code></pre>
<p>ç’°å¢ƒã«åˆã‚ã›ã¦ production.yml ã‚’ä¿®æ­£ã—ã¾ã™ã€‚ä»Šå›å¿…è¦æœ€ä½é™ã®ç®‡æ‰€ã®ã¿ä¿®æ­£ã—ã¾ã™ã€‚
&ldquo;osops_networks&rdquo; ã¨ã„ã†ç®‡æ‰€ã« nova-network ã«æ¸¡ã™ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æƒ…å ±ãŒã‚ã‚‹ã®ã§ä»Šå›ã®
ç’°å¢ƒ 10.0.0.0/24 ã«ä¿®æ­£ã—ã¾ã™ã€‚å…¨ä½“ã¯ã“ã®ã‚ˆã†ãªå†…å®¹ã«ãªã‚Šã¾ã™ã€‚</p>
<pre><code>workstation% ${EDITOR} production.yml
name &quot;production&quot;
description &quot;Defines the network and database settings you're going to use with OpenStack. The networks will be used in the libraries provided by the osops-utils cookbook. This example is for FlatDHCP with 2 physical networks.&quot;

override_attributes(
  &quot;glance&quot; =&gt; {
    &quot;image_upload&quot; =&gt; true,
    &quot;images&quot; =&gt; [&quot;precise&quot;,&quot;cirros&quot;],
  },
  &quot;mysql&quot; =&gt; {
    &quot;allow_remote_root&quot; =&gt; true,
    &quot;root_network_acl&quot; =&gt; &quot;%&quot;
  },
  &quot;osops_networks&quot; =&gt; {
    &quot;public&quot; =&gt; &quot;10.0.0.0/24&quot;,
    &quot;management&quot; =&gt; &quot;10.0.0.0/24&quot;,
    &quot;nova&quot; =&gt; &quot;10.0.0.0/24&quot;
  },
  &quot;nova&quot; =&gt; {
    &quot;network&quot; =&gt; {
      &quot;fixed_range&quot; =&gt; &quot;192.168.100.0/24&quot;,
      &quot;public_interface&quot; =&gt; &quot;eth0&quot;
    },
    &quot;networks&quot; =&gt; [
      {
        &quot;label&quot; =&gt; &quot;public&quot;,
        &quot;ipv4_cidr&quot; =&gt; &quot;192.168.100.0/24&quot;,
        &quot;num_networks&quot; =&gt; &quot;1&quot;,
        &quot;network_size&quot; =&gt; &quot;255&quot;,
        &quot;bridge&quot; =&gt; &quot;br100&quot;,
        &quot;bridge_dev&quot; =&gt; &quot;eth0&quot;,
        &quot;dns1&quot; =&gt; &quot;8.8.8.8&quot;,
        &quot;dns2&quot; =&gt; &quot;8.8.4.4&quot;
      }
    ]
  }
  )  
</code></pre>
<p>infrastructure.yml ã¨ã„ã† spiceweasel ãŒå‚ç…§ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿®æ­£ã‚’è¡Œã„ã¾ã™ã€‚
cookbooks, roles, environments, data bags, node ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒã‚ã‚Š node
ã®ã¿è¨˜ã•ã‚Œã¦ã„ãªã„ã®ã§ä»Šå›ç”¨æ„ã—ãŸã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒãƒ¼ãƒ‰ã®æƒ…å ±ã‚’è¿½è¨˜ã—ã¾ã™ã€‚</p>
<p>node ã«ã¯äºˆã‚ SSH å…¬é–‹éµã‚’è¨­ç½®ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸä¸‹è¨˜ã¯ root ãƒ¦ãƒ¼ã‚¶ã§ãƒ­ã‚°
ã‚¤ãƒ³ã—ã¦ã„ã¾ã™ãŒã€sudo ã—ã¦ã‚‚ã‚‰ã£ã¦ã‚‚æ§‹ã‚ãªã„ã§ã™ã€‚role ã§æŒ‡å®šã—ãŸ &lsquo;allinone&rsquo;
ã¯ OpenStack ã®å…¨ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä¸€å°ã®ãƒãƒ¼ãƒ‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãŸã‚ã®ã‚‚ã®
ã§ã™ã€‚ã“ã‚Œã‚’ä»–ã® role ä¾‹ãˆã° &lsquo;keystone&rsquo; ç­‰ã‚’æŒ‡å®šã—ã¦è¤‡æ•°ã®ãƒãƒ¼ãƒ‰ã« OpenStack
ã‚’å±•é–‹ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ãªã¯ãšã§ã™ã€‚è©¦ã—ã¦ã„ã¾ã›ã‚“ãŒã€‚</p>
<pre><code>workstation% vim infrastructure.yml
... çœç•¥
nodes:
- 10.0.0.12:
  run_list: role[allinone]
  options: -i ~/.ssh/id_rsa -x root -E production
</code></pre>
<h2 id="openstack-chef-repo-å®Ÿè¡Œ">openstack-chef-repo å®Ÿè¡Œ<a hidden class="anchor" aria-hidden="true" href="#openstack-chef-repo-å®Ÿè¡Œ">#</a></h2>
<p>æº–å‚™ãŒæ•´ã£ãŸã®ã§ spiceweasel ã‚’ä½¿ã£ã¦ knife ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ãƒã‚§ãƒƒã‚¯ã¨å®Ÿè¡Œã‚’ã—ã¦
ã¿ã¾ã™ã€‚å…ˆã»ã©è¿½è¨˜ã—ãŸ infrastructure.yml ã‚’ä½¿ã„ã¾ã™ã€‚</p>
<pre><code>workstation% spiceweasel infrastructure.yml
knife cookbook upload apache2
knife cookbook upload apt
knife cookbook upload aws
knife cookbook upload build-essential
knife cookbook upload ntp
knife cookbook upload openssh
knife cookbook upload openssl
knife cookbook upload postgresql
knife cookbook upload selinux
knife cookbook upload xfs
knife cookbook upload yum
knife cookbook upload erlang
knife cookbook upload mysql
knife cookbook upload rabbitmq
knife cookbook upload database
knife cookbook upload omnibus_updater
knife cookbook upload lxc
knife cookbook upload sysctl
knife cookbook upload osops-utils
knife cookbook upload mysql-openstack
knife cookbook upload rabbitmq-openstack
knife cookbook upload keystone
knife cookbook upload glance
knife cookbook upload nova
knife cookbook upload horizon
knife environment from file production.rb
knife role from file base.rb
knife role from file lxc.rb
knife role from file mysql-master.rb
knife role from file rabbitmq-server.rb
knife role from file keystone.rb
knife role from file glance-api.rb
knife role from file glance-registry.rb
knife role from file glance.rb
knife role from file nova-setup.rb
knife role from file nova-scheduler.rb
knife role from file nova-api-ec2.rb
knife role from file nova-api-os-compute.rb
knife role from file nova-volume.rb
knife role from file nova-vncproxy.rb
knife role from file horizon-server.rb
knife role from file single-controller.rb
knife role from file single-compute.rb
knife role from file allinone.rb
knife bootstrap 10.0.0.12 -i ~/.ssh/id_rsa -x root -E production -r 'role[allinone]'  
</code></pre>
<p>ã“ã®æ“ä½œã§ spiceweasel ã¯ role ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã¨ yml ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿ã€ä¾å­˜é–¢ä¿‚ã‚’
ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ã€‚</p>
<p>ã§ã¯ã„ã‚ˆã„ã‚ˆå®Ÿè¡Œã€‚</p>
<pre><code>workstaion% spiceweasel -e infrastructure.yml
</code></pre>
<p>æ•°åˆ†ã§ OpenStack ç’°å¢ƒãŒæ§‹ç¯‰å‡ºæ¥ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<h2 id="æ‰€æ„Ÿ">æ‰€æ„Ÿ<a hidden class="anchor" aria-hidden="true" href="#æ‰€æ„Ÿ">#</a></h2>
<p>ç¾æ™‚ç‚¹ã§ã¯ã¾ã  essex ãƒ™ãƒ¼ã‚¹ã® OpenStack ã—ã‹æ§‹ç¯‰å‡ºæ¥ãªã„ã€‚folsom ä»¥é™ã«ã¤ã„ã¦
ã¯ç›´ã¡ã«è¡Œã‚ã‚Œã‚‹ã€‚ã¾ãŸå…ˆã«ã‚‚è¨˜ã—ãŸãŒ Opscode ã¨ RackSpace ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒå…±åŒã§
ä½œæ¥­ã«å…¥ã£ãŸã®ã§ä»Šå¾Œã«æœŸå¾…ã€‚è¤‡æ•°ã® OpenStack cookboooks ã‚’è¦‹ã¦ããŸãŒå€‹äººã§é–‹ç™º
ã™ã‚‹ã®ã¯å³ã—ã„ã¨æ„Ÿã˜ã¦ã„ã¾ã™ã€‚fedra, centos, ubuntu, debian &hellip; ã„ã‚ã‚“ãªãƒ—ãƒ©ãƒƒ
ãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’å‰æã«é–‹ç™ºã™ã‚‹ã®ã¯å³ã—ã„&hellip;ã€‚pull request ã™ã‚‹ä½™åŠ›ãŒã‚ã‚Œã°ã‚„ã£ã¦ã¿
ãŸã„ã€‚ã¾ãŸåˆã‚ã›ã¦å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® cookbooks ã«ã¤ã„ã¦ã‚‚åŒæ§˜ã«å‚åŠ ã—ã¦ã„ããŸ
ã„ã€‚</p>
<p>chef ã¯ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§ç¶™ç¶šçš„ã«ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¯èƒ½ã§ã‚ã‚Šã€chef Resources ãŒæˆ‘ã€…
ã®æ“ä½œã‚’æŠ½è±¡åŒ–ã—ã¦ãã‚Œã‚‹ã€‚å°šä¸”ã¤ API ã§é–‹ç™ºã‚‚å®¹æ˜“ã«ãªã‚‹ã€‚å­¦ç¿’ã‚³ã‚¹ãƒˆã¯è‹¥å¹²é«˜ã„
ã—ã€cookbooks ã®é–‹ç™ºã‚‚æ­£ç›´ã—ã‚“ã©ã„ã€‚ã ã‘ã©ã‚¤ãƒ³ãƒ•ãƒ©ã‚’ chef ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹æ„
å‘³ã¯ã¨ã¦ã‚‚å¤§ãã„ã€‚ãã®ä»–ã®ãƒ¡ãƒªãƒƒãƒˆã¨ã—ã¦å±äººçš„ãªæ“ä½œã«ä¾å­˜ã—ãŸã‚·ã‚¹ãƒ†ãƒ ã‚’ç„¡ãã™
ã¨ã„ã†äº‹ã‚‚ã‚ã‚‹ã€‚</p>
<p>OpenStack ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ãƒ‡ãƒ—ãƒ­ã‚¤æ–¹æ³•ã¨ã—ã¦ dodai-deploy ã¨ puppet ãŒæ²è¼‰ã•
ã‚Œã¦ã„ã‚‹ã€‚chef ã¯è¼‰ã£ã¦ã„ãªã„ã€‚ã“ã‚Œã¯ cookbooks ã®é–‹ç™ºãŒé…ã‚Œã¦ã„ã‚‹çŠ¶æ³ãŒç†ç”±ã«
ã‚ã‚‹ã¨æ€ã†ã€‚ä»Šå› Opscode ã®ä¸­ã® Matt Ray ã•ã‚“ã®ä¸‹è¨˜ã®è³‡æ–™</p>
<p><a href="http://www.slideshare.net/mattray/chef-11-previewchef-for-openstack">http://www.slideshare.net/mattray/chef-11-previewchef-for-openstack</a></p>
<p>ã‚’è¦‹ã¦ã€ã“ã‚Œã‹ã‚‰ã«æœŸå¾…ã—ãŸã„ã¨æ„Ÿã˜ãŸã€‚</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://jedipunkz.github.io/post/2013/03/06/pry/">
    <span class="title">Â« Prev</span>
    <br>
    <span>pry ã®ã‚¹ã‚¹ãƒ¡</span>
  </a>
  <a class="next" href="https://jedipunkz.github.io/post/2013/02/01/spiceweasel-knife-bootstrap/">
    <span class="title">Next Â»</span>
    <br>
    <span>Spiceweasel ã§ knife ãƒãƒƒãƒå‡¦ç†</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ on x"
            href="https://x.com/intent/tweet/?text=%e7%ac%ac11%e5%9b%9eOpenStack%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%81%a7%e8%a9%b1%e3%81%97%e3%81%a6%e3%81%8d%e3%81%9f&amp;url=https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f&amp;hashtags=">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f&amp;title=%e7%ac%ac11%e5%9b%9eOpenStack%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%81%a7%e8%a9%b1%e3%81%97%e3%81%a6%e3%81%8d%e3%81%9f&amp;summary=%e7%ac%ac11%e5%9b%9eOpenStack%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%81%a7%e8%a9%b1%e3%81%97%e3%81%a6%e3%81%8d%e3%81%9f&amp;source=https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f&title=%e7%ac%ac11%e5%9b%9eOpenStack%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%81%a7%e8%a9%b1%e3%81%97%e3%81%a6%e3%81%8d%e3%81%9f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ on whatsapp"
            href="https://api.whatsapp.com/send?text=%e7%ac%ac11%e5%9b%9eOpenStack%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%81%a7%e8%a9%b1%e3%81%97%e3%81%a6%e3%81%8d%e3%81%9f%20-%20https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ on telegram"
            href="https://telegram.me/share/url?text=%e7%ac%ac11%e5%9b%9eOpenStack%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%81%a7%e8%a9%b1%e3%81%97%e3%81%a6%e3%81%8d%e3%81%9f&amp;url=https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ç¬¬11å›OpenStackå‹‰å¼·ä¼šã§è©±ã—ã¦ããŸ on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e7%ac%ac11%e5%9b%9eOpenStack%e5%8b%89%e5%bc%b7%e4%bc%9a%e3%81%a7%e8%a9%b1%e3%81%97%e3%81%a6%e3%81%8d%e3%81%9f&u=https%3a%2f%2fjedipunkz.github.io%2fpost%2f2013%2f02%2f10%2fdi-11hui-openstack-study11-openstack-chef-repo%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://jedipunkz.github.io/">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
