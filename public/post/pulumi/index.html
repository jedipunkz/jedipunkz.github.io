<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ | jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</title>
<meta name="keywords" content="">
<meta name="description" content="ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã‚‹ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK Pulumi ã‚’ä½¿ã£ãŸ Kubernetes æ“ä½œ">
<meta name="author" content="jedipunkz">
<link rel="canonical" href="https://jedipunkz.github.io/post/pulumi/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7870d8f9fce407bbb2d51fa13ef155db43e9604862bc816e63896929025b4170.css" integrity="sha256-eHDY&#43;fzkB7uy1R&#43;hPvFV20PpYEhivIFuY4lpKQJbQXA=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jedipunkz.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://jedipunkz.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jedipunkz.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jedipunkz.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://jedipunkz.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://jedipunkz.github.io/post/pulumi/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><link rel="stylesheet" href="/css/custom.css">
<link rel="stylesheet" href="/css/syntax.css">
<style>
 
.post-content code,
.post-content pre code,
.post-content .highlight code,
.post-content .highlighttable code {
    font-size: 1em !important;
}

 
.post-content p code,
.post-content li code,
.post-content td code {
    font-size: 1em !important;
}
</style><script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "\"ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ\"",
  "description": "\"ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã‚‹ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK Pulumi ã‚’ä½¿ã£ãŸ Kubernetes æ“ä½œ\"",
  "datePublished": "2019-11-26T01:27:22\u002b09:00",
  "dateModified": "2019-11-26T01:27:22\u002b09:00",
  "author": {
    "@type": "Person",
    "name": "\"jedipunkz\""
  },
  "publisher": {
    "@type": "Person",
    "name": "\"jedipunkz\"",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/jedipunkz.github.io\/jedipunkz.jpg"
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/jedipunkz.github.io\/post\/pulumi\/"
  }
}
</script>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-2H91XCYVZ8"></script>
      <script>
        var doNotTrack = false;
        if ( true ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-2H91XCYVZ8');
        }
      </script><meta property="og:url" content="https://jedipunkz.github.io/post/pulumi/">
  <meta property="og:site_name" content="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°">
  <meta property="og:title" content="ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ">
  <meta property="og:description" content="ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã‚‹ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK Pulumi ã‚’ä½¿ã£ãŸ Kubernetes æ“ä½œ">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2019-11-26T01:27:22+09:00">
    <meta property="article:modified_time" content="2019-11-26T01:27:22+09:00">
      <meta property="og:image" content="https://jedipunkz.github.io/jedipunkz.jpg">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://jedipunkz.github.io/jedipunkz.jpg">
<meta name="twitter:title" content="ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ">
<meta name="twitter:description" content="ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã‚‹ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK Pulumi ã‚’ä½¿ã£ãŸ Kubernetes æ“ä½œ">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://jedipunkz.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ",
      "item": "https://jedipunkz.github.io/post/pulumi/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ",
  "name": "ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ",
  "description": "ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã‚‹ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK Pulumi ã‚’ä½¿ã£ãŸ Kubernetes æ“ä½œ",
  "keywords": [
    
  ],
  "articleBody": "ã“ã‚“ã«ã¡ã¯ã€‚@jedipunkz ã§ã™ã€‚\nä»Šæ—¥ã¯ Pulumi (https://www.pulumi.com/) ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚\næœ€è¿‘ã§ã¯ã™ã£ã‹ã‚Š Terraform ãŒãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ãª IaC ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦å®šç€ã—ã¾ã—ãŸãŒã€å··ã§ã¯ AWS CDK ã‚’ä½¿ã†ç¾å ´ã‚‚å¢—ãˆã¦ãã¦ã„ã‚‹å°è±¡ã§ã™ã€‚AWS CDK ã¯ Typescript, Python ãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®ä¸­ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ãƒ»æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ AWS ãŒæä¾›ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãŸã  AWS CDK ã¯åå‰ã®é€šã‚Š AWS ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¦å†…éƒ¨çš„ã«ã¯ Cloudformation Template ãŒã‚¨ã‚­ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚AWS ã‚ªãƒ³ãƒªãƒ¼ã¨ã„ã†ç‚¹ã¨ Cloudformation ã¨ã„ã†ç‚¹ã€ã¾ãŸ 2019 å¹´æ™‚ç‚¹ã§é€²åŒ–ãŒæ¿€ã—ãå¾Œæ–¹äº’æ›æ€§ã‚’å…¨ãå¤±ã£ã¦ã„ã‚‹ã®ã§ AWS CDK ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«è¿½å¾“ã™ã‚‹ã®ã«è‹¦åŠ´ã™ã‚‹ç‚¹ã€è‰²ã€…ã‚ã‚Šã¾ã åˆ©ç”¨ã™ã‚‹ã«ã¯æ—©ã„ã®ã‹ãªãã¨ã„ã†å°è±¡ã‚’å€‹äººçš„ã«ã¯æŒã£ã¦ã„ã¾ã™ã€‚\nãã“ã§ä»Šå›ç´¹ä»‹ã™ã‚‹ Pulumi ãªã®ã§ã™ãŒ CDK åŒæ§˜ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®ä¸­ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã¦å°šä¸”ã¤ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨æ—§æ¥ã® SDK ã®åˆ†é¡ã ã¨æ€ã†ã®ã§ã™ãŒã€Terraform åŒæ§˜ã«ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ã¨ã„ã†ç‚¹ã§å€‹äººçš„ã«ã¯ä»¥å‰ã‚ˆã‚Šã‚¦ã‚©ãƒƒãƒã—ã¦ã„ã¾ã—ãŸã€‚\nä»Šå›ã¯å…¬å¼ã® Getting Started çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦ä½œæ¥­ã‚’é€²ã‚ Kubernetes ã®ä¸Šã« Pod ã‚’èµ·å‹•ã€ãã®å¾Œã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿæ–½ã—ã¦ç†è§£ã‚’æ·±ã‚ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚\nä½œæ¥­ã«å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ ä¸‹è¨˜ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ»ãƒ„ãƒ¼ãƒ«ãŒäº‹å‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸ macOS ã‚’å‰æã«æ‰‹é †ã‚’è¨˜ã—ã¾ã™ã€‚\nPython3, Pip Minikube å‚è€ƒ https://www.pulumi.com/docs/get-started/kubernetes/ äº‹å‰æº–å‚™ ã¾ãš macOS ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆ Pulumi ã¯ä¸‹è¨˜ã®é€šã‚Š brew ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚\n$ brew install pulumi ã¾ãŸ minikube ã‚’ä½¿ã£ã¦ kubernetes ã‚’èµ·å‹•ã—ã¾ã™ã€‚\n$ minikube start --memory=4096 --cpus=2 Pulumi ã‚’ä½¿ã£ãŸ Nginx Pod ã®èµ·å‹• æ—©é€Ÿ Nginx Pod ã‚’ Kubernetes æƒ…ã«èµ·å‹•ã™ã‚‹ä½œæ¥­ã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚é©å½“ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ãã®ä¸­ã§ pulumi new ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚\n$ mkdir quickstart \u0026\u0026 cd quickstart $ pulumi new kubernetes-python ä¸‹è¨˜ã®é€šã‚Šå‡ºåŠ›ã•ã‚Œå…¥åŠ›ã‚’ä¿ƒã•ã‚Œã¾ã™ã€‚ä»Šå›ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ãã®ã¾ã¾åˆ©ç”¨ã™ã‚‹ã®ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã‚’æ•°å›å…¥åŠ›ã—ã¾ã™ã€‚\nproject name: (quickstart) project description: (A minimal Kubernetes Python Pulumi program) Created project 'quickstart' Please enter your desired stack name. To create a stack in an organization, use the format / (e.g. `acmecorp/dev`). stack name: (dev) Created stack 'dev' ã™ã‚‹ã¨ __main__.py ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚Kubernetes ä¸Šã« nginx pod ã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã® Python ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚ä¸­èº«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚nginx ã® Deployment ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ãŒç†è§£ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚\nimport pulumi from pulumi_kubernetes.apps.v1 import Deployment app_labels = { \"app\": \"nginx\" } deployment = Deployment( \"nginx\", spec={ \"selector\": { \"match_labels\": app_labels }, \"replicas\": 1, \"template\": { \"metadata\": { \"labels\": app_labels }, \"spec\": { \"containers\": [{ \"name\": \"nginx\", \"image\": \"nginx\" }] } } }) pulumi.export(\"name\", deployment.metadata[\"name\"]) ã“ã“ã§ä»Šå›ã¯ Python ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ pip ã‚’ä½¿ã£ã¦ Pulumi Module ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ requirements.txt ãŒã‚ã‚Šã¾ã™ã®ã§ãã‚Œã«å¾“ã£ã¦ pip install ã—ã¾ã™ã€‚\n$ pip install -r requirements.txt ãã‚Œã§ã¯ä¸‹è¨˜ã®é€šã‚Š pulumi up ã‚’å®Ÿè¡Œã— Nginx Pod ã‚’èµ·å‹•ã—ã¦ã„ã¾ã—ã‚‡ã†ã€‚\n$ pulumi up Previewing update (dev): Type Name Plan + pulumi:pulumi:Stack quickstart-dev create + â””â”€ kubernetes:apps:Deployment nginx create Resources: + 2 to create Do you want to perform this update? \u003e yes no details çµæœã¨ã—ã¦ä¸‹è¨˜ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ â€˜createdâ€™ ã¨ãªã‚Šã¾ã—ãŸã€‚\nType Name Status + pulumi:pulumi:Stack quickstart-dev created + â””â”€ kubernetes:apps:Deployment nginx created Outputs: name: \"nginx-td4rq3xr\" Resources: + 2 created Duration: 14s Permalink: https://app.pulumi.com/jedipunkz/quickstart/dev/updates/1 kubectl ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ç¢ºèªã—ã¦ã„ã¾ã—ã‚‡ã†ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã« nginx-**** pod ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚\n$ kubectl get pod NAME READY STATUS RESTARTS AGE nginx-td4rq3xr-86c57db685-nfblb 1/1 Running 0 46m __main__.py ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦å¤–éƒ¨ã‹ã‚‰ Nginx ã«ã‚¢ã‚¯ã‚»ã‚¹ æ¬¡ã« __main__.py ã‚’ä¸‹è¨˜ã®é€šã‚Šä¿®æ­£ã—ã¦ Nginx Pod ã« curl ã‚’ä½¿ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã™ã€‚ ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ minikube ã‹å¦ã‹ã«ã¤ã„ã¦ã® Config pulumi.Config() ã«é–¢ã™ã‚‹è¨˜è¿°ã¨ Deployment ã« IP ã‚’ç¢ºä¿ã™ã‚‹è¨˜è¿°ãŒã‚ã‚Šã¾ã™ã€‚\nimport pulumi from pulumi_kubernetes.apps.v1 import Deployment from pulumi_kubernetes.core.v1 import Service # Minikube does not implement services of type `LoadBalancer`; require the user to specify if we're # running on minikube, and if so, create only services of type ClusterIP. config = pulumi.Config() is_minikube = config.require_bool(\"isMinikube\") app_name = \"nginx\" app_labels = { \"app\": app_name } deployment = Deployment( app_name, spec={ \"selector\": { \"match_labels\": app_labels }, \"replicas\": 1, \"template\": { \"metadata\": { \"labels\": app_labels }, \"spec\": { \"containers\": [{ \"name\": app_name, \"image\": \"nginx\" }] } } }) # Allocate an IP to the Deployment. frontend = Service( app_name, metadata={ \"labels\": deployment.spec[\"template\"][\"metadata\"][\"labels\"], }, spec={ \"type\": \"ClusterIP\" if is_minikube else \"LoadBalancer\", \"ports\": [{ \"port\": 80, \"target_port\": 80, \"protocol\": \"TCP\" }], \"selector\": app_labels, }) # When \"done\", this will print the public IP. if is_minikube: pulumi.export(\"ip\", frontend.spec.apply(lambda v: v[\"cluster_ip\"] if \"cluster_ip\" in v else None)) else: pulumi.export(\"ip\", frontend.status.apply(lambda v: v[\"load_balancer\"][\"ingress\"][0][\"ip\"] if \"load_balancer\" in v else None)) ä¿®æ­£ãŒçµ‚ã‚ã£ãŸã‚‰ä¸‹è¨˜ã®é€šã‚Šå¤‰æ•° isMinikube ã« true ã‚’è¨­å®šã—ã¦ã€å…ˆã»ã©ã¨åŒæ§˜ã« pulumi up ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚\n$ pulumi config set isMinikube true $ pulumi up æ¬¡ã«ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã— Pods ã«ä»˜ä¸ã•ã‚ŒãŸ IP Addr ã‚’èª¿ã¹ã¾ã™ã€‚\n$ pulumi stack output ip æœ€å¾Œã« minikube ã®ãƒãƒ¼ãƒ‰ã«ãƒ­ã‚°ã‚¤ãƒ³ã— curl ã‚’ä½¿ã£ã¦å…ˆã»ã©èª¿ã¹ãŸ IP Addr å®›ã« curl ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚\n$ minikube ssh $ curl 10.108.14.27 \u003c!DOCTYPE html\u003e Welcome to nginx! Welcome to nginx! If you see this page, the nginx web server is successfully installed and working. Further configuration is required.\nFor online documentation and support please refer to ",
  "wordCount" : "633",
  "inLanguage": "en",
  "image": "https://jedipunkz.github.io/jedipunkz.jpg","datePublished": "2019-11-26T01:27:22+09:00",
  "dateModified": "2019-11-26T01:27:22+09:00",
  "author":{
    "@type": "Person",
    "name": "jedipunkz"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://jedipunkz.github.io/post/pulumi/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°",
    "logo": {
      "@type": "ImageObject",
      "url": "https://jedipunkz.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jedipunkz.github.io/" accesskey="h" title="jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚° (Alt + H)">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jedipunkz.github.io/about" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://jedipunkz.github.io/">Home</a>&nbsp;Â»&nbsp;<a href="https://jedipunkz.github.io/post/">Posts</a></div>
    <h1 class="post-title">
      ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ
    </h1>
    <div class="post-description">
      ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã‚‹ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK Pulumi ã‚’ä½¿ã£ãŸ Kubernetes æ“ä½œ
    </div>
    
  </header> 
  <div class="post-content"><p>ã“ã‚“ã«ã¡ã¯ã€‚@jedipunkz ã§ã™ã€‚</p>
<p>ä»Šæ—¥ã¯ Pulumi (<a href="https://www.pulumi.com/">https://www.pulumi.com/</a>) ã«ã¤ã„ã¦ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
<p>æœ€è¿‘ã§ã¯ã™ã£ã‹ã‚Š Terraform ãŒãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ãª IaC ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦å®šç€ã—ã¾ã—ãŸãŒã€å··ã§ã¯ AWS CDK ã‚’ä½¿ã†ç¾å ´ã‚‚å¢—ãˆã¦ãã¦ã„ã‚‹å°è±¡ã§ã™ã€‚AWS CDK ã¯ Typescript, Python ãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®ä¸­ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ãƒ»æ“ä½œã™ã‚‹ã“ã¨ãŒã§ãã‚‹ AWS ãŒæä¾›ã—ã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãŸã  AWS CDK ã¯åå‰ã®é€šã‚Š AWS ã«ã®ã¿å¯¾å¿œã—ã¦ã„ã¦å†…éƒ¨çš„ã«ã¯ Cloudformation Template ãŒã‚¨ã‚­ã‚¹ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚AWS ã‚ªãƒ³ãƒªãƒ¼ã¨ã„ã†ç‚¹ã¨ Cloudformation ã¨ã„ã†ç‚¹ã€ã¾ãŸ 2019 å¹´æ™‚ç‚¹ã§é€²åŒ–ãŒæ¿€ã—ãå¾Œæ–¹äº’æ›æ€§ã‚’å…¨ãå¤±ã£ã¦ã„ã‚‹ã®ã§ AWS CDK ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«è¿½å¾“ã™ã‚‹ã®ã«è‹¦åŠ´ã™ã‚‹ç‚¹ã€è‰²ã€…ã‚ã‚Šã¾ã åˆ©ç”¨ã™ã‚‹ã«ã¯æ—©ã„ã®ã‹ãªãã¨ã„ã†å°è±¡ã‚’å€‹äººçš„ã«ã¯æŒã£ã¦ã„ã¾ã™ã€‚</p>
<p>ãã“ã§ä»Šå›ç´¹ä»‹ã™ã‚‹ Pulumi ãªã®ã§ã™ãŒ CDK åŒæ§˜ã«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®ä¸­ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã§ãã¦å°šä¸”ã¤ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚ã©ã¡ã‚‰ã‹ã¨ã„ã†ã¨æ—§æ¥ã® SDK ã®åˆ†é¡ã ã¨æ€ã†ã®ã§ã™ãŒã€Terraform åŒæ§˜ã«ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ã¨ã„ã†ç‚¹ã§å€‹äººçš„ã«ã¯ä»¥å‰ã‚ˆã‚Šã‚¦ã‚©ãƒƒãƒã—ã¦ã„ã¾ã—ãŸã€‚</p>
<p>ä»Šå›ã¯å…¬å¼ã® Getting Started çš„ãªãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«å¾“ã£ã¦ä½œæ¥­ã‚’é€²ã‚ Kubernetes ã®ä¸Šã« Pod ã‚’èµ·å‹•ã€ãã®å¾Œã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å®Ÿæ–½ã—ã¦ç†è§£ã‚’æ·±ã‚ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
<h2 id="ä½œæ¥­ã«å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢">ä½œæ¥­ã«å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢<a hidden class="anchor" aria-hidden="true" href="#ä½œæ¥­ã«å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢">#</a></h2>
<p>ä¸‹è¨˜ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ãƒ»ãƒ„ãƒ¼ãƒ«ãŒäº‹å‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’å‰æã¨ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ã¾ãŸ macOS ã‚’å‰æã«æ‰‹é †ã‚’è¨˜ã—ã¾ã™ã€‚</p>
<ul>
<li>Python3, Pip</li>
<li>Minikube</li>
</ul>
<h2 id="å‚è€ƒ">å‚è€ƒ<a hidden class="anchor" aria-hidden="true" href="#å‚è€ƒ">#</a></h2>
<ul>
<li><a href="https://www.pulumi.com/docs/get-started/kubernetes/">https://www.pulumi.com/docs/get-started/kubernetes/</a></li>
</ul>
<h2 id="äº‹å‰æº–å‚™">äº‹å‰æº–å‚™<a hidden class="anchor" aria-hidden="true" href="#äº‹å‰æº–å‚™">#</a></h2>
<p>ã¾ãš macOS ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆ Pulumi ã¯ä¸‹è¨˜ã®é€šã‚Š brew ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ brew install pulumi
</span></span></code></pre></div><p>ã¾ãŸ minikube ã‚’ä½¿ã£ã¦ kubernetes ã‚’èµ·å‹•ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ minikube start --memory<span class="o">=</span><span class="m">4096</span> --cpus<span class="o">=</span><span class="m">2</span>
</span></span></code></pre></div><h2 id="pulumi-ã‚’ä½¿ã£ãŸ-nginx-pod-ã®èµ·å‹•">Pulumi ã‚’ä½¿ã£ãŸ Nginx Pod ã®èµ·å‹•<a hidden class="anchor" aria-hidden="true" href="#pulumi-ã‚’ä½¿ã£ãŸ-nginx-pod-ã®èµ·å‹•">#</a></h2>
<p>æ—©é€Ÿ Nginx Pod ã‚’ Kubernetes æƒ…ã«èµ·å‹•ã™ã‚‹ä½œæ¥­ã‚’è¡Œã£ã¦ã¿ã¾ã™ã€‚é©å½“ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ãã®ä¸­ã§ <code>pulumi new</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ mkdir quickstart <span class="o">&amp;&amp;</span> <span class="nb">cd</span> quickstart
</span></span><span class="line"><span class="cl">$ pulumi new kubernetes-python
</span></span></code></pre></div><p>ä¸‹è¨˜ã®é€šã‚Šå‡ºåŠ›ã•ã‚Œå…¥åŠ›ã‚’ä¿ƒã•ã‚Œã¾ã™ã€‚ä»Šå›ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ãã®ã¾ã¾åˆ©ç”¨ã™ã‚‹ã®ã§ã‚¨ãƒ³ã‚¿ãƒ¼ã‚’æ•°å›å…¥åŠ›ã—ã¾ã™ã€‚</p>
<pre tabindex="0"><code>project name: (quickstart)
project description: (A minimal Kubernetes Python Pulumi program)
Created project &#39;quickstart&#39;

Please enter your desired stack name.
To create a stack in an organization, use the format &lt;org-name&gt;/&lt;stack-name&gt; (e.g. `acmecorp/dev`).
stack name: (dev)
Created stack &#39;dev&#39;
</code></pre><p>ã™ã‚‹ã¨ <code>__main__.py</code> ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚Kubernetes ä¸Šã« nginx pod ã‚’èµ·å‹•ã™ã‚‹ãŸã‚ã® Python ã‚³ãƒ¼ãƒ‰ã§ã™ã€‚ä¸­èº«ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚<code>nginx</code> ã® Deployment ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ãŒç†è§£ã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pulumi</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pulumi_kubernetes.apps.v1</span> <span class="kn">import</span> <span class="n">Deployment</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">app_labels</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;app&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">deployment</span> <span class="o">=</span> <span class="n">Deployment</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;nginx&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">spec</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;selector&#34;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&#34;match_labels&#34;</span><span class="p">:</span> <span class="n">app_labels</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;replicas&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;template&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;metadata&#34;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&#34;labels&#34;</span><span class="p">:</span> <span class="n">app_labels</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;spec&#34;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&#34;containers&#34;</span><span class="p">:</span> <span class="p">[{</span> <span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx&#34;</span><span class="p">,</span> <span class="s2">&#34;image&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx&#34;</span> <span class="p">}]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">pulumi</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s2">&#34;name&#34;</span><span class="p">,</span> <span class="n">deployment</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s2">&#34;name&#34;</span><span class="p">])</span>
</span></span></code></pre></div><p>ã“ã“ã§ä»Šå›ã¯ Python ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ <code>pip</code> ã‚’ä½¿ã£ã¦ Pulumi Module ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚åŒã˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸ requirements.txt ãŒã‚ã‚Šã¾ã™ã®ã§ãã‚Œã«å¾“ã£ã¦ <code>pip install</code> ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ pip install -r requirements.txt
</span></span></code></pre></div><p>ãã‚Œã§ã¯ä¸‹è¨˜ã®é€šã‚Š <code>pulumi up</code> ã‚’å®Ÿè¡Œã— Nginx Pod ã‚’èµ·å‹•ã—ã¦ã„ã¾ã—ã‚‡ã†ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ pulumi up
</span></span><span class="line"><span class="cl">Previewing update <span class="o">(</span>dev<span class="o">)</span>:
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">     Type                           Name            Plan
</span></span><span class="line"><span class="cl"> +   pulumi:pulumi:Stack            quickstart-dev  create
</span></span><span class="line"><span class="cl"> +   â””â”€ kubernetes:apps:Deployment  nginx           create
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Resources:
</span></span><span class="line"><span class="cl">    + <span class="m">2</span> to create
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Do you want to perform this update?
</span></span><span class="line"><span class="cl">&gt; yes
</span></span><span class="line"><span class="cl">  no
</span></span><span class="line"><span class="cl">  details
</span></span></code></pre></div><p>çµæœã¨ã—ã¦ä¸‹è¨˜ã®ã‚ˆã†ã«å‡ºåŠ›ã•ã‚Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ &lsquo;created&rsquo; ã¨ãªã‚Šã¾ã—ãŸã€‚</p>
<pre tabindex="0"><code>     Type                           Name            Status
 +   pulumi:pulumi:Stack            quickstart-dev  created
 +   â””â”€ kubernetes:apps:Deployment  nginx           created

Outputs:
    name: &#34;nginx-td4rq3xr&#34;

Resources:
    + 2 created

Duration: 14s

Permalink: https://app.pulumi.com/jedipunkz/quickstart/dev/updates/1
</code></pre><p><code>kubectl</code> ã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ç¢ºèªã—ã¦ã„ã¾ã—ã‚‡ã†ã€‚ä¸‹è¨˜ã®ã‚ˆã†ã« <code>nginx-****</code> pod ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ kubectl get pod
</span></span><span class="line"><span class="cl">NAME                              READY   STATUS    RESTARTS   AGE
</span></span><span class="line"><span class="cl">nginx-td4rq3xr-86c57db685-nfblb   1/1     Running   <span class="m">0</span>          46m
</span></span></code></pre></div><h2 id="__main__py-ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦å¤–éƒ¨ã‹ã‚‰-nginx-ã«ã‚¢ã‚¯ã‚»ã‚¹"><code>__main__.py</code> ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦å¤–éƒ¨ã‹ã‚‰ Nginx ã«ã‚¢ã‚¯ã‚»ã‚¹<a hidden class="anchor" aria-hidden="true" href="#__main__py-ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ã¦å¤–éƒ¨ã‹ã‚‰-nginx-ã«ã‚¢ã‚¯ã‚»ã‚¹">#</a></h2>
<p>æ¬¡ã« <code>__main__.py</code> ã‚’ä¸‹è¨˜ã®é€šã‚Šä¿®æ­£ã—ã¦ Nginx Pod ã« curl ã‚’ä½¿ã£ã¦ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã¾ã™ã€‚
ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ minikube ã‹å¦ã‹ã«ã¤ã„ã¦ã® Config <code>pulumi.Config()</code> ã«é–¢ã™ã‚‹è¨˜è¿°ã¨ Deployment ã« IP ã‚’ç¢ºä¿ã™ã‚‹è¨˜è¿°ãŒã‚ã‚Šã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pulumi</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pulumi_kubernetes.apps.v1</span> <span class="kn">import</span> <span class="n">Deployment</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">pulumi_kubernetes.core.v1</span> <span class="kn">import</span> <span class="n">Service</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Minikube does not implement services of type `LoadBalancer`; require the user to specify if we&#39;re</span>
</span></span><span class="line"><span class="cl"><span class="c1"># running on minikube, and if so, create only services of type ClusterIP.</span>
</span></span><span class="line"><span class="cl"><span class="n">config</span> <span class="o">=</span> <span class="n">pulumi</span><span class="o">.</span><span class="n">Config</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">is_minikube</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">require_bool</span><span class="p">(</span><span class="s2">&#34;isMinikube&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">app_name</span> <span class="o">=</span> <span class="s2">&#34;nginx&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">app_labels</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;app&#34;</span><span class="p">:</span> <span class="n">app_name</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">deployment</span> <span class="o">=</span> <span class="n">Deployment</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">app_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">spec</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;selector&#34;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&#34;match_labels&#34;</span><span class="p">:</span> <span class="n">app_labels</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;replicas&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;template&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;metadata&#34;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&#34;labels&#34;</span><span class="p">:</span> <span class="n">app_labels</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;spec&#34;</span><span class="p">:</span> <span class="p">{</span> <span class="s2">&#34;containers&#34;</span><span class="p">:</span> <span class="p">[{</span> <span class="s2">&#34;name&#34;</span><span class="p">:</span> <span class="n">app_name</span><span class="p">,</span> <span class="s2">&#34;image&#34;</span><span class="p">:</span> <span class="s2">&#34;nginx&#34;</span> <span class="p">}]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># Allocate an IP to the Deployment.</span>
</span></span><span class="line"><span class="cl"><span class="n">frontend</span> <span class="o">=</span> <span class="n">Service</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">app_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">metadata</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;labels&#34;</span><span class="p">:</span> <span class="n">deployment</span><span class="o">.</span><span class="n">spec</span><span class="p">[</span><span class="s2">&#34;template&#34;</span><span class="p">][</span><span class="s2">&#34;metadata&#34;</span><span class="p">][</span><span class="s2">&#34;labels&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="n">spec</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;type&#34;</span><span class="p">:</span> <span class="s2">&#34;ClusterIP&#34;</span> <span class="k">if</span> <span class="n">is_minikube</span> <span class="k">else</span> <span class="s2">&#34;LoadBalancer&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;ports&#34;</span><span class="p">:</span> <span class="p">[{</span> <span class="s2">&#34;port&#34;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s2">&#34;target_port&#34;</span><span class="p">:</span> <span class="mi">80</span><span class="p">,</span> <span class="s2">&#34;protocol&#34;</span><span class="p">:</span> <span class="s2">&#34;TCP&#34;</span> <span class="p">}],</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;selector&#34;</span><span class="p">:</span> <span class="n">app_labels</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># When &#34;done&#34;, this will print the public IP.</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="n">is_minikube</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">pulumi</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s2">&#34;ip&#34;</span><span class="p">,</span> <span class="n">frontend</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&#34;cluster_ip&#34;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&#34;cluster_ip&#34;</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">else</span> <span class="kc">None</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"><span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">pulumi</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s2">&#34;ip&#34;</span><span class="p">,</span> <span class="n">frontend</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s2">&#34;load_balancer&#34;</span><span class="p">][</span><span class="s2">&#34;ingress&#34;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;ip&#34;</span><span class="p">]</span> <span class="k">if</span> <span class="s2">&#34;load_balancer&#34;</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">else</span> <span class="kc">None</span><span class="p">))</span>
</span></span></code></pre></div><p>ä¿®æ­£ãŒçµ‚ã‚ã£ãŸã‚‰ä¸‹è¨˜ã®é€šã‚Šå¤‰æ•° <code>isMinikube</code> ã« true ã‚’è¨­å®šã—ã¦ã€å…ˆã»ã©ã¨åŒæ§˜ã« <code>pulumi up</code> ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ pulumi config <span class="nb">set</span> isMinikube <span class="nb">true</span>
</span></span><span class="line"><span class="cl">$ pulumi up
</span></span></code></pre></div><p>æ¬¡ã«ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã— Pods ã«ä»˜ä¸ã•ã‚ŒãŸ IP Addr ã‚’èª¿ã¹ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ pulumi stack output ip
</span></span></code></pre></div><p>æœ€å¾Œã« minikube ã®ãƒãƒ¼ãƒ‰ã«ãƒ­ã‚°ã‚¤ãƒ³ã— curl ã‚’ä½¿ã£ã¦å…ˆã»ã©èª¿ã¹ãŸ IP Addr å®›ã« curl ã§ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ minikube ssh
</span></span><span class="line"><span class="cl">$ curl 10.108.14.27
</span></span><span class="line"><span class="cl">&lt;!DOCTYPE html&gt;
</span></span><span class="line"><span class="cl">&lt;html&gt;
</span></span><span class="line"><span class="cl">&lt;head&gt;
</span></span><span class="line"><span class="cl">&lt;title&gt;Welcome to nginx!&lt;/title&gt;
</span></span><span class="line"><span class="cl">&lt;style&gt;
</span></span><span class="line"><span class="cl">    body <span class="o">{</span>
</span></span><span class="line"><span class="cl">        width: 35em<span class="p">;</span>
</span></span><span class="line"><span class="cl">        margin: <span class="m">0</span> auto<span class="p">;</span>
</span></span><span class="line"><span class="cl">        font-family: Tahoma, Verdana, Arial, sans-serif<span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">&lt;/style&gt;
</span></span><span class="line"><span class="cl">&lt;/head&gt;
</span></span><span class="line"><span class="cl">&lt;body&gt;
</span></span><span class="line"><span class="cl">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
</span></span><span class="line"><span class="cl">&lt;p&gt;If you see this page, the nginx web server is successfully installed and
</span></span><span class="line"><span class="cl">working. Further configuration is required.&lt;/p&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;p&gt;For online documentation and support please refer to
</span></span><span class="line"><span class="cl">&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;http://nginx.org/&#34;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
</span></span><span class="line"><span class="cl">Commercial support is available at
</span></span><span class="line"><span class="cl">&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;http://nginx.com/&#34;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;p&gt;&lt;em&gt;Thank you <span class="k">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
</span></span><span class="line"><span class="cl">&lt;/body&gt;
</span></span><span class="line"><span class="cl">&lt;/html&gt;
</span></span></code></pre></div><p>nginx ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒå¿œç­”ã‚ã£ãŸã“ã¨ã‚’ç¢ºèªå‡ºæ¥ã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚<a hidden class="anchor" aria-hidden="true" href="#ã¾ã¨ã‚">#</a></h2>
<p>Python ã‚³ãƒ¼ãƒ‰ã®ä¸­ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚’å®šç¾©ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚ä»Šå›ã¯ Kubernetes ã§è©¦ã—ã¾ã—ãŸãŒ AWS ã‚„ GCP ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚åŒæ§˜ã®ã“ã¨ã‚’ AWS SDK ã§ã‚‚è‡ªåˆ†ã¯ä»Šã¾ã§è¡Œã£ã¦ãã¾ã—ãŸãŒå‰è¿°ã—ãŸé€šã‚Šãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ã¨ã„ã†ç‚¹ãŒå„ªä½æ€§ã‚ã‚‹ã®ã‹ãªãã¨ã„ã†å°è±¡ã§ã™ã€‚ãŸã ã€ã‚¯ãƒ©ã‚¦ãƒ‰å´ã‚‚å¸¸ã«é€²åŒ–ã—ã¦ã„ã¦ã€ãã‚Œã‚‰ã« Pulumi ãŒè¿½å¾“ã—ç¶šã‘ã‚‰ã‚Œã‚‹ã®ã‹ä¸å®‰ãªç‚¹ã‚‚æ„Ÿã˜ã¾ã™ã€‚ãã®ç‚¹ã§ã¯ã‚„ã¯ã‚Š AWS ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã«ã¨ã£ã¦ã¯ AWS SDK ãŒãƒ™ã‚¹ãƒˆãªé¸æŠã¨ä»Šæ™‚ç‚¹ã§ã¯è¨€ã‚ã–ã‚‹ã‚’å¾—ã¾ã›ã‚“ã€‚ã¾ãŸ Pulumi ã¨ã„ã†ä¼æ¥­è‡ªä½“ãŒå®‰å®šã—ã¦ã„ã‚‹ã®ã‹ã€è²·åã•ã‚ŒãŸã‚Šã—ãªã„ã®ã‹ã¨ã„ã†ä¸å®‰ã‚‚ä»˜ãçºã„ã¾ã™ã€‚</p>
<p>SDK ã®åˆ©ç”¨ã¯ DevOpsãƒ»SRE çš„ã«æ¥­å‹™ã‚’è¡Œã†ã®ã§ã‚ã‚Œã°è‡ªå‹•åŒ–ã‚’æ¨é€²ã™ã‚‹ã«ã‚ãŸã‚Šå¿…é ˆã¨ã‚‚è¨€ãˆã‚‹æŠ€è¡“ã§ã‚ã‚‹ã¨è¨€ãˆã¾ã™ã€‚å€‹äººçš„ã«ã¯ã“ã‚Œã¯ã‚¤ãƒ³ãƒ•ãƒ©ã‚’æ§‹ç¯‰ãƒ»ç®¡ç†ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã¨ã—ã¦ã® Terraform ã¨ã¯ç«‹ã¡ä½ç½®ãŒè‹¥å¹²ç•°ãªã‚‹ã¨ã„ã†èªè­˜ã§ã„ã¾ã™ã€‚ãã‚Œã«å¯¾ã—ã¦ CDK ã¯ã©ã†ã„ã†ç«‹ã¡ä½ç½®ã«ãªã‚‹ã®ã‹ã€‚ä»Šå›ç´¹ä»‹ã—ãŸ Pulumi ãŒ SDK ã¨ã—ã¦ã®ãƒ‡ãƒ•ã‚¡ã‚¯ãƒˆã«ã®ã—ã‚ãŒã‚‹ã®ã‹ã„ãªã‹ã€‚DevOpsãƒ»SRE ç•Œéšˆã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãŒç”¨ã„ã‚‹æŠ€è¡“ã‚‚ã“ã‚Œã‹ã‚‰æ›´ã«å¤‰åŒ–ã—ã¦ã„ããã†ãªæ°—ãŒã—ã¾ã™ã—ã€ãã®éç¨‹ã®ä¸­ã§ Pulumi ã‚’çŸ¥ã£ã¦é ‚ãã®ã¯è‰¯ã„ã“ã¨ã ã¨æ€ã„ã¾ã™ã€‚</p>


  </div>

  <footer class="post-footer">
<nav class="paginav">
  <a class="prev" href="https://jedipunkz.github.io/post/eks-fargate-bot-env/">
    <span class="title">Â« Prev</span>
    <br>
    <span>EKS/Fargate &#43; ArgoCD ã§ãƒœãƒƒãƒˆç’°å¢ƒ GitOps åŒ–</span>
  </a>
  <a class="next" href="https://jedipunkz.github.io/post/ecs/">
    <span class="title">Next Â»</span>
    <br>
    <span>ECS ã®æ§‹æˆã¨ Terraform ã‚³ãƒ¼ãƒ‰åŒ–ã™ã‚‹éš›ã®æ§‹é€ åŒ–ã«ã¤ã„ã¦</span>
  </a>
</nav>


<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ on x"
            href="https://x.com/intent/tweet/?text=%e3%83%9e%e3%83%ab%e3%83%81%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e5%af%be%e5%bf%9c%20SDK%20%e3%81%ae%20Pulumi%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%20Kubernetes%20%e3%82%92%e6%93%8d%e4%bd%9c&amp;url=https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f&amp;hashtags=">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f&amp;title=%e3%83%9e%e3%83%ab%e3%83%81%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e5%af%be%e5%bf%9c%20SDK%20%e3%81%ae%20Pulumi%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%20Kubernetes%20%e3%82%92%e6%93%8d%e4%bd%9c&amp;summary=%e3%83%9e%e3%83%ab%e3%83%81%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e5%af%be%e5%bf%9c%20SDK%20%e3%81%ae%20Pulumi%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%20Kubernetes%20%e3%82%92%e6%93%8d%e4%bd%9c&amp;source=https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ on reddit"
            href="https://reddit.com/submit?url=https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f&title=%e3%83%9e%e3%83%ab%e3%83%81%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e5%af%be%e5%bf%9c%20SDK%20%e3%81%ae%20Pulumi%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%20Kubernetes%20%e3%82%92%e6%93%8d%e4%bd%9c">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ on facebook"
            href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ on whatsapp"
            href="https://api.whatsapp.com/send?text=%e3%83%9e%e3%83%ab%e3%83%81%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e5%af%be%e5%bf%9c%20SDK%20%e3%81%ae%20Pulumi%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%20Kubernetes%20%e3%82%92%e6%93%8d%e4%bd%9c%20-%20https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ on telegram"
            href="https://telegram.me/share/url?text=%e3%83%9e%e3%83%ab%e3%83%81%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e5%af%be%e5%bf%9c%20SDK%20%e3%81%ae%20Pulumi%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%20Kubernetes%20%e3%82%92%e6%93%8d%e4%bd%9c&amp;url=https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share ãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰å¯¾å¿œ SDK ã® Pulumi ã‚’ä½¿ã£ã¦ Kubernetes ã‚’æ“ä½œ on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=%e3%83%9e%e3%83%ab%e3%83%81%e3%82%af%e3%83%a9%e3%82%a6%e3%83%89%e5%af%be%e5%bf%9c%20SDK%20%e3%81%ae%20Pulumi%20%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%20Kubernetes%20%e3%82%92%e6%93%8d%e4%bd%9c&u=https%3a%2f%2fjedipunkz.github.io%2fpost%2fpulumi%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://jedipunkz.github.io/">jedipunkz ğŸš€ ã®ãƒ–ãƒ­ã‚°</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
