<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>jedipunkz 🚀 のブログ</title>

<meta name="description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="https://jedipunkz.github.io/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.3ee8503a5e4652ff8c44c6ca20ea063c510259d67dab9cb99eb4c969bccfc06d.css" integrity="sha256-PuhQOl5GUv&#43;MRMbKIOoGPFECWdZ9q5y5nrTJabzPwG0=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://jedipunkz.github.io/pix/jedipunkz.jpg">
<link rel="icon" type="image/png" sizes="16x16" href="https://jedipunkz.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://jedipunkz.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://jedipunkz.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://jedipunkz.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.121.2">
<link rel="alternate" type="application/rss+xml" href="https://jedipunkz.github.io/index.xml">
<link rel="alternate" type="application/json" href="https://jedipunkz.github.io/index.json">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-30563095-1', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="jedipunkz 🚀 のブログ" />
<meta property="og:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://jedipunkz.github.io/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="jedipunkz 🚀 のブログ"/>
<meta name="twitter:description" content="Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod"/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "jedipunkz 🚀 のブログ",
  "url": "https://jedipunkz.github.io",
  "description": "Theme PaperMod - https://github.com/adityatelange/hugo-PaperMod",
  "thumbnailUrl": "https://jedipunkz.github.io/pix/jedipunkz.jpg",
  "sameAs": [
      "http://twitter.com/jedipunkz", "https://github.com/jedipunkz"
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://jedipunkz.github.io" accesskey="h" title="jedipunkz 🚀 のブログ (Alt + H)">jedipunkz 🚀 のブログ</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://jedipunkz.github.io/about" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="post-entry"> 
  <header class="entry-header">
    <h2>OpenStack nova-network IPv6 対応
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です
今更なのかもしれませんが、OpenStack の nova-network を IPv6 対応する方法を調べ てみました。何故 nova-network なのか? 自宅の構成が nova-network だからです..。 以前は Quantum (現 Neutron) 構成で使っていましたが、ノードをコントローラとコン ピュートに別けた時に NIC が足らなくなり…。
さて本題です。下記のサイトを参考にしました。ほぼそのままの手順ですが、自分のた めにもメモです。
参考 URL http://docs.openstack.org/grizzly/openstack-compute/admin/content/configuring-compute-to-use-ipv6-addresses.html
前提 OpenStack の構成は予め構築されている nova-network を用いている 構成はオールインワンでも複数台構成でも可能 手順 nova がインストールされているすべてのノードで python-netaddr をインストールし ます。私の場合は rcbops の chef cookbooks で構築したのですが、既にインストール されていました。
% sudo apt-get install python-netaddr nova-network が稼働しているノードで radvd をインストールします。これは IPv6 を Advertise しているルータ等が予め備わっている環境であっても、インストー ルする必要があります。また /etc/radvd.conf が初め無いので radvd 単体では稼働し ませんが、問題ありません。OpenStack の場合 /var/lib/nova 配下のコンフィギュレー ションファイルを読み込んでくれます。
% sudo apt-get install radvd /etc/sysctl....</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-08-18 00:00:00 &#43;0000 UTC&#39;&gt;August 18, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;1 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to OpenStack nova-network IPv6 対応" href="https://jedipunkz.github.io/post/2013/08/18/openstack-nova-network-ipv6/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>rcbops Cookbooks で Neutron 構成 OpenStack
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
rcbops Cookbooks で Neutron 構成の OpenStack をデプロイする方法を書きたいと思 います。先日紹介した openstack-chef-repo にも Neutron のレシピが含まれているの ですが、まだまだ未完成で手作業をおりまぜながらのデプロイになっていまうので、今 現在のところ Neutron 構成を組みたいのであればこの rcbops の Cookbooks を用いる しかないと思います。
今回は VLAN モードの構築を紹介します。GRE モードも少し手順を修正すれば構成可能 です。最後のまとめに GRE モードの構築について少し触れています。
構成 public network &#43;----------------&#43;----------------&#43;----------------&#43;----------------&#43;---------------- | | | &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | controller01 | | network01 | | network02 | | compute01 | | compute02 | &#43;--------------&#43; &#43;-------&#43;------&#43; &#43;-------&#43;------&#43; &#43;-------&#43;------&#43; &#43;-------&#43;------&#43; | | | | | | | | | management network &#43;----------------&#43;-------o--------&#43;-------o--------&#43;-------o--------&#43;-------o-------- | | | | vm network &#43;----------------&#43;----------------&#43;----------------&#43;-------- 特徴は…...</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-08-16 00:00:00 &#43;0000 UTC&#39;&gt;August 16, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;3 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to rcbops Cookbooks で Neutron 構成 OpenStack" href="https://jedipunkz.github.io/post/2013/08/16/rcbops-cookbooks-neutron-openstack/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Emacs &#43; Mew で Gmail を読み書きする
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
今日も軽めの話題を。
Gmail を Emacs &#43; Mew で読み書きする方法を何故かいつも忘れてしまうので自分のた めにもメモしておきます。Gmail はブラウザで読み書き出来るのに！と思われるかもし れませんが、Emacs で文章が書けるのは重要なことです。:D
対象 OS 比較的新しい…
Debian Gnu/Linux Ubuntu を使います。
手順 Emacs, Mew, stunnel4 をインストールします。Emacs は好きな物を入れてください。
% sudo apt-get install emacs24-nox stunnel4 mew mew-bin ca-certificates openssl コマンドで mail.pem を生成します。生成したものを /etc/stunnel 配下に設 置します。
% openssl req -new -out mail.pem -keyout mail.pem -nodes -x509 -days 365 % sudo cp mail.pem /etc/stunnel/ stunnel はインストール直後、起動してくれないので ENABLE=1 に修正します。
% sudo ${EDITOR} /etc/default/stunnel4 ENABLE=1 # 0 -&gt; 1 へ変更 stunenl....</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-08-12 00:00:00 &#43;0000 UTC&#39;&gt;August 12, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;1 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Emacs &#43; Mew で Gmail を読み書きする" href="https://jedipunkz.github.io/post/2013/08/12/emacs-mew-gmail/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Debian Unstable で stumpwm
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
Linux のウィンドウマネージャは使い続けて長いのですが、既に1周半しました。twm -&gt; gnome -&gt; enlightenment -&gt; OpenBox -&gt; .. 忘れた .. -&gt; twm -&gt; vtwm -&gt; awesome -&gt; kde -&gt; gnome -&gt; enligtenment …
巷では Linux のデスクトップ環境は死んだとか言われているらしいですが、stumpwm というウィンドウマネージャは結構いいなと思いました。タイル型のウィンドウマネー ジャで Emacs 好きの人が開発したらしいです。設定は lisp で書けます。
見た目は派手では無いのですが、
グルーピング機能 すべての操作がキーボードで出来る タイル型であるので煩わしいマウスでのウィンドウ操作が不要 という点に惹かれました。
Linux を使う時、私の場合 Debian Gnu/Linux Unstalble をいつも使うのですが、 Unstable だと apt-get install stumpwm したバイナリがコケる…ということでビル ドしてあげました。普段慣れないビルド方法だったので、その時の手順を自分のために もメモしておきます。
前提環境 Debian Gnu/Linux unstable 利用 X の環境は揃っている ビルド手順 clisp をインストール clisp をインストールします。
% sudo apt-get install clisp-dev lisp....</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-08-09 00:00:00 &#43;0000 UTC&#39;&gt;August 9, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;1 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Debian Unstable で stumpwm" href="https://jedipunkz.github.io/post/2013/08/09/debian-unstable-stumpwm/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>openstack-chef-repo で OpenStack 複数台構成をデプロイ
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
前回、github.com/rcbops の Cookbooks を利用した OpenStack デプロイ方法を紹介し ました。これは RackSpace 社の Private Cloud Service で使われている Cookbooks で Apache ライセンスの元、誰でも利用できるようになっているものです。HA 構成を 組めたり Swift の操作 (Rings 情報管理など) も Chef で出来る優れた Cookbooks な わけですが、運用するにあたり幾つか考えなくてはならないこともありそうです。
chef-client の実行順番と実行回数が密接に関わっていること HA 構成の手動切替等、運用上必要な操作について考慮する必要性 ※ 後者については OpenStack ユーザ会の方々に意見もらいました。
特に前項は Chef を利用する一番の意義である “冪等性” をある程度 (全くという意味 ではありませんが) 犠牲にしていると言えます。また chef-client の実行回数、タイ ミング等 Cookbooks を完全に理解していないと運用は難しいでしょう。自ら管理して いる Cookbooks なら問題ないですが、rcbops が管理しているので常に更新状況を追っ ていく必要もありそうです。
一方、Opscode, RackSpace, AT&amp;T 等のエンジニアが管理している Cookbooks がありま す。これは以前、日本の OpenStack 勉強会で私が話した ‘openstack-chef-repo’ を利 用したモノです。github.com/stackforge の元に管理されています。 openstack-chef-repo は Berksfile, Roles, Environments のみの構成で各 Cookbooks は Berksfile を元に取得する形になります。取得先は同じく github....</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-08-06 00:00:00 &#43;0000 UTC&#39;&gt;August 6, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;4 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to openstack-chef-repo で OpenStack 複数台構成をデプロイ" href="https://jedipunkz.github.io/post/2013/08/06/opscode-cookbooks-openstack-deploy/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Cobbler で OS 自動インストール
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
最近、自動化は正義だと最近思うのですが、その手助けをしてくれるツール Cobbler を試してみました。Cobbler と複数 OS, ディストリビューションを CLI, GUI で管理出 来るツールです。PXE, TFTP, DHCPを組分せれば OS の自動構築が出来るのは古くから ありますが、TFTP サーバに配置するカーネルイメージやマックアドレスの管理を一元 して管理してくれるのがこの Cobbler です。
今回は Cobbler の構築方法をお伝えします。本当は Chef Cookbooks で構築したかっ たのですが Opscode Community にある Cookbooks はイマイチだったので、今回は手動 で。
前提環境 OS は CentOSを。Ubuntu を利用すると DHCP のコンフィギュレーションを自動で出 来ません 利用するネットワークの DHCP はオフにします 構築手順 SELINUX を無効にします。石◯さん、ごめんなさい。
# ${EDITOR} /etc/sysconfig/selinux SELINUX=disabled # setenforce 0 EPEL のレポジトリを追加します。
# rpm -Uvh http://ftp.iij.ad.jp/pub/linux/fedora/epel/6/x86_64/epel-release-6-8.noarch.rpm cobbler をインストールします。またその他必要なパッケージもここでインストールし ます。
# yum install cobbler debmirror pykickstart 自分の設定したいパスワードを生成して /etc/cobbler/settings 内の default_password_crypted: に設定します。パスワードの生成は下記のように openssl コマンドを利用します。...</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-07-28 00:00:00 &#43;0000 UTC&#39;&gt;July 28, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;2 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Cobbler で OS 自動インストール" href="https://jedipunkz.github.io/post/2013/07/28/cobbler-os-automation-install/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Swift HA 構成を Chef でデプロイ
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
最近 Chef で OpenStack をデプロイすることばかりに興味持っちゃって、他のことも やらんとなぁと思っているのですが、せっかくなので Swift HA 構成を Chef でデプロ イする方法を書きます。
Swift って分散ストレージなのに HA ってなんよ！と思われるかもしれませんが、ご存 知の様に Swift はストレージノード (accout, object, container) とプロキシノード に別れます。今回紹介する方法だとプロキシノードを Keepalived と Haproxy で HA、 また MySQL も KeepAlived で HA の構成に出来ました。いつものように RackSpace 管 理の Cookbooks を使っています。
参考資料 http://www.rackspace.com/knowledge_center/article/openstack-object-storage-configuration
構成 構成は簡単に記すと下記のようになります。特徴としては…
swift-proxy01, swift-proxy02 で HA。VRRP &#43; LB な構成。 swift-proxy01 で git サーバ稼働。Rings 情報を管理。 swift-storageNN がストレージノード OS は Ubuntu server 12.04 です。
|--------- VRRP &#43; Load Balancer ------| &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; | swift-proxy01 | | swift-proxy02 | | swift-storage01 | | swift-storage02 | | swift-storage03 | &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; &#43;-----------------&#43; | | | | | &#43;-------------------&#43;-------------------&#43;-------------------&#43;-------------------&#43;------------------ | | &#43;-----------------&#43; &#43;-----------------&#43; | chef workstation| | chef server | &#43;-----------------&#43; &#43;-----------------&#43; 絵は書く意味なかったか…。...</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-07-26 00:00:00 &#43;0000 UTC&#39;&gt;July 26, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;4 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Swift HA 構成を Chef でデプロイ" href="https://jedipunkz.github.io/post/2013/07/26/swift-ha-chef-deploy/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>OpenStack HA 構成を Chef でデプロイ
    </h2>
  </header>
  <section class="entry-content">
    <p>こんにちは。@jedipunkz です。
OpenStack を運用する中でコントローラは重要です。コントローラノードが落ちると、 仮想マシンの操作等が利用出来ません。コントローラの冗長構成を取るポイントは公式 wiki サイトに記述あるのですが PaceMaker を使った構成でしんどいです。何より運用 する人が混乱する仕組みは避けたいです。
RackSpace 社の管理している Chef Cookbooks の Roles に ‘ha-controller1’, ‘ha-controller2’ というモノがあります。今回はこれを使った HA 構成の構築方法に ついて書いていこうかと思います。
構成 最小構成を作りたいと思います。HA のためのコントローラノード2台, コンピュートノー ド1台, Chef ワークショテーション1台, Chef サーバノード1台。
&#43;----------------&#43;----------------&#43;----------------&#43;----------------&#43;--------------- public network | | | eth0 | | 10.0.0.0/24 &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | controller01 | | controller01 | | compute01 | | chef server | | workstation | &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; &#43;--------------&#43; | eth1 &#43;------------------------------------------------- fixed range network 172....</p>
  </section>
  <footer class="entry-footer">&lt;span title=&#39;2013-07-17 00:00:00 &#43;0000 UTC&#39;&gt;July 17, 2013&lt;/span&gt;&amp;nbsp;·&amp;nbsp;3 min&amp;nbsp;·&amp;nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to OpenStack HA 構成を Chef でデプロイ" href="https://jedipunkz.github.io/post/2013/07/17/openstach-ha-chef-deploy/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://jedipunkz.github.io/page/10/">« Prev Page</a>
    <a class="next" href="https://jedipunkz.github.io/page/12/">Next Page »</a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://jedipunkz.github.io">jedipunkz 🚀 のブログ</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
