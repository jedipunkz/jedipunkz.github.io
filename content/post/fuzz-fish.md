---
title: "Fish シェル ファジーファインダープラグインを作った話"
description: "Fish シェルのコマンド履歴や Git ブランチをファジー検索できるプラグイン fuzz.fish を開発しました。Go と Bubble Tea で構築した TUI ベースのツールです"
date: 2026-01-17T12:00:00+09:00
tags: ["Fish", "Go"]
categories: ["Application", "go"]
draft: false
---
[jedipunkz](https://x.com/jedipunkz) です。

今回は自作した Fish シェルプラグイン fuzz.fish について紹介します。

fuzz.fish は Fish Shell のコマンド履歴や Git ブランチをファジー検索できるプラグインです。Go と charmbracelet/bubbletea を使って TUI を実装しており、Fisher でインストールすると自動的にバイナリがビルドされます。

## ソースコード

[https://github.com/jedipunkz/fuzz.fish](https://github.com/jedipunkz/fuzz.fish)

## スクリーンショット

![fuzz.fish](/pix/fuzz.gif)

## 開発動機

普段から Fish シェルを使っていますが、コマンド履歴の検索や Git ブランチの切り替えをより効率的に行いたいと思っていました。既存のツールもありますが、以下の点を満たすものを作りたいと考えました。

- コマンド履歴と Git ブランチ検索を一つのツールで切り替えられる
- Fisher でシンプルにインストールできる
- Go で書いて高速に動作する

## 主な機能

fuzz.fish は以下の機能を持っています。今後も追加していく予定です。

- コマンド履歴のファジー検索と選択が出来る
- Git ブランチのファジー検索と選択によるブランチ変更が出来る
- 選択しているコマンドを OS のクリップボードにコピー

## インストール方法

※ 事前に Go がローカルにインストールされている必要があります。

Fisher を使ってインストールします。

```fish
fisher install jedipunkz/fuzz.fish
```

インストール時に自動的に GitHub からソースをクローンし、Go でバイナリをビルドします。

## 使い方

### コマンド履歴検索 (Ctrl+R)

`Ctrl+R` を押すとコマンド履歴のファジー検索が起動します。

- 文字を入力してインクリメンタル検索
- 矢印キーまたは `Ctrl+N/P` で上下移動
- `Enter` で選択したコマンドをコマンドラインに挿入
- (`Ctrl+Y` でクリップボードにコピー)
- `ESC` でキャンセル

Git リポジトリ内では `Ctrl+R` を再度押すと Git ブランチ検索モードに切り替わります。

### Git ブランチ検索

Git 管理のディレクトリで履歴検索モードで `Ctrl+R` を更に押すと Git ブランチ検索に切り替わります。ローカルブランチとリモートブランチの両方が表示されます。リモートブランチを選択しローカルに対応するブランチがない場合はローカルブランチを新たに checkout し遷移します。


## ディレクトリ構成

```
fuzz.fish/
├── conf.d/
│   └── fuzz.fish      # Fish Shell の設定とキーバインド
├── cmd/fuzz/
│   ├── main.go        # エントリーポイント
│   ├── app/           # TUI アプリケーション
│   ├── history/       # 履歴パーサー
│   ├── git/           # Git ブランチ操作
│   └── files/         # ファイル検索
```

## 今後の改善点

現時点で考えている改善点は以下の通りです。

- プレビュー機能の強化
- カスタマイズ可能な設定ファイル
- 検索アルゴリズムの改善

## まとめ

fuzz.fish は Fish シェルのワークフローを効率化するためのプラグインです。Go と Bubble Tea による TUI 実装で高速に動作し、Fisher で簡単にインストールできます。

自作のツールを作っても使わないで終わってしまうより毎日使うものを作って自分で改善を重ねようと思い立ち、このツールを作ってみました。気になる方は是非使ってみてもらえるとうれしいです。フィードバックやプルリクエストも歓迎します。

